let t,e;function i(t,e,i,r){Object.defineProperty(t,e,{get:i,set:r,enumerable:!0,configurable:!0})}var r,s,a,o,n,l,h,c,d,u,f,p,g,m,_,y,b=globalThis,v={},x={},w=b.parcelRequirefe65;null==w&&((w=function(t){if(t in v)return v[t].exports;if(t in x){var e=x[t];delete x[t];var i={id:t,exports:{}};return v[t]=i,e.call(i.exports,i,i.exports),i.exports}var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){x[t]=e},b.parcelRequirefe65=w);var M=w.register;function k(t,e,i,r){var s,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,r);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(o=(a<3?s(o):a>3?s(e,i,o):s(e,i))||o);return a>3&&o&&Object.defineProperty(e,i,o),o}M("1hpPT",function(t,e){i(t.exports,"default",()=>l);var r=w("dI4CB"),s=e&&!e.nodeType&&e,a=s&&t&&!t.nodeType&&t,o=a&&a.exports===s?r.default.Buffer:void 0,n=o?o.allocUnsafe:void 0,l=function(t,e){if(e)return t.slice();var i=t.length,r=n?n(i):new t.constructor(i);return t.copy(r),r}}),M("dI4CB",function(t,e){i(t.exports,"default",()=>a);var r=w("eR331"),s="object"==typeof self&&self&&self.Object===Object&&self,a=r.default||s||Function("return this")()}),M("eR331",function(t,e){i(t.exports,"default",()=>r);var r="object"==typeof b&&b&&b.Object===Object&&b}),M("ihvuy",function(t,e){i(t.exports,"default",()=>l);var r=w("dI4CB"),s=w("iOIik"),a=e&&!e.nodeType&&e,o=a&&t&&!t.nodeType&&t,n=o&&o.exports===a?r.default.Buffer:void 0,l=(n?n.isBuffer:void 0)||s.default}),M("iOIik",function(t,e){i(t.exports,"default",()=>r);var r=function(){return!1}}),M("1woAA",function(t,e){i(t.exports,"default",()=>n);var r=w("eR331"),s=e&&!e.nodeType&&e,a=s&&t&&!t.nodeType&&t,o=a&&a.exports===s&&r.default.process,n=function(){try{var t=a&&a.require&&a.require("util").types;if(t)return t;return o&&o.binding&&o.binding("util")}catch(t){}}()}),"function"==typeof SuppressedError&&SuppressedError;var S=function(t,e){return t===e||t!=t&&e!=e},$=function(t,e){for(var i=t.length;i--;)if(S(t[i][0],e))return i;return -1},A=Array.prototype.splice;function P(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}P.prototype.clear=function(){this.__data__=[],this.size=0},P.prototype.delete=function(t){var e=this.__data__,i=$(e,t);return!(i<0)&&(i==e.length-1?e.pop():A.call(e,i,1),--this.size,!0)},P.prototype.get=function(t){var e=this.__data__,i=$(e,t);return i<0?void 0:e[i][1]},P.prototype.has=function(t){return $(this.__data__,t)>-1},P.prototype.set=function(t,e){var i=this.__data__,r=$(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this};var E=w("dI4CB"),C=E.default.Symbol,O=Object.prototype,D=O.hasOwnProperty,T=O.toString,z=C?C.toStringTag:void 0,L=function(t){var e=D.call(t,z),i=t[z];try{t[z]=void 0;var r=!0}catch(t){}var s=T.call(t);return r&&(e?t[z]=i:delete t[z]),s},F=Object.prototype.toString,R=C?C.toStringTag:void 0,I=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":R&&R in Object(t)?L(t):F.call(t)},j=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},W=function(t){if(!j(t))return!1;var e=I(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},E=w("dI4CB"),N=E.default["__core-js_shared__"],V=(o=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",H=Function.prototype.toString,B=function(t){if(null!=t){try{return H.call(t)}catch(t){}try{return t+""}catch(t){}}return""},U=/^\[object .+?Constructor\]$/,q=Object.prototype,X=Function.prototype.toString,Y=q.hasOwnProperty,K=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=function(t){return!!j(t)&&(!V||!(V in t))&&(W(t)?K:U).test(B(t))},G=function(t,e){var i=null==t?void 0:t[e];return J(i)?i:void 0},E=w("dI4CB"),Z=G(E.default,"Map"),Q=G(Object,"create"),tt=Object.prototype.hasOwnProperty,te=Object.prototype.hasOwnProperty;function ti(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}ti.prototype.clear=function(){this.__data__=Q?Q(null):{},this.size=0},ti.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=!!e,e},ti.prototype.get=function(t){var e=this.__data__;if(Q){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return tt.call(e,t)?e[t]:void 0},ti.prototype.has=function(t){var e=this.__data__;return Q?void 0!==e[t]:te.call(e,t)},ti.prototype.set=function(t,e){var i=this.__data__;return this.size+=+!this.has(t),i[t]=Q&&void 0===e?"__lodash_hash_undefined__":e,this};var tr=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},ts=function(t,e){var i=t.__data__;return tr(e)?i["string"==typeof e?"string":"hash"]:i.map};function ta(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function to(t){var e=this.__data__=new P(t);this.size=e.size}ta.prototype.clear=function(){this.size=0,this.__data__={hash:new ti,map:new(Z||P),string:new ti}},ta.prototype.delete=function(t){var e=ts(this,t).delete(t);return this.size-=!!e,e},ta.prototype.get=function(t){return ts(this,t).get(t)},ta.prototype.has=function(t){return ts(this,t).has(t)},ta.prototype.set=function(t,e){var i=ts(this,t),r=i.size;return i.set(t,e),this.size+=+(i.size!=r),this},to.prototype.clear=function(){this.__data__=new P,this.size=0},to.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},to.prototype.get=function(t){return this.__data__.get(t)},to.prototype.has=function(t){return this.__data__.has(t)},to.prototype.set=function(t,e){var i=this.__data__;if(i instanceof P){var r=i.__data__;if(!Z||r.length<199)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new ta(r)}return i.set(t,e),this.size=i.size,this};var tn=function(){try{var t=G(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),tl=function(t,e,i){"__proto__"==e&&tn?tn(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i},th=function(t,e,i){(void 0===i||S(t[e],i))&&(void 0!==i||e in t)||tl(t,e,i)},tc=function(t,e,i){for(var r=-1,s=Object(t),a=i(t),o=a.length;o--;){var n=a[++r];if(!1===e(s[n],n,s))break}return t},td=w("1hpPT"),E=w("dI4CB"),tu=E.default.Uint8Array,tf=function(t){var e=new t.constructor(t.byteLength);return new tu(e).set(new tu(t)),e},tp=function(t,e){var i=e?tf(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)},tg=function(t,e){var i=-1,r=t.length;for(e||(e=Array(r));++i<r;)e[i]=t[i];return e},tm=Object.create,t_=function(){function t(){}return function(e){if(!j(e))return{};if(tm)return tm(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}(),ty=(n=Object.getPrototypeOf,l=Object,function(t){return n(l(t))}),tb=Object.prototype,tv=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||tb)},tx=function(t){return null!=t&&"object"==typeof t},tw=function(t){return tx(t)&&"[object Arguments]"==I(t)},tM=Object.prototype,tk=tM.hasOwnProperty,tS=tM.propertyIsEnumerable,t$=tw(function(){return arguments}())?tw:function(t){return tx(t)&&tk.call(t,"callee")&&!tS.call(t,"callee")},tA=Array.isArray,tP=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=0x1fffffffffffff},tE=function(t){return null!=t&&tP(t.length)&&!W(t)},tC=w("ihvuy"),tO=Object.prototype,tD=Function.prototype.toString,tT=tO.hasOwnProperty,tz=tD.call(Object),tL=function(t){if(!tx(t)||"[object Object]"!=I(t))return!1;var e=ty(t);if(null===e)return!0;var i=tT.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&tD.call(i)==tz},tF={};tF["[object Float32Array]"]=tF["[object Float64Array]"]=tF["[object Int8Array]"]=tF["[object Int16Array]"]=tF["[object Int32Array]"]=tF["[object Uint8Array]"]=tF["[object Uint8ClampedArray]"]=tF["[object Uint16Array]"]=tF["[object Uint32Array]"]=!0,tF["[object Arguments]"]=tF["[object Array]"]=tF["[object ArrayBuffer]"]=tF["[object Boolean]"]=tF["[object DataView]"]=tF["[object Date]"]=tF["[object Error]"]=tF["[object Function]"]=tF["[object Map]"]=tF["[object Number]"]=tF["[object Object]"]=tF["[object RegExp]"]=tF["[object Set]"]=tF["[object String]"]=tF["[object WeakMap]"]=!1;var tR=w("1woAA"),tI=tR.default&&tR.default.isTypedArray,tj=tI?function(t){return tI(t)}:function(t){return tx(t)&&tP(t.length)&&!!tF[I(t)]},tW=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},tN=Object.prototype.hasOwnProperty,tV=function(t,e,i){var r=t[e];tN.call(t,e)&&S(r,i)&&(void 0!==i||e in t)||tl(t,e,i)},tH=function(t,e,i,r){var s=!i;i||(i={});for(var a=-1,o=e.length;++a<o;){var n=e[a],l=r?r(i[n],t[n],n,i,t):void 0;void 0===l&&(l=t[n]),s?tl(i,n,l):tV(i,n,l)}return i},tB=function(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r},tC=w("ihvuy"),tU=/^(?:0|[1-9]\d*)$/,tq=function(t,e){var i=typeof t;return!!(e=null==e?0x1fffffffffffff:e)&&("number"==i||"symbol"!=i&&tU.test(t))&&t>-1&&t%1==0&&t<e},tX=Object.prototype.hasOwnProperty,tY=function(t,e){var i=tA(t),r=!i&&t$(t),s=!i&&!r&&(0,tC.default)(t),a=!i&&!r&&!s&&tj(t),o=i||r||s||a,n=o?tB(t.length,String):[],l=n.length;for(var h in t)(e||tX.call(t,h))&&!(o&&("length"==h||s&&("offset"==h||"parent"==h)||a&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||tq(h,l)))&&n.push(h);return n},tK=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e},tJ=Object.prototype.hasOwnProperty,tG=function(t){if(!j(t))return tK(t);var e=tv(t),i=[];for(var r in t)"constructor"==r&&(e||!tJ.call(t,r))||i.push(r);return i},tZ=function(t){return tE(t)?tY(t,!0):tG(t)},tQ=function(t,e,i,r,s,a,o){var n=tW(t,i),l=tW(e,i),h=o.get(l);if(h)return void th(t,i,h);var c=a?a(n,l,i+"",t,e,o):void 0,d=void 0===c;if(d){var u=tA(l),f=!u&&(0,tC.default)(l),p=!u&&!f&&tj(l);(c=l,u||f||p)?tA(n)?c=n:tx(n)&&tE(n)?c=tg(n):f?(d=!1,c=(0,td.default)(l,!0)):p?(d=!1,c=tp(l,!0)):c=[]:tL(l)||t$(l)?(c=n,t$(n))?c=tH(n,tZ(n)):(!j(n)||W(n))&&(c="function"!=typeof l.constructor||tv(l)?{}:t_(ty(l))):d=!1}d&&(o.set(l,c),s(c,l,r,a,o),o.delete(l)),th(t,i,c)},t0=function t(e,i,r,s,a){e!==i&&tc(i,function(o,n){if(a||(a=new to),j(o))tQ(e,i,n,r,t,s,a);else{var l=s?s(tW(e,n),o,n+"",e,i,a):void 0;void 0===l&&(l=o),th(e,n,l)}},tZ)},t1=function(t){return t},t2=function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)},t5=Math.max,t3=Date.now,t4=(h=tn?function(t,e){return tn(t,"toString",{configurable:!0,enumerable:!1,value:function(){return e},writable:!0})}:t1,c=0,d=0,function(){var t=t3(),e=16-(t-d);if(d=t,e>0){if(++c>=800)return arguments[0]}else c=0;return h.apply(void 0,arguments)}),t6=function(t,e,i){if(!j(i))return!1;var r=typeof e;return("number"==r?!!(tE(i)&&tq(e,i.length)):"string"==r&&e in i)&&S(i[e],t)};var t9=(u=function(t,e,i){t0(t,e,i)},t4((r=function(t,e){var i=-1,r=e.length,s=r>1?e[r-1]:void 0,a=r>2?e[2]:void 0;for(s=u.length>3&&"function"==typeof s?(r--,s):void 0,a&&t6(e[0],e[1],a)&&(s=r<3?void 0:s,r=1),t=Object(t);++i<r;){var o=e[i];o&&u(t,o,i,s)}return t},a=t5(void 0===(a=s)?r.length-1:a,0),function(){for(var t=arguments,e=-1,i=t5(t.length-a,0),s=Array(i);++e<i;)s[e]=t[a+e];e=-1;for(var o=Array(a+1);++e<a;)o[e]=t[e];return o[a]=t1(s),t2(r,this,o)}),r+""));let t8=t=>(e,i)=>{void 0!==i?i.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)},t7=globalThis,et=t7.ShadowRoot&&(void 0===t7.ShadyCSS||t7.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ee=Symbol(),ei=new WeakMap;class er{constructor(t,e,i){if(this._$cssResult$=!0,i!==ee)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(et&&void 0===t){let i=void 0!==e&&1===e.length;i&&(t=ei.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&ei.set(e,t))}return t}toString(){return this.cssText}}let es=t=>new er("string"==typeof t?t:t+"",void 0,ee),ea=(t,...e)=>new er(1===t.length?t[0]:e.reduce((e,i,r)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[r+1],t[0]),t,ee),eo=et?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(let i of t.cssRules)e+=i.cssText;return es(e)})(t):t,{is:en,defineProperty:el,getOwnPropertyDescriptor:eh,getOwnPropertyNames:ec,getOwnPropertySymbols:ed,getPrototypeOf:eu}=Object,ef=globalThis,ep=ef.trustedTypes,eg=ep?ep.emptyScript:"",em=ef.reactiveElementPolyfillSupport,e_={toAttribute(t,e){switch(e){case Boolean:t=t?eg:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},ey=(t,e)=>!en(t,e),eb={attribute:!0,type:String,converter:e_,reflect:!1,useDefault:!1,hasChanged:ey};Symbol.metadata??=Symbol("metadata"),ef.litPropertyMetadata??=new WeakMap;class ev extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=eb){if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){let i=Symbol(),r=this.getPropertyDescriptor(t,i,e);void 0!==r&&el(this.prototype,t,r)}}static getPropertyDescriptor(t,e,i){let{get:r,set:s}=eh(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get:r,set(e){let a=r?.call(this);s?.call(this,e),this.requestUpdate(t,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??eb}static _$Ei(){if(this.hasOwnProperty("elementProperties"))return;let t=eu(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty("finalized"))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty("properties")){let t=this.properties;for(let e of[...ec(t),...ed(t)])this.createProperty(e,t[e])}let t=this[Symbol.metadata];if(null!==t){let e=litPropertyMetadata.get(t);if(void 0!==e)for(let[t,i]of e)this.elementProperties.set(t,i)}for(let[t,e]of(this._$Eh=new Map,this.elementProperties)){let i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let e=[];if(Array.isArray(t))for(let i of new Set(t.flat(1/0).reverse()))e.unshift(eo(i));else void 0!==t&&e.push(eo(t));return e}static _$Eu(t,e){let i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){let t=new Map;for(let e of this.constructor.elementProperties.keys())this.hasOwnProperty(e)&&(t.set(e,this[e]),delete this[e]);t.size>0&&(this._$Ep=t)}createRenderRoot(){let t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{if(et)t.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(let i of e){let e=document.createElement("style"),r=t7.litNonce;void 0!==r&&e.setAttribute("nonce",r),e.textContent=i.cssText,t.appendChild(e)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$ET(t,e){let i=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,i);if(void 0!==r&&!0===i.reflect){let s=(void 0!==i.converter?.toAttribute?i.converter:e_).toAttribute(e,i.type);this._$Em=t,null==s?this.removeAttribute(r):this.setAttribute(r,s),this._$Em=null}}_$AK(t,e){let i=this.constructor,r=i._$Eh.get(t);if(void 0!==r&&this._$Em!==r){let t=i.getPropertyOptions(r),s="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:e_;this._$Em=r;let a=s.fromAttribute(e,t.type);this[r]=a??this._$Ej?.get(r)??a,this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){let r=this.constructor,s=this[t];if(!(((i??=r.getPropertyOptions(t)).hasChanged??ey)(s,e)||i.useDefault&&i.reflect&&s===this._$Ej?.get(t)&&!this.hasAttribute(r._$Eu(t,i))))return;this.C(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,e,{useDefault:i,reflect:r,wrapped:s},a){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,a??e??this[t]),!0!==s||void 0!==a)||(this._$AL.has(t)||(this.hasUpdated||i||(e=void 0),this._$AL.set(t,e)),!0===r&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}let t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}let t=this.constructor.elementProperties;if(t.size>0)for(let[e,i]of t){let{wrapped:t}=i,r=this[e];!0!==t||this._$AL.has(e)||void 0===r||this.C(e,void 0,i,r)}}let t=!1,e=this._$AL;try{(t=this.shouldUpdate(e))?(this.willUpdate(e),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(e)):this._$EM()}catch(e){throw t=!1,this._$EM(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}ev.elementStyles=[],ev.shadowRootOptions={mode:"open"},ev.elementProperties=new Map,ev.finalized=new Map,em?.({ReactiveElement:ev}),(ef.reactiveElementVersions??=[]).push("2.1.1");let ex={attribute:!0,type:String,converter:e_,reflect:!1,hasChanged:ey};function ew(t){return(e,i)=>{let r;return"object"==typeof i?((t=ex,e,i)=>{let{kind:r,metadata:s}=i,a=globalThis.litPropertyMetadata.get(s);if(void 0===a&&globalThis.litPropertyMetadata.set(s,a=new Map),"setter"===r&&((t=Object.create(t)).wrapped=!0),a.set(i.name,t),"accessor"===r){let{name:r}=i;return{set(i){let s=e.get.call(this);e.set.call(this,i),this.requestUpdate(r,s,t)},init(e){return void 0!==e&&this.C(r,void 0,t,e),e}}}if("setter"===r){let{name:r}=i;return function(i){let s=this[r];e.call(this,i),this.requestUpdate(r,s,t)}}throw Error("Unsupported decorator location: "+r)})(t,e,i):(r=e.hasOwnProperty(i),e.constructor.createProperty(i,t),r?Object.getOwnPropertyDescriptor(e,i):void 0)}}function eM(t){return ew({...t,state:!0,attribute:!1})}let ek=globalThis,eS=ek.trustedTypes,e$=eS?eS.createPolicy("lit-html",{createHTML:t=>t}):void 0,eA="$lit$",eP=`lit$${Math.random().toFixed(9).slice(2)}$`,eE="?"+eP,eC=`<${eE}>`,eO=document,eD=()=>eO.createComment(""),eT=t=>null===t||"object"!=typeof t&&"function"!=typeof t,ez=Array.isArray,eL="[ 	\n\f\r]",eF=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,eR=/-->/g,eI=/>/g,ej=RegExp(`>|${eL}(?:([^\\s"'>=/]+)(${eL}*=${eL}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),eW=/'/g,eN=/"/g,eV=/^(?:script|style|textarea|title)$/i,eH=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),eB=eH(1),eU=eH(2),eq=(eH(3),Symbol.for("lit-noChange")),eX=Symbol.for("lit-nothing"),eY=new WeakMap,eK=eO.createTreeWalker(eO,129);function eJ(t,e){if(!ez(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==e$?e$.createHTML(e):e}class eG{constructor({strings:t,_$litType$:e},i){let r;this.parts=[];let s=0,a=0,o=t.length-1,n=this.parts,[l,h]=((t,e)=>{let i=t.length-1,r=[],s,a=2===e?"<svg>":3===e?"<math>":"",o=eF;for(let e=0;e<i;e++){let i=t[e],n,l,h=-1,c=0;for(;c<i.length&&(o.lastIndex=c,null!==(l=o.exec(i)));)c=o.lastIndex,o===eF?"!--"===l[1]?o=eR:void 0!==l[1]?o=eI:void 0!==l[2]?(eV.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=ej):void 0!==l[3]&&(o=ej):o===ej?">"===l[0]?(o=s??eF,h=-1):void 0===l[1]?h=-2:(h=o.lastIndex-l[2].length,n=l[1],o=void 0===l[3]?ej:'"'===l[3]?eN:eW):o===eN||o===eW?o=ej:o===eR||o===eI?o=eF:(o=ej,s=void 0);let d=o===ej&&t[e+1].startsWith("/>")?" ":"";a+=o===eF?i+eC:h>=0?(r.push(n),i.slice(0,h)+eA+i.slice(h)+eP+d):i+eP+(-2===h?e:d)}return[eJ(t,a+(t[i]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),r]})(t,e);if(this.el=eG.createElement(l,i),eK.currentNode=this.el.content,2===e||3===e){let t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=eK.nextNode())&&n.length<o;){if(1===r.nodeType){if(r.hasAttributes())for(let t of r.getAttributeNames())if(t.endsWith(eA)){let e=h[a++],i=r.getAttribute(t).split(eP),o=/([.?@])?(.*)/.exec(e);n.push({type:1,index:s,name:o[2],strings:i,ctor:"."===o[1]?e2:"?"===o[1]?e5:"@"===o[1]?e3:e1}),r.removeAttribute(t)}else t.startsWith(eP)&&(n.push({type:6,index:s}),r.removeAttribute(t));if(eV.test(r.tagName)){let t=r.textContent.split(eP),e=t.length-1;if(e>0){r.textContent=eS?eS.emptyScript:"";for(let i=0;i<e;i++)r.append(t[i],eD()),eK.nextNode(),n.push({type:2,index:++s});r.append(t[e],eD())}}}else if(8===r.nodeType)if(r.data===eE)n.push({type:2,index:s});else{let t=-1;for(;-1!==(t=r.data.indexOf(eP,t+1));)n.push({type:7,index:s}),t+=eP.length-1}s++}}static createElement(t,e){let i=eO.createElement("template");return i.innerHTML=t,i}}function eZ(t,e,i=t,r){if(e===eq)return e;let s=void 0!==r?i._$Co?.[r]:i._$Cl,a=eT(e)?void 0:e._$litDirective$;return s?.constructor!==a&&(s?._$AO?.(!1),void 0===a?s=void 0:(s=new a(t))._$AT(t,i,r),void 0!==r?(i._$Co??=[])[r]=s:i._$Cl=s),void 0!==s&&(e=eZ(t,s._$AS(t,e.values),s,r)),e}class eQ{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){let{el:{content:e},parts:i}=this._$AD,r=(t?.creationScope??eO).importNode(e,!0);eK.currentNode=r;let s=eK.nextNode(),a=0,o=0,n=i[0];for(;void 0!==n;){if(a===n.index){let e;2===n.type?e=new e0(s,s.nextSibling,this,t):1===n.type?e=new n.ctor(s,n.name,n.strings,this,t):6===n.type&&(e=new e4(s,this,t)),this._$AV.push(e),n=i[++o]}a!==n?.index&&(s=eK.nextNode(),a++)}return eK.currentNode=eO,r}p(t){let e=0;for(let i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class e0{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,r){this.type=2,this._$AH=eX,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){let i;eT(t=eZ(this,t,e))?t===eX||null==t||""===t?(this._$AH!==eX&&this._$AR(),this._$AH=eX):t!==this._$AH&&t!==eq&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):ez(i=t)||"function"==typeof i?.[Symbol.iterator]?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==eX&&eT(this._$AH)?this._$AA.nextSibling.data=t:this.T(eO.createTextNode(t)),this._$AH=t}$(t){let{values:e,_$litType$:i}=t,r="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=eG.createElement(eJ(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===r)this._$AH.p(e);else{let t=new eQ(r,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=eY.get(t.strings);return void 0===e&&eY.set(t.strings,e=new eG(t)),e}k(t){ez(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,i,r=0;for(let s of t)r===e.length?e.push(i=new e0(this.O(eD()),this.O(eD()),this,this.options)):i=e[r],i._$AI(s),r++;r<e.length&&(this._$AR(i&&i._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t!==this._$AB;){let e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class e1{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,r,s){this.type=1,this._$AH=eX,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=eX}_$AI(t,e=this,i,r){let s=this.strings,a=!1;if(void 0===s)(a=!eT(t=eZ(this,t,e,0))||t!==this._$AH&&t!==eq)&&(this._$AH=t);else{let r,o,n=t;for(t=s[0],r=0;r<s.length-1;r++)(o=eZ(this,n[i+r],e,r))===eq&&(o=this._$AH[r]),a||=!eT(o)||o!==this._$AH[r],o===eX?t=eX:t!==eX&&(t+=(o??"")+s[r+1]),this._$AH[r]=o}a&&!r&&this.j(t)}j(t){t===eX?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class e2 extends e1{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===eX?void 0:t}}class e5 extends e1{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==eX)}}class e3 extends e1{constructor(t,e,i,r,s){super(t,e,i,r,s),this.type=5}_$AI(t,e=this){if((t=eZ(this,t,e,0)??eX)===eq)return;let i=this._$AH,r=t===eX&&i!==eX||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==eX&&(i===eX||r);r&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class e4{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){eZ(this,t)}}let e6=ek.litHtmlPolyfillSupport;e6?.(eG,e0),(ek.litHtmlVersions??=[]).push("3.3.1");let e9=globalThis;class e8 extends ev{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){let e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,i)=>{let r=i?.renderBefore??e,s=r._$litPart$;if(void 0===s){let t=i?.renderBefore??null;r._$litPart$=s=new e0(e.insertBefore(eD(),t),t,void 0,i??{})}return s._$AI(t),s})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return eq}}e8._$litElement$=!0,e8.finalized=!0,e9.litElementHydrateSupport?.({LitElement:e8});let e7=e9.litElementPolyfillSupport;e7?.({LitElement:e8}),(e9.litElementVersions??=[]).push("4.2.1");var it={};it=":host{--wfc-wind-low:var(--weather-forecast-card-wind-low-color,var(--success-color,#43a047));--wfc-wind-medium:var(--weather-forecast-card-wind-medium-color,var(--warning-color,#ffa600));--wfc-wind-high:var(--weather-forecast-card-wind-high-color,var(--error-color,#db4437));--wfc-temp-cold:var(--weather-forecast-card-temp-cold-color,#2196f3);--wfc-temp-freezing:var(--weather-forecast-card-temp-freezing-color,#4fb3ff);--wfc-temp-chilly:var(--weather-forecast-card-temp-chilly-color,#ffeb3b);--wfc-temp-mild:var(--weather-forecast-card-temp-mild-color,#4caf50);--wfc-temp-warm:var(--weather-forecast-card-temp-warm-color,#ff9800);--wfc-temp-hot:var(--weather-forecast-card-temp-hot-color,#f44336);--wfc-chart-temp-low-line-color:var(--weather-forecast-card-chart-temp-low-line-color,var(--wfc-temp-cold));--wfc-chart-temp-high-line-color:var(--weather-forecast-card-chart-temp-high-line-color,var(--wfc-temp-warm));--wfc-chart-label-color:var(--weather-forecast-card-chart-label-color,var(--primary-text-color,#000));--wfc-chart-temp-high-label-color:var(--weather-forecast-card-chart-temp-high-label-color,var(--wfc-chart-label-color));--wfc-chart-temp-low-label-color:var(--weather-forecast-card-chart-temp-low-label-color,var(--secondary-text-color,#9b9b9b));--wfc-chart-precipitation-label-color:var(--weather-forecast-card-chart-precipitation-label-color,var(--wfc-chart-label-color));--wfc-chart-grid-color:var(--weather-forecast-card-chart-grid-color,color-mix(in srgb,var(--primary-text-color,#000)15%,transparent));--wfc-precipitation-bar-color:var(--weather-forecast-card-precipitation-bar-color,color-mix(in srgb,var(--blue-color,#2196f3)40%,transparent));--wfc-sunrise-color:var(--weather-forecast-card-sunrise-color,var(--orange-color,#ff9800));--wfc-sunset-color:var(--weather-forecast-card-sunset-color,var(--purple-color,#926bc7));--wfc-day-indicator-color:var(--weather-forecast-card-day-indicator-color,#056bb8);--wfc-day-indicator-text-color:var(--weather-forecast-card-day-indicator-text-color,#fff);--wfc-component-gap:var(--ha-space-3,12px);--forecast-item-width:50px;--forecast-item-gap:0px;--forecast-precipitation-bar-max-height:calc(var(--ha-font-size-s,12px) + 2px);--fade-width:15px;--forecast-conditions-icon-size:var(--weather-forecast-card-forecast-conditions-icon-size,28px);--current-conditions-icon-size:var(--weather-forecast-card-current-conditions-icon-size,64px);--indicator-width:20px}ha-card{box-sizing:border-box;width:100%;min-width:0;padding:var(--card-padding,16px);display:block;position:relative}.wfc-container{box-sizing:border-box;z-index:1;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));gap:var(--wfc-component-gap);flex-direction:column;width:100%;max-width:100%;display:flex;position:relative;container:wfc-container/inline-size}.wfc-current-weather-container{pointer-events:auto}.wfc-current-weather{gap:var(--wfc-component-gap);user-select:none;cursor:pointer;flex-flow:column;width:100%;min-width:0;display:flex}.wfc-current-conditions{flex-direction:row;align-items:center;width:100%;min-width:0;display:flex}.wfc-name,.wfc-name-state,.wfc-current-state{white-space:nowrap;text-overflow:ellipsis;min-width:0;overflow:hidden}.wfc-name-state{flex-direction:column;flex:1;display:flex}.wfc-weather-condition-icon-slot.wfc-current-icon{width:var(--current-conditions-icon-size);height:var(--current-conditions-icon-size);margin-right:16px}.wfc-weather-condition-icon-slot.wfc-current-icon svg{width:100%;height:100%}.wfc-current-primary-secondary{flex-direction:column;align-items:flex-end;display:flex}.wfc-current-secondary-info{align-items:center;display:flex}.wfc-current-secondary-icon{width:var(--ha-font-size-xl,20px);height:var(--ha-font-size-xl,20px);--mdc-icon-size:var(--ha-font-size-xl,20px)}.wfc-current-secondary-value{padding-left:4px}.wfc-current-secondary-icon svg{width:100%!important;height:100%!important}.wfc-current-state,.wfc-current-temperature{font-size:var(--ha-font-size-3xl);line-height:var(--ha-line-height-condensed);white-space:nowrap}.wfc-current-attributes{gap:var(--ha-space-1,4px);flex-direction:column;width:100%;min-width:0;display:flex}.wfc-current-attribute{justify-content:space-between;align-items:center;gap:var(--ha-space-1,4px);font-size:var(--ha-font-size-m,14px);line-height:var(--ha-line-height-condensed);color:var(--primary-text-color,#212121);white-space:nowrap;flex-direction:row;display:flex}.wfc-current-attribute-icon{color:var(--state-icon-color,#616161);padding-left:var(--ha-space-2,8px)}.wfc-current-attribute-value,.wfc-current-attribute-name{white-space:nowrap;overflow:hidden}.wfc-current-attribute-name{text-overflow:ellipsis;padding-left:var(--ha-space-4,16px);flex:1}.wfc-forecast-container{pointer-events:auto}.wfc-forecast-container.is-scrollable{--mask:linear-gradient(to right,#0000 0,#000 var(--fade-width),#000 calc(100% - var(--fade-width)),#0000 100%);-webkit-mask:var(--mask);mask:var(--mask)}.wfc-scroll-container{scroll-snap-type:x mandatory;scroll-behavior:smooth;scrollbar-width:none;-ms-overflow-style:none;cursor:grab;user-select:none;touch-action:pan-x;overscroll-behavior-x:contain;-webkit-overflow-scrolling:touch;width:100%;min-width:0;max-width:100%;overflow:auto clip}.wfc-scroll-container.is-dragging{cursor:grabbing!important}.wfc-scroll-container.no-snap{scroll-snap-type:none!important;scroll-behavior:auto!important}.wfc-scroll-container::-webkit-scrollbar{display:none}.wfc-forecast{justify-content:flex-start;column-gap:var(--forecast-item-gap);flex-direction:row;display:flex;position:relative}.wfc-forecast-slot{min-width:var(--forecast-item-width);max-width:var(--forecast-item-width);align-items:center;gap:var(--ha-space-1,4px);scroll-snap-align:start;flex-direction:column;display:flex;position:relative}.wfc-label{font-size:var(--ha-font-size-m,14px);color:var(--secondary-text-color,#9b9b9b)}.wfc-secondary{font-size:var(--ha-font-size-m,14px);line-height:var(--ha-line-height-condensed);color:var(--secondary-text-color,#9b9b9b)}.wfc-day-indicator-container{z-index:4;pointer-events:none;min-width:var(--forecast-item-width);max-width:var(--forecast-item-width);margin-right:calc((var(--forecast-item-width) + var(--forecast-item-gap))*-1);justify-content:center;align-items:start;display:flex;position:sticky;left:0}.wfc-day-indicator{background-color:var(--wfc-day-indicator-color);color:var(--wfc-day-indicator-text-color);min-width:var(--indicator-width);text-align:center;border-radius:12px;height:20px;padding:0 8px;line-height:20px;display:block}.wfc-forecast-slot-time.wfc-sunrise{color:var(--wfc-sunrise-color)}.wfc-forecast-slot-time.wfc-sunset{color:var(--wfc-sunset-color)}.wfc-forecast-slot-time{color:var(--secondary-text-color,#9b9b9b);text-align:center;justify-content:center;align-items:center;height:20px;line-height:20px;display:flex}.wfc-forecast-slot-temperature{white-space:nowrap;flex-wrap:nowrap;justify-content:center;align-items:center;min-height:20px;display:flex}.wfc-forecast-temperature-low,.wfc-forecast-temperature-high{font-size:var(--ha-font-size-l,16px);line-height:var(--ha-line-height-condensed,1.2);color:var(--primary-text-color,#212121)}.wfc-forecast-temperature-low{color:var(--secondary-text-color,#9b9b9b)}.wfc-forecast-temperature-low.wfc-small,.wfc-forecast-temperature-high.wfc-small{font-size:var(--ha-font-size-m,14px);line-height:var(--ha-line-height-condensed,1.2)}.wfc-forecast-temperature-low.wfc-small{font-size:var(--ha-font-size-m,14px)}.wfc-forecast-temperature-separator{color:var(--secondary-text-color,#9b9b9b);margin:0 1px}.wfc-weather-condition-icon-slot{width:var(--forecast-conditions-icon-size);height:var(--forecast-conditions-icon-size);pointer-events:none;cursor:grab;padding:2px 0}.wfc-weather-condition-icon-slot .rain{fill:var(--weather-icon-rain-color,#30b3ff)}.wfc-weather-condition-icon-slot .sun{fill:var(--weather-icon-sun-color,#fdd93c)}.wfc-weather-condition-icon-slot .moon{fill:var(--weather-icon-moon-color,#fcf497)}.wfc-weather-condition-icon-slot .cloud-back{fill:var(--weather-icon-cloud-back-color,#d4d4d4)}.wfc-weather-condition-icon-slot .cloud-front{fill:var(--weather-icon-cloud-front-color,#f9f9f9)}.wfc-weather-condition-icon-slot .snow{fill:var(--weather-icon-snow-color,#f9f9f9);stroke:var(--weather-icon-snow-stroke-color,#d4d4d4);stroke-width:1px;paint-order:stroke}.wfc-forecast-slot-info{align-items:center;gap:var(--ha-space-1,4px);flex-direction:column;min-width:40px;display:flex}.wfc-forecast-precip-amount-container{pointer-events:none;justify-content:center;align-items:flex-end;height:15px;display:flex;position:relative}.wfc-forecast-precip-amount-container.wfc-not-available{visibility:hidden}.wfc-forecast-precip-amount-bar{pointer-events:none;width:30px;height:var(--forecast-precipitation-bar-height-pct);background:var(--wfc-precipitation-bar-color);z-index:1;border-radius:4px;flex-direction:column;justify-content:flex-end;display:flex;position:absolute;overflow:hidden}.wfc-forecast-precip-amount{pointer-events:none;z-index:2;font-size:var(--ha-font-size-s,12px);line-height:var(--forecast-precipitation-bar-max-height);color:var(--blue-color,#2196f3);font-weight:500;position:relative}.wfc-forecast-precip-probability{font-size:var(--ha-font-size-s,12px)}.wfc-forecast-chart{height:130px;width:var(--wfc-forecast-chart-width,auto)}.wfc-forecast-chart-footer,.wfc-forecast-chart-header{justify-content:flex-start;column-gap:var(--forecast-item-gap);min-width:var(--wfc-forecast-chart-width,auto);flex-direction:row;display:flex;width:100%!important}wfc-wind-indicator,wfc-current-weather,wfc-current-weather-attributes,wfc-forecast-header-items,wfc-weather-condition-icon-provider{display:contents}@container wfc-container (width<=375px){.wfc-current-state,.wfc-current-temperature{font-size:var(--ha-font-size-xl)}}";let ie=ea`
  ${es(it)}
`;function ii(){return(ii=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}(f=_||(_={})).language="language",f.system="system",f.comma_decimal="comma_decimal",f.decimal_comma="decimal_comma",f.space_comma="space_comma",f.none="none",(p=y||(y={})).language="language",p.system="system",p.am_pm="12",p.twenty_four="24";var ir=function(t){switch(t.number_format){case _.comma_decimal:return["en-US","en"];case _.decimal_comma:return["de","es","it"];case _.space_comma:return["fr","sv","cs"];case _.system:return;default:return t.language}},is=function(t,e,i){var r,s=e?ir(e):void 0;if(Number.isNaN=Number.isNaN||function t(e){return"number"==typeof e&&t(e)},(null==e?void 0:e.number_format)!==_.none&&!Number.isNaN(Number(t))&&Intl)try{return new Intl.NumberFormat(s,ia(t,i)).format(Number(t))}catch(e){return console.error(e),new Intl.NumberFormat(void 0,ia(t,i)).format(Number(t))}return"string"==typeof t?t:(void 0===(r=null==i?void 0:i.maximumFractionDigits)&&(r=2),Math.round(t*Math.pow(10,r))/Math.pow(10,r)).toString()+("currency"===(null==i?void 0:i.style)?" "+i.currency:"")},ia=function(t,e){var i=ii({maximumFractionDigits:2},e);if("string"!=typeof t)return i;if(!e||!e.minimumFractionDigits&&!e.maximumFractionDigits){var r=t.indexOf(".")>-1?t.split(".")[1].length:0;i.minimumFractionDigits=r,i.maximumFractionDigits=r}return i},io=["closed","locked","off"],il=function(t,e,i,r){r=r||{},i=null==i?{}:i;var s=new Event(e,{bubbles:void 0===r.bubbles||r.bubbles,cancelable:!!r.cancelable,composed:void 0===r.composed||r.composed});return s.detail=i,t.dispatchEvent(s),s},ih=function(t){il(window,"haptic",t)},ic=function(t,e,i){void 0===i&&(i=!1),i?history.replaceState(null,"",e):history.pushState(null,"",e),il(window,"location-changed",{replace:i})},id=function(t,e,i){void 0===i&&(i=!0);var r,s=e.substr(0,e.indexOf("."));switch(s){case"lock":r=i?"unlock":"lock";break;case"cover":r=i?"open_cover":"close_cover";break;default:r=i?"turn_on":"turn_off"}return t.callService("group"===s?"homeassistant":s,r,{entity_id:e})},iu=function(t,e){var i=io.includes(t.states[e].state);return id(t,e,i)},ip=function(t,e,i,r){if(r||(r={action:"more-info"}),!r.confirmation||r.confirmation.exemptions&&r.confirmation.exemptions.some(function(t){return t.user===e.user.id})||(ih("warning"),confirm(r.confirmation.text||"Are you sure you want to "+r.action+"?")))switch(r.action){case"more-info":(i.entity||i.camera_image)&&il(t,"hass-more-info",{entityId:i.entity?i.entity:i.camera_image});break;case"navigate":r.navigation_path&&ic(0,r.navigation_path);break;case"url":r.url_path&&window.open(r.url_path);break;case"toggle":i.entity&&(iu(e,i.entity),ih("success"));break;case"call-service":if(!r.service)return void ih("failure");var s=r.service.split(".",2);e.callService(s[0],s[1],r.service_data,r.target),ih("success");break;case"fire-dom-event":il(t,"ll-custom",r)}},ig=function(t,e,i,r){var s;"double_tap"===r&&i.double_tap_action?s=i.double_tap_action:"hold"===r&&i.hold_action?s=i.hold_action:"tap"===r&&i.tap_action&&(s=i.tap_action),ip(t,e,i,s)};function im(t){return void 0!==t&&"none"!==t.action}var i_={};!function(){var t=Math.PI,e=Math.sin,i=Math.cos,r=Math.tan,s=Math.asin,a=Math.atan2,o=Math.acos,n=t/180;function l(t){return new Date((t+.5-2440588)*864e5)}function h(t){return t.valueOf()/864e5-.5+2440588-2451545}var c=23.4397*n;function d(t,s){return a(e(t)*i(c)-r(s)*e(c),i(t))}function u(t,r){return s(e(r)*i(c)+i(r)*e(c)*e(t))}function f(t,s,o){return a(e(t),i(t)*e(s)-r(o)*i(s))}function p(t,r,a){return s(e(r)*e(a)+i(r)*i(a)*i(t))}function g(t,e){return n*(280.16+360.9856235*t)-e}function m(t){return n*(357.5291+.98560028*t)}function _(i){var r=n*(1.9148*e(i)+.02*e(2*i)+3e-4*e(3*i));return i+r+102.9372*n+t}function y(t){var e=_(m(t));return{dec:u(e,0),ra:d(e,0)}}var b={};b.getPosition=function(t,e,i){var r=n*e,s=h(t),a=y(s),o=g(s,-(n*i))-a.ra;return{azimuth:f(o,r,a.dec),altitude:p(o,r,a.dec)}};var v=b.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];function x(e,i,r){return 9e-4+(e+i)/(2*t)+r}function w(t,i,r){return 2451545+t+.0053*e(i)-.0069*e(2*r)}function M(t){var r=n*(134.963+13.064993*t),s=n*(218.316+13.176396*t)+6.289*n*e(r),a=5.128*n*e(n*(93.272+13.22935*t)),o=385001-20905*i(r);return{ra:d(s,a),dec:u(s,a),dist:o}}function k(t,e){return new Date(t.valueOf()+864e5*e/24)}b.addTime=function(t,e,i){v.push([t,e,i])},b.getTimes=function(r,s,a,c){var d,f,p,g,y,b=-(n*a),M=n*s,k=-2.076*Math.sqrt(c=c||0)/60,S=Math.round(h(r)-9e-4-b/(2*t)),$=x(0,b,S),A=m($),P=_(A),E=u(P,0),C=w($,A,P),O={solarNoon:l(C),nadir:l(C-.5)};for(d=0,f=v.length;d<f;d+=1)y=C-((g=function(t,r,s,a,n,l,h){return w(x(o((e(t)-e(s)*e(a))/(i(s)*i(a))),r,n),l,h)}(((p=v[d])[0]+k)*n,b,M,E,S,A,P))-C),O[p[1]]=l(y),O[p[2]]=l(g);return O},b.getMoonPosition=function(t,s,o){var l,c=n*s,d=h(t),u=M(d),m=g(d,-(n*o))-u.ra,_=p(m,c,u.dec),y=a(e(m),r(c)*i(u.dec)-e(u.dec)*i(m));return _+=((l=_)<0&&(l=0),2967e-7/Math.tan(l+.00312536/(l+.08901179))),{azimuth:f(m,c,u.dec),altitude:_,distance:u.dist,parallacticAngle:y}},b.getMoonIllumination=function(t){var r=h(t||new Date),s=y(r),n=M(r),l=o(e(s.dec)*e(n.dec)+i(s.dec)*i(n.dec)*i(s.ra-n.ra)),c=a(149598e3*e(l),n.dist-149598e3*i(l)),d=a(i(s.dec)*e(s.ra-n.ra),e(s.dec)*i(n.dec)-i(s.dec)*e(n.dec)*i(s.ra-n.ra));return{fraction:(1+i(c))/2,phase:.5+.5*c*(d<0?-1:1)/Math.PI,angle:d}},b.getMoonTimes=function(t,e,i,r){var s=new Date(t);r?s.setUTCHours(0,0,0,0):s.setHours(0,0,0,0);for(var a,o,l,h,c,d,u,f,p,g,m,_,y,v=.133*n,x=b.getMoonPosition(s,e,i).altitude-v,w=1;w<=24&&(a=b.getMoonPosition(k(s,w),e,i).altitude-v,c=(x+(o=b.getMoonPosition(k(s,w+1),e,i).altitude-v))/2-a,u=-(d=(o-x)/2)/(2*c),f=(c*u+d)*u+a,g=0,(p=d*d-4*c*a)>=0&&(m=u-(y=Math.sqrt(p)/(2*Math.abs(c))),_=u+y,1>=Math.abs(m)&&g++,1>=Math.abs(_)&&g++,m<-1&&(m=_)),1===g?x<0?l=w+m:h=w+m:2===g&&(l=w+(f<0?_:m),h=w+(f<0?m:_)),!l||!h);w+=2)x=o;var M={};return l&&(M.rise=k(s,l)),h&&(M.set=k(s,h)),l||h||(M[f>0?"alwaysUp":"alwaysDown"]=!0),M},i_=b}();var iy=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function ib(t,e){if(t.length!==e.length)return!1;for(var i,r,s=0;s<t.length;s++)if(!((i=t[s])===(r=e[s])||iy(i)&&iy(r))&&1)return!1;return!0}function iv(t,e){void 0===e&&(e=ib);var i=null;function r(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(i&&i.lastThis===this&&e(r,i.lastArgs))return i.lastResult;var a=t.apply(this,r);return i={lastResult:a,lastArgs:r,lastThis:this},a}return r.clear=function(){i=null},r}let ix=(t,e)=>iS(e).toLocaleDateString(ik(t),{weekday:"short"}),iw=t=>{let e=new Date(t);return e.setHours(0,0,0,0),e.getTime()},iM=iv(t=>{let e=t?.locale;if(e?.time_format===y.language||e?.time_format===y.system){let t=e.time_format===y.language?e.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(t).includes("10")}return e?.time_format===y.am_pm}),ik=t=>t?.locale?.language||navigator.language||"en",iS=t=>"string"==typeof t?new Date(t):t,i$=(t,e)=>{let{latitude:i,longitude:r}=t?.config||{};if(!i||!r)return null;let s=iS(e),a=i_.getTimes(s,i,r);return{sunrise:a.sunrise,sunset:a.sunset,isNightTime:s<a.sunrise||s>a.sunset}},iA=t=>0===t.length?0:t.reduce((t,e)=>t+e,0)/t.length,iP={silent:{level:-1},fatal:{level:0},error:{level:0},warn:{level:1},log:{level:2},info:{level:3},success:{level:3},fail:{level:3},ready:{level:3},start:{level:3},box:{level:3},debug:{level:4},trace:{level:5},verbose:{level:1/0}};function iE(t){if(null===t||"object"!=typeof t)return!1;let e=Object.getPrototypeOf(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.iterator in t)&&(!(Symbol.toStringTag in t)||"[object Module]"===Object.prototype.toString.call(t))}let iC=!1,iO=[];class iD{options;_lastLog;_mockFn;constructor(t={}){let e=t.types||iP;for(let i in this.options=((...t)=>t.reduce((t,e)=>(function t(e,i,r=".",s){if(!iE(i))return t(e,{},r,s);let a=Object.assign({},i);for(let i in e){if("__proto__"===i||"constructor"===i)continue;let o=e[i];null!=o&&(s&&s(a,i,o,r)||(Array.isArray(o)&&Array.isArray(a[i])?a[i]=[...o,...a[i]]:iE(o)&&iE(a[i])?a[i]=t(o,a[i],(r?`${r}.`:"")+i.toString(),s):a[i]=o))}return a})(t,e,"",void 0),{}))({...t,defaults:{...t.defaults},level:iT(t.level,e),reporters:[...t.reporters||[]]},{types:iP,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}}),e){let t={type:i,...this.options.defaults,...e[i]};this[i]=this._wrapLogFn(t),this[i].raw=this._wrapLogFn(t,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(t){this.options.level=iT(t,this.options.types,this.options.level)}prompt(t,e){if(!this.options.prompt)throw Error("prompt is not supported!");return this.options.prompt(t,e)}create(t){let e=new iD({...this.options,...t});return this._mockFn&&e.mockTypes(this._mockFn),e}withDefaults(t){return this.create({...this.options,defaults:{...this.options.defaults,...t}})}withTag(t){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+t:t})}addReporter(t){return this.options.reporters.push(t),this}removeReporter(t){if(t){let e=this.options.reporters.indexOf(t);if(-1!==e)return this.options.reporters.splice(e,1)}else this.options.reporters.splice(0);return this}setReporters(t){return this.options.reporters=Array.isArray(t)?t:[t],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(let t in this.options.types)console["__"+t]||(console["__"+t]=console[t]),console[t]=this[t].raw}restoreConsole(){for(let t in this.options.types)console["__"+t]&&(console[t]=console["__"+t],delete console["__"+t])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(t,e){t&&(t.__write||(t.__write=t.write),t.write=t=>{this[e].raw(String(t).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(t){t&&t.__write&&(t.write=t.__write,delete t.__write)}pauseLogs(){iC=!0}resumeLogs(){for(let t of(iC=!1,iO.splice(0)))t[0]._logFn(t[1],t[2])}mockTypes(t){let e=t||this.options.mockFn;if(this._mockFn=e,"function"==typeof e)for(let t in this.options.types)this[t]=e(t,this.options.types[t])||this[t],this[t].raw=this[t]}_wrapLogFn(t,e){return(...i)=>iC?void iO.push([this,t,i,e]):this._logFn(t,i,e)}_logFn(t,e,i){var r,s;if((t.level||0)>this.level)return!1;let a={date:new Date,args:[],...t,level:iT(t.level,this.options.types)};i||1!==e.length||+(s=r=e[0],"[object Object]"!==Object.prototype.toString.call(s)||!r.message&&!r.args||!!r.stack)?a.args=[...e]:Object.assign(a,e[0]),a.message&&(a.args.unshift(a.message),delete a.message),a.additional&&(Array.isArray(a.additional)||(a.additional=a.additional.split("\n")),a.args.push("\n"+a.additional.join("\n")),delete a.additional),a.type="string"==typeof a.type?a.type.toLowerCase():"log",a.tag="string"==typeof a.tag?a.tag:"";let o=(t=!1)=>{let e=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&e>0){let t=[...this._lastLog.object.args];e>1&&t.push(`(repeated ${e} times)`),this._log({...this._lastLog.object,args:t}),this._lastLog.count=1}t&&(this._lastLog.object=a,this._log(a))};clearTimeout(this._lastLog.timeout);let n=this._lastLog.time&&a.date?a.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=a.date,n<this.options.throttle)try{let t=JSON.stringify([a.type,a.tag,a.args]),e=this._lastLog.serialized===t;if(this._lastLog.serialized=t,e&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(o,this.options.throttle);return}}catch{}o(!0)}_log(t){for(let e of this.options.reporters)e.log(t,{options:this.options})}}function iT(t,e={},i=3){return void 0===t?i:"number"==typeof t?t:e[t]&&void 0!==e[t].level?e[t].level:i}iD.prototype.add=iD.prototype.addReporter,iD.prototype.remove=iD.prototype.removeReporter,iD.prototype.clear=iD.prototype.removeReporter,iD.prototype.withScope=iD.prototype.withTag,iD.prototype.mock=iD.prototype.mockTypes,iD.prototype.pause=iD.prototype.pauseLogs,iD.prototype.resume=iD.prototype.resumeLogs;class iz{options;defaultColor;levelColorMap;typeColorMap;constructor(t){this.options={...t},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(t){return t<1?console.__error||console.error:1===t?console.__warn||console.warn:console.__log||console.log}log(t){let e=this._getLogFn(t.level),i="log"===t.type?"":t.type,r=t.tag||"",s=this.typeColorMap[t.type]||this.levelColorMap[t.level]||this.defaultColor,a=`
      background: ${s};
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `,o=`%c${[r,i].filter(Boolean).join(":")}`;"string"==typeof t.args[0]?e(`${o}%c ${t.args[0]}`,a,"",...t.args.slice(1)):e(o,a,...t.args)}}function iL(t={}){return function(t={}){return new iD(t)}({reporters:t.reporters||[new iz({})],prompt:(t,e={})=>"confirm"===e.type?Promise.resolve(confirm(t)):Promise.resolve(prompt(t)),...t})}iL();let iF=iL({level:3}).withTag("weather-forecast-card"),iR=t=>"object"==typeof t&&null!==t&&"code"in t&&"invalid_entity_id"===t.code,iI=t=>(...e)=>({_$litDirective$:t,values:e});class ij{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}let iW="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.maxTouchPoints>0;class iN extends HTMLElement{constructor(){super(),this.holdTime=500,this.held=!1,this.ripple=document.createElement("mwc-ripple")}connectedCallback(){Object.assign(this.style,{position:"absolute",width:iW?"100px":"50px",height:iW?"100px":"50px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:"999"}),this.appendChild(this.ripple),this.ripple.primary=!0,["touchcancel","mouseout","mouseup","touchmove","mousewheel","wheel","scroll"].forEach(t=>{document.addEventListener(t,()=>{clearTimeout(this.timer),this.stopAnimation(),this.timer=void 0},{passive:!0})})}bind(t,e){if(t.actionHandler)return;t.actionHandler=!0,t.addEventListener("contextmenu",t=>{let e=t||window.event;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1});let i=t=>{let e,i;this.held=!1,t.touches?(e=t.touches[0].pageX,i=t.touches[0].pageY):(e=t.pageX,i=t.pageY),this.timer=window.setTimeout(()=>{this.startAnimation(e,i),this.held=!0},this.holdTime)},r=i=>{i.preventDefault(),e.stopPropagation&&i.stopPropagation(),["touchend","touchcancel"].includes(i.type)&&void 0===this.timer||(clearTimeout(this.timer),this.stopAnimation(),this.timer=void 0,this.held?il(t,"action",{action:"hold"},{bubbles:!e.stopPropagation}):e.hasDoubleClick?"click"===i.type&&i.detail<2||!this.dblClickTimeout?this.dblClickTimeout=window.setTimeout(()=>{this.dblClickTimeout=void 0,il(t,"action",{action:"tap"},{bubbles:!e.stopPropagation})},250):(clearTimeout(this.dblClickTimeout),this.dblClickTimeout=void 0,il(t,"action",{action:"double_tap"},{bubbles:!e.stopPropagation})):il(t,"action",{action:"tap"},{bubbles:!e.stopPropagation}))};t.addEventListener("touchstart",i,{passive:!0}),t.addEventListener("touchend",r),t.addEventListener("touchcancel",r),t.addEventListener("mousedown",i,{passive:!0}),t.addEventListener("click",r),t.addEventListener("keyup",t=>{13===t.keyCode&&r(t)})}startAnimation(t,e){Object.assign(this.style,{left:`${t}px`,top:`${e}px`,display:null}),this.ripple.disabled=!1,this.ripple.active=!0,this.ripple.unbounded=!0}stopAnimation(){this.ripple.active=!1,this.ripple.disabled=!0,this.style.display="none"}}customElements.define("action-handler-wfc",iN);let iV=iI(class extends ij{update(t,[e]){var i;let r;return i=t.element,(r=(()=>{let t=document.body;if(t.querySelector("action-handler-wfc"))return t.querySelector("action-handler-wfc");let e=document.createElement("action-handler-wfc");return t.appendChild(e),e})())&&r.bind(i,e),eq}render(t){}}),iH=["humidity","pressure","wind_speed","wind_gust_speed","visibility","ozone","uv_index","dew_point","apparent_temperature","cloud_coverage"],iB=["rain","snow","lightning","sky","moon","sun"];var iU=((g={}).Chart="chart",g.Simple="simple",g);let iq=iI(class extends ij{constructor(t){if(super(t),1!==t.type||"class"!==t.name||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(void 0===this.st){for(let i in this.st=new Set,void 0!==t.strings&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(t=>""!==t))),e)e[i]&&!this.nt?.has(i)&&this.st.add(i);return this.render(e)}let i=t.element.classList;for(let t of this.st)t in e||(i.remove(t),this.st.delete(t));for(let t in e){let r=!!e[t];r===this.st.has(t)||this.nt?.has(t)||(r?(i.add(t),this.st.add(t)):(i.remove(t),this.st.delete(t)))}return eq}});var iX=((m={}).Temperature="temperature_unit",m.Pressure="pressure_unit",m.WindSpeed="wind_speed_unit",m.Precipitation="precipitation_unit",m.Visibility="visibility_unit",m);let iY=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],iK={N:0,P:0,NNE:22.5,NNO:22.5,NNW:337.5,NE:45,NO:45,ENE:67.5,ONO:67.5,E:90,O:90,:90,ESE:112.5,OSO:112.5,SE:135,SO:135,SSE:157.5,SSO:157.5,S:180,SSW:202.5,SW:225,WSW:247.5,W:270,V:270,WNW:292.5,NW:315},iJ={humidity:"mdi:water-percent",pressure:"mdi:gauge",wind_speed:"mdi:weather-windy-variant",wind_gust_speed:"mdi:weather-windy",visibility:"mdi:eye",ozone:"mdi:molecule",uv_index:"mdi:weather-sunny-alert",dew_point:"mdi:water-thermometer-outline",apparent_temperature:"mdi:thermometer",cloud_coverage:"mdi:cloud-outline"},iG=(t,e,i)=>{let r=t.config,s=r.unit_system.length||"";switch(i){case"visibility":return e.attributes.visibility_unit||s;case"precipitation":return e.attributes.precipitation_unit||("km"===s?"mm":"in");case"pressure":return e.attributes.pressure_unit||("km"===s?"hPa":"inHg");case"apparent_temperature":case"dew_point":case"temperature":case"templow":return e.attributes.temperature_unit||r.unit_system.temperature;case"wind_speed":case"wind_gust_speed":return e.attributes.wind_speed_unit||`${s}/h`;case"ozone":return"DU";case"cloud_coverage":case"humidity":case"precipitation_probability":return"%";default:return(i in r.unit_system?r.unit_system[i]:"")||""}},iZ=t=>{if(t?.forecast&&t.forecast.length>2)return(t=>{if(t&&t?.length&&t?.length>2){let e=new Date(t[1].datetime);return new Date(t[2].datetime).getTime()-e.getTime()<288e5}})(t.forecast)?{forecast:t.forecast,type:"hourly"}:(t=>{if(t&&t?.length&&t?.length>2){let e=new Date(t[1].datetime);return new Date(t[2].datetime).getTime()-e.getTime()<864e5}})(t.forecast)?{forecast:t.forecast,type:"twice_daily"}:{forecast:t.forecast,type:"daily"}},iQ=(t,e,i)=>void 0===i?e?.type!==void 0&&e?.forecast&&e?.forecast?.length>2?{forecast:e.forecast,type:e?.type}:iZ(t):"legacy"===i?iZ(t):i===e?.type&&e?.forecast&&e?.forecast?.length>2?{forecast:e.forecast,type:i}:void 0,i0=(t,e,i,r)=>t.connection.subscribeMessage(r,{type:"weather/subscribe_forecast",forecast_type:i,entity_id:e}),i1=iv((t,e)=>{let i="hourly"===e?8:20;return"in"===t?parseFloat((i/25.4).toFixed(1)):i}),i2=(t,e,i)=>{if(void 0===i.wind_speed)return;let r=iG(t,e,"wind_speed");return i5(i.wind_speed,r)},i5=(t,e)=>t*(({"km/h":1/3.6,kmh:1/3.6,mph:.44704,kn:.514444,kt:.514444,knot:.514444,knots:.514444,"m/s":1,ms:1})[e]||1),i3=(t,e,i,r)=>{let s=e.attributes[r];if(void 0!==s){if("wind_speed"===r)return((t,e)=>{let i=e.attributes.wind_speed,r=e.attributes.wind_bearing;if(null==i)return;let s=t.formatEntityAttributeValue(e,"wind_speed");if(null==r)return s;let a=(t=>{if(null==t)return;let e="number"==typeof t?t:parseFloat(t);if(!isNaN(e)&&isFinite(e))return(e%=360)<0&&(e+=360),iY[Math.floor(e/22.5+.5)%16]})(r);if(!a)return s;let o=t.localize(`ui.card.weather.cardinal_direction.${a.toLowerCase()}`)||a;return`${s} (${o})`})(t,e);if("wind_gust_speed"===r){let i=iG(t,e,"wind_gust_speed"),r=is(s,t.locale);return`${r} ${i}`}if("ozone"===r){let i=iG(t,e,"ozone");return`${s} ${i}`}return"apparent_temperature"===r||"dew_point"===r?i4(t,e,s,i.current?.temperature_precision):t.formatEntityAttributeValue(e,r)}},i4=(t,e,i,r,s)=>{let a=iG(t,e,"temperature"),o=is(i,t.locale,null!=r?{maximumFractionDigits:r,minimumFractionDigits:r}:void 0);return`${o}${s?"":a}`},i6=t=>{if(0===t.length)return 0;let e=0,i=0;t.forEach(t=>{let r=t*Math.PI/180;e+=Math.sin(r),i+=Math.cos(r)});let r=180*Math.atan2(e/t.length,i/t.length)/Math.PI;return r<0&&(r+=360),Math.round(r)},i9=t=>{let e=["exceptional","hail","lightning-rainy","lightning","snowy-rainy","pouring","snowy","rainy","windy-variant","windy","fog","cloudy","partlycloudy","clear-night","sunny"];return t.sort((t,i)=>{let r=e.indexOf(t.condition||"exceptional"),s=e.indexOf(i.condition||"exceptional");return -1===r&&(r=0),-1===s&&(s=0),r-s}),t[0]?.condition||"exceptional"};class i8{constructor(t,e){this._mouseDown=!1,this._scrolling=!1,this._scrolled=!1,this._state={startX:0,startLeft:0,lastX:0,velocity:0,momentumId:0},this._onMouseDown=t=>{this._container&&(this._mouseDown=!0,this._scrolled=!1,this._scrolling=!1,this._state.startX=t.pageX-this._container.offsetLeft,this._state.startLeft=this._container.scrollLeft,this._state.lastX=t.pageX,this._state.velocity=0,cancelAnimationFrame(this._state.momentumId),window.addEventListener("mousemove",this._onMouseMove),window.addEventListener("mouseup",this._onMouseUp,{once:!0}),this._host.requestUpdate())},this._onMouseMove=t=>{if(!this._mouseDown||!this._container)return;let e=t.pageX-this._container.offsetLeft-this._state.startX;if(this._state.velocity=t.pageX-this._state.lastX,this._state.lastX=t.pageX,!this._scrolled&&Math.abs(e)>3&&(this._scrolled=!0,this._scrolling=!0,this._container.classList.add("is-dragging","no-snap")),this._scrolled){let t=this._container,i=this._state.startLeft-e;requestAnimationFrame(()=>{t&&(t.scrollLeft=i)})}},this._onMouseUp=()=>{if(this._cleanup(),this._container){if(this._container.classList.remove("is-dragging"),!this._scrolled)return void this._container.classList.remove("no-snap");Math.abs(this._state.velocity)>1?this._runMomentum():this._finalize()}this._host.requestUpdate()},this._runMomentum=()=>{let t=this._container;!t||.5>Math.abs(this._state.velocity)?this._finalize():(t.scrollLeft-=this._state.velocity,this._state.velocity*=.95,this._state.momentumId=requestAnimationFrame(this._runMomentum))},this._finalize=()=>{let t=this._container;if(!t||!this._childSelector)return void this._completeFinalize();let e=t.querySelector(this._childSelector);if(!e)return void this._completeFinalize();let i=e.getBoundingClientRect().width;if(!i||!Number.isFinite(i))return void this._completeFinalize();let r=t.scrollLeft,s=Math.round(r/i)*i,a=performance.now(),o=t=>{let e=this._container;if(!e)return void this._completeFinalize();let i=Math.min((t-a)/500,1);e.scrollLeft=r+i*(2-i)*(s-r),i<1?this._state.momentumId=requestAnimationFrame(o):this._completeFinalize()};this._state.momentumId=requestAnimationFrame(o)},this._completeFinalize=()=>{this._scrolling=!1,this._container?.classList.remove("no-snap"),clearTimeout(this._finalizeId),this._finalizeId=window.setTimeout(()=>{this._scrolled=!1,this._host.requestUpdate()},50)},this._host=t,this._selector=e.selector,this._childSelector=e.childSelector,t.addController(this)}hostUpdated(){this._container||this._attach()}hostDisconnected(){this._detach()}isScrolling(){return this._scrolled||this._scrolling}_attach(){this._container=this._host.renderRoot?.querySelector(this._selector),this._container?.addEventListener("mousedown",this._onMouseDown)}_detach(){this._cleanup(),this._container&&(this._container.classList.remove("is-dragging","no-snap"),this._container.removeEventListener("mousedown",this._onMouseDown),this._container=void 0)}_cleanup(){this._mouseDown=!1,window.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("mouseup",this._onMouseUp),cancelAnimationFrame(this._state.momentumId),clearTimeout(this._finalizeId)}}let i7="important",rt=" !"+i7,re=iI(class extends ij{constructor(t){if(super(t),1!==t.type||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,i)=>{let r=t[i];return null==r?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){let{style:i}=t.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(e)),this.render(e);for(let t of this.ft)null==e[t]&&(this.ft.delete(t),t.includes("-")?i.removeProperty(t):i[t]=null);for(let t in e){let r=e[t];if(null!=r){this.ft.add(t);let e="string"==typeof r&&r.endsWith(rt);t.includes("-")||e?i.setProperty(t,e?r.slice(0,-11):r,e?i7:""):i[t]=r}}return eq}});function ri(t){return t+.5|0}let rr=(t,e,i)=>Math.max(Math.min(t,i),e);function rs(t){return rr(ri(2.55*t),0,255)}function ra(t){return rr(ri(255*t),0,255)}function ro(t){return rr(ri(t/2.55)/100,0,1)}function rn(t){return rr(ri(100*t),0,100)}let rl={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},rh=[..."0123456789ABCDEF"],rc=t=>rh[15&t],rd=t=>rh[(240&t)>>4]+rh[15&t],ru=t=>(240&t)>>4==(15&t),rf=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function rp(t,e,i){let r=e*Math.min(i,1-i),s=(e,s=(e+t/30)%12)=>i-r*Math.max(Math.min(s-3,9-s,1),-1);return[s(0),s(8),s(4)]}function rg(t,e,i){let r=(r,s=(r+t/60)%6)=>i-i*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function rm(t,e,i){let r,s=rp(t,1,.5);for(e+i>1&&(r=1/(e+i),e*=r,i*=r),r=0;r<3;r++)s[r]*=1-e-i,s[r]+=e;return s}function r_(t){let e,i,r,s=t.r/255,a=t.g/255,o=t.b/255,n=Math.max(s,a,o),l=Math.min(s,a,o),h=(n+l)/2;n!==l&&(r=n-l,i=h>.5?r/(2-n-l):r/(n+l),e=60*(e=s===n?(a-o)/r+6*(a<o):a===n?(o-s)/r+2:(s-a)/r+4)+.5);return[0|e,i||0,h]}function ry(t,e,i,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,r)).map(ra)}function rb(t){return(t%360+360)%360}let rv={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},rx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},rw=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,rM=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,rk=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function rS(t,e,i){if(t){let r=r_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*i,0===e?360:1)),t.r=(r=ry(rp,r,void 0,void 0))[0],t.g=r[1],t.b=r[2]}}function r$(t,e){return t?Object.assign(e||{},t):t}function rA(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ra(t[3]))):(e=r$(t,{r:0,g:0,b:0,a:1})).a=ra(e.a),e}class rP{constructor(e){let i;if(e instanceof rP)return e;let r=typeof e;if("object"===r)i=rA(e);else{var s,a;let o;"string"===r&&(a=e.length,"#"===e[0]&&(4===a||5===a?s={r:255&17*rl[e[1]],g:255&17*rl[e[2]],b:255&17*rl[e[3]],a:5===a?17*rl[e[4]]:255}:(7===a||9===a)&&(s={r:rl[e[1]]<<4|rl[e[2]],g:rl[e[3]]<<4|rl[e[4]],b:rl[e[5]]<<4|rl[e[6]],a:9===a?rl[e[7]]<<4|rl[e[8]]:255})),i=s||(t||((t=function(){let t,e,i,r,s,a={},o=Object.keys(rx),n=Object.keys(rv);for(t=0;t<o.length;t++){for(e=0,r=s=o[t];e<n.length;e++)i=n[e],s=s.replace(i,rv[i]);i=parseInt(rx[r],16),a[s]=[i>>16&255,i>>8&255,255&i]}return a}()).transparent=[0,0,0,0]),(o=t[e.toLowerCase()])&&{r:o[0],g:o[1],b:o[2],a:4===o.length?o[3]:255})||("r"===e.charAt(0)?function(t){let e,i,r,s=rw.exec(t),a=255;if(s){if(s[7]!==e){let t=+s[7];a=s[8]?rs(t):rr(255*t,0,255)}return e=+s[1],i=+s[3],r=+s[5],e=255&(s[2]?rs(e):rr(e,0,255)),{r:e,g:i=255&(s[4]?rs(i):rr(i,0,255)),b:r=255&(s[6]?rs(r):rr(r,0,255)),a:a}}}(e):function(t){let e,i=rf.exec(t),r=255;if(!i)return;i[5]!==e&&(r=i[6]?rs(+i[5]):ra(+i[5]));let s=rb(+i[2]),a=i[3]/100,o=i[4]/100;return{r:(e="hwb"===i[1]?ry(rm,s,a,o):"hsv"===i[1]?ry(rg,s,a,o):ry(rp,s,a,o))[0],g:e[1],b:e[2],a:r}}(e)))}this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=r$(this._rgb);return t&&(t.a=ro(t.a)),t}set rgb(t){this._rgb=rA(t)}rgbString(){var t;return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ro(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0}hexString(){var t,e;let i,r;return this._valid?(e=ru((i=t=this._rgb).r)&&ru(i.g)&&ru(i.b)&&ru(i.a)?rc:rd,t?"#"+e(t.r)+e(t.g)+e(t.b)+(r=t.a,r<255?e(r):""):void 0):void 0}hslString(){return this._valid?function(t){if(!t)return;let e=r_(t),i=e[0],r=rn(e[1]),s=rn(e[2]);return t.a<255?`hsla(${i}, ${r}%, ${s}%, ${ro(t.a)})`:`hsl(${i}, ${r}%, ${s}%)`}(this._rgb):void 0}mix(t,e){if(t){let i,r=this.rgb,s=t.rgb,a=e===i?.5:e,o=2*a-1,n=r.a-s.a,l=((o*n==-1?o:(o+n)/(1+o*n))+1)/2;i=1-l,r.r=255&l*r.r+i*s.r+.5,r.g=255&l*r.g+i*s.g+.5,r.b=255&l*r.b+i*s.b+.5,r.a=a*r.a+(1-a)*s.a,this.rgb=r}return this}interpolate(t,e){var i,r;let s,a,o;return t&&(this._rgb=(i=this._rgb,r=t._rgb,s=rk(ro(i.r)),a=rk(ro(i.g)),o=rk(ro(i.b)),{r:ra(rM(s+e*(rk(ro(r.r))-s))),g:ra(rM(a+e*(rk(ro(r.g))-a))),b:ra(rM(o+e*(rk(ro(r.b))-o))),a:i.a+e*(r.a-i.a)})),this}clone(){return new rP(this.rgb)}alpha(t){return this._rgb.a=ra(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=ri(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return rS(this._rgb,2,t),this}darken(t){return rS(this._rgb,2,-t),this}saturate(t){return rS(this._rgb,1,t),this}desaturate(t){return rS(this._rgb,1,-t),this}rotate(t){var e,i;return e=this._rgb,(i=r_(e))[0]=rb(i[0]+t),e.r=(i=ry(rp,i,void 0,void 0))[0],e.g=i[1],e.b=i[2],this}}let rE=(e=0,()=>e++);function rC(t){return null==t}function rO(t){if(Array.isArray&&Array.isArray(t))return!0;let e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function rD(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function rT(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function rz(t,e){return rT(t)?t:e}function rL(t,e){return void 0===t?e:t}let rF=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function rR(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function rI(t,e,i,r){let s,a,o;if(rO(t))if(a=t.length,r)for(s=a-1;s>=0;s--)e.call(i,t[s],s);else for(s=0;s<a;s++)e.call(i,t[s],s);else if(rD(t))for(s=0,a=(o=Object.keys(t)).length;s<a;s++)e.call(i,t[o[s]],o[s])}function rj(t,e){let i,r,s,a;if(!t||!e||t.length!==e.length)return!1;for(i=0,r=t.length;i<r;++i)if(s=t[i],a=e[i],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function rW(t){if(rO(t))return t.map(rW);if(rD(t)){let e=Object.create(null),i=Object.keys(t),r=i.length,s=0;for(;s<r;++s)e[i[s]]=rW(t[i[s]]);return e}return t}function rN(t){return -1===["__proto__","prototype","constructor"].indexOf(t)}function rV(t,e,i,r){if(!rN(t))return;let s=e[t],a=i[t];rD(s)&&rD(a)?rH(s,a,r):e[t]=rW(a)}function rH(t,e,i){let r,s=rO(e)?e:[e],a=s.length;if(!rD(t))return t;let o=(i=i||{}).merger||rV;for(let e=0;e<a;++e){if(!rD(r=s[e]))continue;let a=Object.keys(r);for(let e=0,s=a.length;e<s;++e)o(a[e],t,r,i)}return t}function rB(t,e){return rH(t,e,{merger:rU})}function rU(t,e,i){if(!rN(t))return;let r=e[t],s=i[t];rD(r)&&rD(s)?rB(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=rW(s))}let rq={"":t=>t,x:t=>t.x,y:t=>t.y};function rX(t,e){let i;return(rq[e]||(rq[e]=(i=function(t){let e=t.split("."),i=[],r="";for(let t of e)(r+=t).endsWith("\\")?r=r.slice(0,-1)+".":(i.push(r),r="");return i}(e),t=>{for(let e of i){if(""===e)break;t=t&&t[e]}return t})))(t)}function rY(t){return t.charAt(0).toUpperCase()+t.slice(1)}let rK=t=>void 0!==t,rJ=t=>"function"==typeof t,rG=(t,e)=>{if(t.size!==e.size)return!1;for(let i of t)if(!e.has(i))return!1;return!0},rZ=Math.PI,rQ=2*rZ,r0=rQ+rZ,r1=1/0,r2=rZ/180,r5=rZ/2,r3=rZ/4,r4=2*rZ/3,r6=Math.log10,r9=Math.sign;function r8(t,e,i){return Math.abs(t-e)<i}function r7(t){let e=Math.round(t),i=Math.pow(10,Math.floor(r6(t=r8(t,e,t/1e3)?e:t))),r=t/i;return(r<=1?1:r<=2?2:r<=5?5:10)*i}function st(t){return"symbol"!=typeof t&&("object"!=typeof t||null===t||!!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t))&&!isNaN(parseFloat(t))&&isFinite(t)}function se(t,e,i){let r,s,a;for(r=0,s=t.length;r<s;r++)isNaN(a=t[r][i])||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function si(t){return rZ/180*t}function sr(t){if(!rT(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function ss(t,e){let i=e.x-t.x,r=e.y-t.y,s=Math.sqrt(i*i+r*r),a=Math.atan2(r,i);return a<-.5*rZ&&(a+=rQ),{angle:a,distance:s}}function sa(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function so(t,e){return(t-e+r0)%rQ-rZ}function sn(t){return(t%rQ+rQ)%rQ}function sl(t,e,i,r){let s=sn(t),a=sn(e),o=sn(i),n=sn(a-s),l=sn(o-s),h=sn(s-a),c=sn(s-o);return s===a||s===o||r&&a===o||n>l&&h<c}function sh(t,e,i){return Math.max(e,Math.min(i,t))}function sc(t,e,i,r=1e-6){return t>=Math.min(e,i)-r&&t<=Math.max(e,i)+r}function sd(t,e,i){let r;i=i||(i=>t[i]<e);let s=t.length-1,a=0;for(;s-a>1;)i(r=a+s>>1)?a=r:s=r;return{lo:a,hi:s}}let su=(t,e,i,r)=>sd(t,i,r?r=>{let s=t[r][e];return s<i||s===i&&t[r+1][e]===i}:r=>t[r][e]<i),sf=(t,e,i)=>sd(t,i,r=>t[r][e]>=i),sp=["push","pop","shift","splice","unshift"];function sg(t,e){let i=t._chartjs;if(!i)return;let r=i.listeners,s=r.indexOf(e);-1!==s&&r.splice(s,1),r.length>0||(sp.forEach(e=>{delete t[e]}),delete t._chartjs)}function sm(t){let e=new Set(t);return e.size===t.length?t:Array.from(e)}let s_="u"<typeof window?function(t){return t()}:window.requestAnimationFrame;function sy(t,e){let i=[],r=!1;return function(...s){i=s,r||(r=!0,s_.call(window,()=>{r=!1,t.apply(e,i)}))}}let sb=t=>"start"===t?"left":"end"===t?"right":"center",sv=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2;function sx(t,e,i){let r=e.length,s=0,a=r;if(t._sorted){let{iScale:o,vScale:n,_parsed:l}=t,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,c=o.axis,{min:d,max:u,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(s=Math.min(su(l,c,d).lo,i?r:su(e,c,o.getPixelForValue(d)).lo),h){let t=l.slice(0,s+1).reverse().findIndex(t=>!rC(t[n.axis]));s-=Math.max(0,t)}s=sh(s,0,r-1)}if(p){let t=Math.max(su(l,o.axis,u,!0).hi+1,i?0:su(e,c,o.getPixelForValue(u),!0).hi+1);if(h){let e=l.slice(t-1).findIndex(t=>!rC(t[n.axis]));t+=Math.max(0,e)}a=sh(t,s,r)-s}else a=r-s}return{start:s,count:a}}function sw(t){let{xScale:e,yScale:i,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!r)return t._scaleRanges=s,!0;let a=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==i.min||r.ymax!==i.max;return Object.assign(r,s),a}let sM=t=>0===t||1===t,sk=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*rQ/i)),sS=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*rQ/i)+1,s$={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*r5)+1,easeOutSine:t=>Math.sin(t*r5),easeInOutSine:t=>-.5*(Math.cos(rZ*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>sM(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(-Math.pow(2,-10*(2*t-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>sM(t)?t:sk(t,.075,.3),easeOutElastic:t=>sM(t)?t:sS(t,.075,.3),easeInOutElastic:t=>sM(t)?t:t<.5?.5*sk(2*t,.1125,.45):.5+.5*sS(2*t-1,.1125,.45),easeInBack:t=>t*t*(2.70158*t-1.70158),easeOutBack:t=>(t-=1)*t*(2.70158*t+1.70158)+1,easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-s$.easeOutBounce(1-t),easeOutBounce:t=>t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375,easeInOutBounce:t=>t<.5?.5*s$.easeInBounce(2*t):.5*s$.easeOutBounce(2*t-1)+.5};function sA(t){if(t&&"object"==typeof t){let e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function sP(t){return sA(t)?t:new rP(t)}function sE(t){return sA(t)?t:new rP(t).saturate(.5).darken(.1).hexString()}let sC=["x","y","borderWidth","radius","tension"],sO=["color","borderColor","backgroundColor"],sD=new Map;function sT(t,e,i){var r;let s,a;return(s=e+JSON.stringify(r=(r=i)||{}),!(a=sD.get(s))&&(a=new Intl.NumberFormat(e,r),sD.set(s,a)),a).format(t)}let sz={values:t=>rO(t)?t:""+t,numeric(t,e,i){let r;if(0===t)return"0";let s=this.chart.options.locale,a=t;if(i.length>1){var o,n;let e,s=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(s<1e-4||s>1e15)&&(r="scientific"),o=t,Math.abs(e=(n=i).length>3?n[2].value-n[1].value:n[1].value-n[0].value)>=1&&o!==Math.floor(o)&&(e=o-Math.floor(o)),a=e}let l=r6(Math.abs(a)),h=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),c={notation:r,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(c,this.options.ticks.format),sT(t,s,c)},logarithmic(t,e,i){return 0===t?"0":[1,2,3,5,10,15].includes(i[e].significand||t/Math.pow(10,Math.floor(r6(t))))||e>.8*i.length?sz.numeric.call(this,t,e,i):""}},sL=Object.create(null),sF=Object.create(null);function sR(t,e){if(!e)return t;let i=e.split(".");for(let e=0,r=i.length;e<r;++e){let r=i[e];t=t[r]||(t[r]=Object.create(null))}return t}function sI(t,e,i){return"string"==typeof e?rH(sR(t,e),i):rH(sR(t,""),e)}var sj=new class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>sE(e.backgroundColor),this.hoverBorderColor=(t,e)=>sE(e.borderColor),this.hoverColor=(t,e)=>sE(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return sI(this,t,e)}get(t){return sR(this,t)}describe(t,e){return sI(sF,t,e)}override(t,e){return sI(sL,t,e)}route(t,e,i,r){let s=sR(this,t),a=sR(this,i),o="_"+e;Object.defineProperties(s,{[o]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){let t=this[o],e=a[r];return rD(t)?Object.assign({},e,t):rL(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach(t=>t(this))}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:sO},numbers:{type:"number",properties:sC}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sz.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function sW(t,e,i,r,s){let a=e[s];return a||(a=e[s]=t.measureText(s).width,i.push(s)),a>r&&(r=a),r}function sN(t,e,i){let r=t.currentDevicePixelRatio,s=0!==i?Math.max(i/2,.5):0;return Math.round((e-s)*r)/r+s}function sV(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function sH(t,e,i,r){sB(t,e,i,r,null)}function sB(t,e,i,r,s){let a,o,n,l,h,c,d,u,f=e.pointStyle,p=e.rotation,g=e.radius,m=(p||0)*r2;if(f&&"object"==typeof f&&("[object HTMLImageElement]"===(a=f.toString())||"[object HTMLCanvasElement]"===a)){t.save(),t.translate(i,r),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!isNaN(g)&&!(g<=0)){switch(t.beginPath(),f){default:s?t.ellipse(i,r,s/2,g,0,0,rQ):t.arc(i,r,g,0,rQ),t.closePath();break;case"triangle":c=s?s/2:g,t.moveTo(i+Math.sin(m)*c,r-Math.cos(m)*g),m+=r4,t.lineTo(i+Math.sin(m)*c,r-Math.cos(m)*g),m+=r4,t.lineTo(i+Math.sin(m)*c,r-Math.cos(m)*g),t.closePath();break;case"rectRounded":h=.516*g,o=Math.cos(m+r3)*(l=g-h),d=Math.cos(m+r3)*(s?s/2-h:l),n=Math.sin(m+r3)*l,u=Math.sin(m+r3)*(s?s/2-h:l),t.arc(i-d,r-n,h,m-rZ,m-r5),t.arc(i+u,r-o,h,m-r5,m),t.arc(i+d,r+n,h,m,m+r5),t.arc(i-u,r+o,h,m+r5,m+rZ),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,c=s?s/2:l,t.rect(i-c,r-l,2*c,2*l);break}m+=r3;case"rectRot":d=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,n=Math.sin(m)*g,u=Math.sin(m)*(s?s/2:g),t.moveTo(i-d,r-n),t.lineTo(i+u,r-o),t.lineTo(i+d,r+n),t.lineTo(i-u,r+o),t.closePath();break;case"crossRot":m+=r3;case"cross":d=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,n=Math.sin(m)*g,u=Math.sin(m)*(s?s/2:g),t.moveTo(i-d,r-n),t.lineTo(i+d,r+n),t.moveTo(i+u,r-o),t.lineTo(i-u,r+o);break;case"star":d=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,n=Math.sin(m)*g,u=Math.sin(m)*(s?s/2:g),t.moveTo(i-d,r-n),t.lineTo(i+d,r+n),t.moveTo(i+u,r-o),t.lineTo(i-u,r+o),m+=r3,d=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,n=Math.sin(m)*g,u=Math.sin(m)*(s?s/2:g),t.moveTo(i-d,r-n),t.lineTo(i+d,r+n),t.moveTo(i+u,r-o),t.lineTo(i-u,r+o);break;case"line":o=s?s/2:Math.cos(m)*g,n=Math.sin(m)*g,t.moveTo(i-o,r-n),t.lineTo(i+o,r+n);break;case"dash":t.moveTo(i,r),t.lineTo(i+Math.cos(m)*(s?s/2:g),r+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function sU(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function sq(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function sX(t){t.restore()}function sY(t,e,i,r,s){if(!e)return t.lineTo(i.x,i.y);if("middle"===s){let r=(e.x+i.x)/2;t.lineTo(r,e.y),t.lineTo(r,i.y)}else"after"===s!=!!r?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function sK(t,e,i,r){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?i.cp2x:i.cp1x,r?i.cp2y:i.cp1y,i.x,i.y)}function sJ(t,e,i,r,s,a={}){let o,n,l=rO(e)?e:[e],h=a.strokeWidth>0&&""!==a.strokeColor;for(t.save(),t.font=s.string,a.translation&&t.translate(a.translation[0],a.translation[1]),rC(a.rotation)||t.rotate(a.rotation),a.color&&(t.fillStyle=a.color),a.textAlign&&(t.textAlign=a.textAlign),a.textBaseline&&(t.textBaseline=a.textBaseline),o=0;o<l.length;++o)n=l[o],a.backdrop&&function(t,e){let i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}(t,a.backdrop),h&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),rC(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(n,i,r,a.maxWidth)),t.fillText(n,i,r,a.maxWidth),function(t,e,i,r,s){if(s.strikethrough||s.underline){let a=t.measureText(r),o=e-a.actualBoundingBoxLeft,n=e+a.actualBoundingBoxRight,l=i-a.actualBoundingBoxAscent,h=i+a.actualBoundingBoxDescent,c=s.strikethrough?(l+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,c),t.lineTo(n,c),t.stroke()}}(t,i,r,n,a),r+=Number(s.lineHeight);t.restore()}function sG(t,e){let{x:i,y:r,w:s,h:a,radius:o}=e;t.arc(i+o.topLeft,r+o.topLeft,o.topLeft,1.5*rZ,rZ,!0),t.lineTo(i,r+a-o.bottomLeft),t.arc(i+o.bottomLeft,r+a-o.bottomLeft,o.bottomLeft,rZ,r5,!0),t.lineTo(i+s-o.bottomRight,r+a),t.arc(i+s-o.bottomRight,r+a-o.bottomRight,o.bottomRight,r5,0,!0),t.lineTo(i+s,r+o.topRight),t.arc(i+s-o.topRight,r+o.topRight,o.topRight,0,-r5,!0),t.lineTo(i+o.topLeft,r)}let sZ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,sQ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,s0=t=>+t||0;function s1(t,e){let i={},r=rD(e),s=r?Object.keys(e):e,a=rD(t)?r?i=>rL(t[i],t[e[i]]):e=>t[e]:()=>t;for(let t of s)i[t]=s0(a(t));return i}function s2(t){return s1(t,{top:"y",right:"x",bottom:"y",left:"x"})}function s5(t){return s1(t,["topLeft","topRight","bottomLeft","bottomRight"])}function s3(t){let e=s2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function s4(t,e){t=t||{},e=e||sj.font;let i=rL(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let r=rL(t.style,e.style);r&&!(""+r).match(sQ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let s={family:rL(t.family,e.family),lineHeight:function(t,e){let i=(""+t).match(sZ);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}(rL(t.lineHeight,e.lineHeight),i),size:i,style:r,weight:rL(t.weight,e.weight),string:""};return s.string=!s||rC(s.size)||rC(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family,s}function s6(t,e,i,r){let s,a,o,n=!0;for(s=0,a=t.length;s<a;++s)if(void 0!==(o=t[s])&&(void 0!==e&&"function"==typeof o&&(o=o(e),n=!1),void 0!==i&&rO(o)&&(o=o[i%o.length],n=!1),void 0!==o))return r&&!n&&(r.cacheable=!1),o}function s9(t,e){return Object.assign(Object.create(t),e)}function s8(t,e=[""],i,r,s=()=>t[0]){let a=i||t;return void 0===r&&(r=an("_fallback",t)),new Proxy({[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:r,_getTarget:s,override:i=>s8([i,...t],e,a,r)},{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,r)=>ar(i,r,()=>(function(t,e,i,r){let s;for(let a of e)if(void 0!==(s=an(ae(a,t),i)))return ai(t,s)?aa(i,r,t,s):s})(r,e,t,i)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>al(t).includes(e),ownKeys:t=>al(t),set(t,e,i){let r=t._storage||(t._storage=s());return t[e]=r[e]=i,delete t._keys,!0}})}function s7(t,e,i,r){return new Proxy({_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:at(t,r),setContext:e=>s7(t,e,i,r),override:s=>s7(t.override(s),e,i,r)},{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>ar(t,e,()=>(function(t,e,i){let{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=t,n=r[e];return rJ(n)&&o.isScriptable(e)&&(n=function(t,e,i,r){let{_proxy:s,_context:a,_subProxy:o,_stack:n}=i;if(n.has(t))throw Error("Recursion detected: "+Array.from(n).join("->")+"->"+t);n.add(t);let l=e(a,o||r);return n.delete(t),ai(t,l)&&(l=aa(s._scopes,s,t,l)),l}(e,n,t,i)),rO(n)&&n.length&&(n=function(t,e,i,r){let{_proxy:s,_context:a,_subProxy:o,_descriptors:n}=i;if(void 0!==a.index&&r(t))return e[a.index%e.length];if(rD(e[0])){let i=e,r=s._scopes.filter(t=>t!==i);for(let l of(e=[],i)){let i=aa(r,s,t,l);e.push(s7(i,a,o&&o[t],n))}}return e}(e,n,t,o.isIndexable)),ai(e,n)&&(n=s7(n,s,a&&a[e],o)),n})(t,e,i)),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,r)=>(t[i]=r,delete e[i],!0)})}function at(t,e={scriptable:!0,indexable:!0}){let{_scriptable:i=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:i,indexable:r,isScriptable:rJ(i)?i:()=>i,isIndexable:rJ(r)?r:()=>r}}let ae=(t,e)=>t?t+rY(e):e,ai=(t,e)=>rD(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function ar(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];let r=i();return t[e]=r,r}let as=(t,e)=>!0===t?e:"string"==typeof t?rX(e,t):void 0;function aa(t,e,i,r){var s;let a=e._rootScopes,o=(s=e._fallback,rJ(s)?s(i,r):s),n=[...t,...a],l=new Set;l.add(r);let h=ao(l,n,i,o||i,r);return null!==h&&(void 0===o||o===i||null!==(h=ao(l,n,o,h,r)))&&s8(Array.from(l),[""],a,o,()=>{var t,s,a;let o,n;return t=e,s=i,a=r,s in(o=t._getTarget())||(o[s]={}),rO(n=o[s])&&rD(a)?a:n||{}})}function ao(t,e,i,r,s){for(;i;)i=function(t,e,i,r,s){for(let o of e){let e=as(i,o);if(e){var a;t.add(e);let o=(a=e._fallback,rJ(a)?a(i,s):a);if(void 0!==o&&o!==i&&o!==r)return o}else if(!1===e&&void 0!==r&&i!==r)return null}return!1}(t,e,i,r,s);return i}function an(t,e){for(let i of e){if(!i)continue;let e=i[t];if(void 0!==e)return e}}function al(t){let e=t._keys;return e||(e=t._keys=function(t){let e=new Set;for(let i of t)for(let t of Object.keys(i).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function ah(t,e,i,r){let s,a,o,{iScale:n}=t,{key:l="r"}=this._parsing,h=Array(r);for(s=0;s<r;++s)o=e[a=s+i],h[s]={r:n.parse(rX(o,l),a)};return h}let ac=Number.EPSILON||1e-14,ad=(t,e)=>e<t.length&&!t[e].skip&&t[e],au=t=>"x"===t?"y":"x";function af(t,e,i){return Math.max(Math.min(t,i),e)}function ap(){return"u">typeof window&&"u">typeof document}function ag(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function am(t,e,i){let r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[i])):r=t,r}let a_=t=>t.ownerDocument.defaultView.getComputedStyle(t,null),ay=["top","right","bottom","left"];function ab(t,e,i){let r={};i=i?"-"+i:"";for(let s=0;s<4;s++){let a=ay[s];r[a]=parseFloat(t[e+"-"+a+i])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function av(t,e){if("native"in t)return t;let{canvas:i,currentDevicePixelRatio:r}=e,s=a_(i),a="border-box"===s.boxSizing,o=ab(s,"padding"),n=ab(s,"border","width"),{x:l,y:h,box:c}=function(t,e){let i,r,s,a=t.touches,o=a&&a.length?a[0]:t,{offsetX:n,offsetY:l}=o,h=!1;if(s=t.target,(n>0||l>0)&&(!s||!s.shadowRoot))i=n,r=l;else{let t=e.getBoundingClientRect();i=o.clientX-t.left,r=o.clientY-t.top,h=!0}return{x:i,y:r,box:h}}(t,i),d=o.left+(c&&n.left),u=o.top+(c&&n.top),{width:f,height:p}=e;return a&&(f-=o.width+n.width,p-=o.height+n.height),{x:Math.round((l-d)/f*i.width/r),y:Math.round((h-u)/p*i.height/r)}}let ax=t=>Math.round(10*t)/10;function aw(t,e,i){let r=e||1,s=ax(t.height*r),a=ax(t.width*r);t.height=ax(t.height),t.width=ax(t.width);let o=t.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==r||o.height!==s||o.width!==a)&&(t.currentDevicePixelRatio=r,o.height=s,o.width=a,t.ctx.setTransform(r,0,0,r,0,0),!0)}let aM=function(){let t=!1;try{let e={get passive(){return t=!0,!1}};ap()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function ak(t,e){let i=a_(t).getPropertyValue(e),r=i&&i.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function aS(t,e,i,r){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function a$(t,e,i,r){return{x:t.x+i*(e.x-t.x),y:"middle"===r?i<.5?t.y:e.y:"after"===r?i<1?t.y:e.y:i>0?e.y:t.y}}function aA(t,e,i,r){let s={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},o=aS(t,s,i),n=aS(s,a,i),l=aS(a,e,i),h=aS(o,n,i),c=aS(n,l,i);return aS(h,c,i)}function aP(t){return"angle"===t?{between:sl,compare:so,normalize:sn}:{between:sc,compare:(t,e)=>t-e,normalize:t=>t}}function aE({start:t,end:e,count:i,loop:r,style:s}){return{start:t%i,end:e%i,loop:r&&(e-t+1)%i==0,style:s}}function aC(t,e,i){let r,s,a;if(!i)return[t];let{property:o,start:n,end:l}=i,h=e.length,{compare:c,between:d,normalize:u}=aP(o),{start:f,end:p,loop:g,style:m}=function(t,e,i){let r,{property:s,start:a,end:o}=i,{between:n,normalize:l}=aP(s),h=e.length,{start:c,end:d,loop:u}=t;if(u){for(c+=h,d+=h,r=0;r<h&&n(l(e[c%h][s]),a,o);++r)c--,d--;c%=h,d%=h}return d<c&&(d+=h),{start:c,end:d,loop:u,style:t.style}}(t,e,i),_=[],y=!1,b=null,v=()=>y||d(n,a,r)&&0!==c(n,a),x=()=>!y||0===c(l,r)||d(l,a,r);for(let t=f,i=f;t<=p;++t)(s=e[t%h]).skip||(r=u(s[o]))!==a&&(y=d(r,n,l),null===b&&v()&&(b=0===c(r,n)?t:i),null!==b&&x()&&(_.push(aE({start:b,end:t,loop:g,count:h,style:m})),b=null),i=t,a=r);return null!==b&&_.push(aE({start:b,end:p,loop:g,count:h,style:m})),_}function aO(t,e){let i=[],r=t.segments;for(let s=0;s<r.length;s++){let a=aC(r[s],t.points,e);a.length&&i.push(...a)}return i}function aD(t,e,i,r){return r&&r.setContext&&i?function(t,e,i,r){let s=t._chart.getContext(),a=aT(t.options),{_datasetIndex:o,options:{spanGaps:n}}=t,l=i.length,h=[],c=a,d=e[0].start,u=d;function f(t,e,r,s){let a=n?-1:1;if(t!==e){for(t+=l;i[t%l].skip;)t-=a;for(;i[e%l].skip;)e+=a;t%l!=e%l&&(h.push({start:t%l,end:e%l,loop:r,style:s}),c=s,d=e%l)}}for(let t of e){let e,a=i[(d=n?d:t.start)%l];for(u=d+1;u<=t.end;u++){let n=i[u%l];(function(t,e){if(!e)return!1;let i=[],r=function(t,e){return sA(e)?(i.includes(e)||i.push(e),i.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)})(e=aT(r.setContext(s9(s,{type:"segment",p0:a,p1:n,p0DataIndex:(u-1)%l,p1DataIndex:u%l,datasetIndex:o}))),c)&&f(d,u-1,t.loop,c),a=n,c=e}d<u-1&&f(d,u-1,t.loop,c)}return h}(t,e,i,r):e}function aT(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function az(t,e,i){return t.options.clip?t[i]:e[i]}function aL(t,e){let i=e._clip;if(i.disabled)return!1;let r=function(t,e){let{xScale:i,yScale:r}=t;return i&&r?{left:az(i,e,"left"),right:az(i,e,"right"),top:az(r,e,"top"),bottom:az(r,e,"bottom")}:e}(e,t.chartArea);return{left:!1===i.left?0:r.left-(!0===i.left?0:i.left),right:!1===i.right?t.width:r.right+(!0===i.right?0:i.right),top:!1===i.top?0:r.top-(!0===i.top?0:i.top),bottom:!1===i.bottom?t.height:r.bottom+(!0===i.bottom?0:i.bottom)}}var aF=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){let s=e.listeners[r],a=e.duration;s.forEach(r=>r({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(i-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=s_.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{let s;if(!i.running||!i.items.length)return;let a=i.items,o=a.length-1,n=!1;for(;o>=0;--o)(s=a[o])._active?(s._total>i.duration&&(i.duration=s._total),s.tick(t),n=!0):(a[o]=a[a.length-1],a.pop());n&&(r.draw(),this._notify(r,i,t,"progress")),a.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=a.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!!e&&!!e.running&&!!e.items.length}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};let aR="transparent",aI={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){let r=sP(t||aR),s=r.valid&&sP(e||aR);return s&&s.valid?s.mix(r,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class aj{constructor(t,e,i,r){let s=e[i];r=s6([t.to,r,s,t.from]);let a=s6([t.from,s,r]);this._active=!0,this._fn=t.fn||aI[t.type||typeof a],this._easing=s$[t.easing]||s$.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,a=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=s6([t.to,e,r,t.from]),this._from=s6([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e,i=t-this._start,r=this._duration,s=this._prop,a=this._from,o=this._loop,n=this._to;if(this._active=a!==n&&(o||i<r),!this._active){this._target[s]=n,this._notify(!0);return}if(i<0){this._target[s]=a;return}e=i/r%2,e=o&&e>1?2-e:e,e=this._easing(Math.min(1,Math.max(0,e))),this._target[s]=this._fn(a,n,e)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}class aW{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!rD(t))return;let e=Object.keys(sj.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{let s=t[r];if(!rD(s))return;let a={};for(let t of e)a[t]=s[t];(rO(s.properties)&&s.properties||[r]).forEach(t=>{t!==r&&i.has(t)||i.set(t,a)})})}_animateOptions(t,e){let i=e.options,r=function(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}(t,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&(function(t,e){let i=[],r=Object.keys(e);for(let e=0;e<r.length;e++){let s=t[r[e]];s&&s.active()&&i.push(s.wait())}return Promise.all(i)})(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){let i,r=this._properties,s=[],a=t.$animations||(t.$animations={}),o=Object.keys(e),n=Date.now();for(i=o.length-1;i>=0;--i){let l=o[i];if("$"===l.charAt(0))continue;if("options"===l){s.push(...this._animateOptions(t,e));continue}let h=e[l],c=a[l],d=r.get(l);if(c)if(d&&c.active()){c.update(d,h,n);continue}else c.cancel();if(!d||!d.duration){t[l]=h;continue}a[l]=c=new aj(d,t,l,h),s.push(c)}return s}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);let i=this._createAnimations(t,e);if(i.length)return aF.add(this._chart,i),!0}}function aN(t,e){let i=t&&t.options||{},r=i.reverse,s=void 0===i.min?e:0,a=void 0===i.max?e:0;return{start:r?a:s,end:r?s:a}}function aV(t,e){let i,r,s=[],a=t._getSortedDatasetMetas(e);for(i=0,r=a.length;i<r;++i)s.push(a[i].index);return s}function aH(t,e,i,r={}){let s,a,o,n,l=t.keys,h="single"===r.mode;if(null===e)return;let c=!1;for(s=0,a=l.length;s<a;++s){if((o=+l[s])===i){if(c=!0,r.all)continue;break}rT(n=t.values[o])&&(h||0===e||r9(e)===r9(n))&&(e+=n)}return c||r.all?e:0}function aB(t,e){let i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function aU(t,e,i,r){for(let s of e.getMatchingVisibleMetas(r).reverse()){let e=t[s.index];if(i&&e>0||!i&&e<0)return s.index}return null}function aq(t,e){let i,{chart:r,_cachedMeta:s}=t,a=r._stacks||(r._stacks={}),{iScale:o,vScale:n,index:l}=s,h=o.axis,c=n.axis,d=`${o.id}.${n.id}.${s.stack||s.type}`,u=e.length;for(let t=0;t<u;++t){let r=e[t],{[h]:o,[c]:u}=r;(i=(r._stacks||(r._stacks={}))[c]=function(t,e,i){let r=t[e]||(t[e]={});return r[i]||(r[i]={})}(a,d,o))[l]=u,i._top=aU(i,n,!0,s.type),i._bottom=aU(i,n,!1,s.type),(i._visualValues||(i._visualValues={}))[l]=u}}function aX(t,e){let i=t.scales;return Object.keys(i).filter(t=>i[t].axis===e).shift()}function aY(t,e){let i=t.controller.index,r=t.vScale&&t.vScale.axis;if(r)for(let s of e=e||t._parsed){let t=s._stacks;if(!t||void 0===t[r]||void 0===t[r][i])return;delete t[r][i],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[i]&&delete t[r]._visualValues[i]}}let aK=t=>"reset"===t||"none"===t,aJ=(t,e)=>e?t:Object.assign({},t);class aG{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=aB(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&aY(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(t,e,i,r)=>"x"===t?e:"r"===t?r:i,s=e.xAxisID=rL(i.xAxisID,aX(t,"x")),a=e.yAxisID=rL(i.yAxisID,aX(t,"y")),o=e.rAxisID=rL(i.rAxisID,aX(t,"r")),n=e.indexAxis,l=e.iAxisID=r(n,s,a,o),h=e.vAxisID=r(n,a,s,o);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&sg(this._data,this),t._stacked&&aY(t)}_dataCheck(){let t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(rD(e)){let t=this._cachedMeta;this._data=function(t,e){let i,r,s,{iScale:a,vScale:o}=e,n="x"===a.axis?"x":"y",l="x"===o.axis?"x":"y",h=Object.keys(t),c=Array(h.length);for(i=0,r=h.length;i<r;++i)s=h[i],c[i]={[n]:s,[l]:t[s]};return c}(e,t)}else if(i!==e){if(i){sg(i,this);let t=this._cachedMeta;aY(t),t._parsed=[]}e&&Object.isExtensible(e)&&(e._chartjs?e._chartjs.listeners.push(this):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),sp.forEach(t=>{let i="_onData"+rY(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...t){let s=r.apply(this,t);return e._chartjs.listeners.forEach(e=>{"function"==typeof e[i]&&e[i](...t)}),s}})}))),this._syncList=[],this._data=e}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let e=this._cachedMeta,i=this.getDataset(),r=!1;this._dataCheck();let s=e._stacked;e._stacked=aB(e.vScale,e),e.stack!==i.stack&&(r=!0,aY(e),e.stack=i.stack),this._resyncElements(t),(r||s!==e._stacked)&&(aq(this,e._parsed),e._stacked=aB(e.vScale,e))}configure(){let t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){let i,r,s,{_cachedMeta:a,_data:o}=this,{iScale:n,_stacked:l}=a,h=n.axis,c=0===t&&e===o.length||a._sorted,d=t>0&&a._parsed[t-1];if(!1===this._parsing)a._parsed=o,a._sorted=!0,s=o;else{s=rO(o[t])?this.parseArrayData(a,o,t,e):rD(o[t])?this.parseObjectData(a,o,t,e):this.parsePrimitiveData(a,o,t,e);let n=()=>null===r[h]||d&&r[h]<d[h];for(i=0;i<e;++i)a._parsed[i+t]=r=s[i],c&&(n()&&(c=!1),d=r);a._sorted=c}l&&aq(this,s)}parsePrimitiveData(t,e,i,r){let s,a,{iScale:o,vScale:n}=t,l=o.axis,h=n.axis,c=o.getLabels(),d=o===n,u=Array(r);for(s=0;s<r;++s)a=s+i,u[s]={[l]:d||o.parse(c[a],a),[h]:n.parse(e[a],a)};return u}parseArrayData(t,e,i,r){let s,a,o,{xScale:n,yScale:l}=t,h=Array(r);for(s=0;s<r;++s)o=e[a=s+i],h[s]={x:n.parse(o[0],a),y:l.parse(o[1],a)};return h}parseObjectData(t,e,i,r){let s,a,o,{xScale:n,yScale:l}=t,{xAxisKey:h="x",yAxisKey:c="y"}=this._parsing,d=Array(r);for(s=0;s<r;++s)o=e[a=s+i],d[s]={x:n.parse(rX(o,h),a),y:l.parse(rX(o,c),a)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){let r=this.chart,s=this._cachedMeta,a=e[t.axis];return aH({keys:aV(r,!0),values:e._stacks[t.axis]._visualValues},a,s.index,{mode:i})}updateRangeFromParsed(t,e,i,r){let s=i[e.axis],a=null===s?NaN:s,o=r&&i._stacks[e.axis];r&&o&&(r.values=o,a=aH(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){let i,r,s,a=this._cachedMeta,o=a._parsed,n=a._sorted&&t===a.iScale,l=o.length,h=this._getOtherScale(t),c=(s=this.chart,e&&!a.hidden&&a._stacked&&{keys:aV(s,!0),values:null}),d={min:1/0,max:-1/0},{min:u,max:f}=function(t){let{min:e,max:i,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:-1/0,max:s?i:1/0}}(h);function p(){let e=(r=o[i])[h.axis];return!rT(r[t.axis])||u>e||f<e}for(i=0;i<l&&(p()||(this.updateRangeFromParsed(d,t,r,c),!n));++i);if(n){for(i=l-1;i>=0;--i)if(!p()){this.updateRangeFromParsed(d,t,r,c);break}}return d}getAllParsedValues(t){let e,i,r,s=this._cachedMeta._parsed,a=[];for(e=0,i=s.length;e<i;++e)rT(r=s[e][t.axis])&&a.push(r);return a}getMaxOverflow(){return!1}getLabelAndValue(t){let e=this._cachedMeta,i=e.iScale,r=e.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){var e;let i,r,s,a,o=this._cachedMeta;this.update(t||"default"),rD(e=rL(this.options.clip,function(t,e,i){if(!1===i)return!1;let r=aN(t,i),s=aN(e,i);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}(o.xScale,o.yScale,this.getMaxOverflow())))?(i=e.top,r=e.right,s=e.bottom,a=e.left):i=r=s=a=e,o._clip={top:i,right:r,bottom:s,left:a,disabled:!1===e}}update(t){}draw(){let t,e=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],a=i.chartArea,o=[],n=this._drawStart||0,l=this._drawCount||s.length-n,h=this.options.drawActiveElementsOnTop;for(r.dataset&&r.dataset.draw(e,a,n,l),t=n;t<n+l;++t){let i=s[t];i.hidden||(i.active&&h?o.push(i):i.draw(e,a))}for(t=0;t<o.length;++t)o[t].draw(e,a)}getStyle(t,e){let i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){var r;let s,a=this.getDataset();if(t>=0&&t<this._cachedMeta.data.length){let e=this._cachedMeta.data[t];(s=e.$context||(e.$context=s9(this.getContext(),{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"}))).parsed=this.getParsed(t),s.raw=a.data[t],s.index=s.dataIndex=t}else(s=this.$context||(this.$context=s9(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:r=this.index,index:r,mode:"default",type:"dataset"}))).dataset=a,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){let r="active"===e,s=this._cachedDataOpts,a=t+"-"+e,o=s[a],n=this.enableOptionSharing&&rK(i);if(o)return aJ(o,n);let l=this.chart.config,h=l.datasetElementScopeKeys(this._type,t),c=r?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),h),u=Object.keys(sj.elements[t]),f=()=>this.getContext(i,r,e),p=l.resolveNamedOptions(d,u,f,c);return p.$shared&&(p.$shared=n,s[a]=Object.freeze(aJ(p,n))),p}_resolveAnimations(t,e,i){let r,s=this.chart,a=this._cachedDataOpts,o=`animation-${e}`,n=a[o];if(n)return n;if(!1!==s.options.animation){let s=this.chart.config,a=s.datasetAnimationScopeKeys(this._type,e),o=s.getOptionScopes(this.getDataset(),a);r=s.createResolver(o,this.getContext(t,i,e))}let l=new aW(s,r&&r.animations);return r&&r._cacheable&&(a[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||aK(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){let i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,s=this.getSharedOptions(i),a=this.includeOptions(e,s)||s!==r;return this.updateSharedOptions(s,e,i),{sharedOptions:s,includeOptions:a}}updateElement(t,e,i,r){aK(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!aK(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;let s=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let e=this._data,i=this._cachedMeta.data;for(let[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];let r=i.length,s=e.length,a=Math.min(s,r);a&&this.parse(0,a),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,e,i=!0){let r,s=this._cachedMeta,a=s.data,o=t+e,n=t=>{for(t.length+=e,r=t.length-1;r>=o;r--)t[r]=t[r-e]};for(n(a),r=t;r<o;++r)a[r]=new this.dataElementType;this._parsing&&n(s._parsed),this.parse(t,e),i&&this.updateElements(a,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){let i=this._cachedMeta;if(this._parsing){let r=i._parsed.splice(t,e);i._stacked&&aY(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function aZ(t,e,i,r){if(rO(t)){let s,a,o,n,l,h;s=i.parse(t[0],r),o=Math.min(s,a=i.parse(t[1],r)),n=Math.max(s,a),l=o,h=n,Math.abs(o)>Math.abs(n)&&(l=n,h=o),e[i.axis]=h,e._custom={barStart:l,barEnd:h,start:s,end:a,min:o,max:n}}else e[i.axis]=i.parse(t,r);return e}function aQ(t,e,i,r){let s,a,o,n,l=t.iScale,h=t.vScale,c=l.getLabels(),d=l===h,u=[];for(s=i,a=i+r;s<a;++s)n=e[s],(o={})[l.axis]=d||l.parse(c[s],s),u.push(aZ(n,o,h,s));return u}function a0(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function a1(t,e,i,r){var s,a,o;return r?a2((s=t,a=e,o=i,t=s===a?o:s===o?a:s),i,e):a2(t,e,i)}function a2(t,e,i){return"start"===t?e:"end"===t?i:t}class a5 extends aG{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,r){let s=super.parsePrimitiveData(t,e,i,r);for(let t=0;t<s.length;t++)s[t]._custom=this.resolveDataElementOptions(t+i).radius;return s}parseArrayData(t,e,i,r){let s=super.parseArrayData(t,e,i,r);for(let t=0;t<s.length;t++){let r=e[i+t];s[t]._custom=rL(r[2],this.resolveDataElementOptions(t+i).radius)}return s}parseObjectData(t,e,i,r){let s=super.parseObjectData(t,e,i,r);for(let t=0;t<s.length;t++){let r=e[i+t];s[t]._custom=rL(r&&r.r&&+r.r,this.resolveDataElementOptions(t+i).radius)}return s}getMaxOverflow(){let t=this._cachedMeta.data,e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=e,a=this.getParsed(t),o=r.getLabelForValue(a.x),n=s.getLabelForValue(a.y),l=a._custom;return{label:i[t]||"",value:"("+o+", "+n+(l?", "+l:"")+")"}}update(t){let e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,r){let s="reset"===r,{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:n,includeOptions:l}=this._getSharedOptions(e,r),h=a.axis,c=o.axis;for(let d=e;d<e+i;d++){let e=t[d],i=!s&&this.getParsed(d),u={},f=u[h]=s?a.getPixelForDecimal(.5):a.getPixelForValue(i[h]),p=u[c]=s?o.getBasePixel():o.getPixelForValue(i[c]);u.skip=isNaN(f)||isNaN(p),l&&(u.options=n||this.resolveDataElementOptions(d,e.active?"active":r),s&&(u.options.radius=0)),this.updateElement(e,d,u,r)}}resolveDataElementOptions(t,e){let i=this.getParsed(t),r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));let s=r.radius;return"active"!==e&&(r.radius=0),r.radius+=rL(i&&i._custom,s),r}}class a3 extends aG{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data,{labels:{pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:o}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((e,n)=>{let l=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:l.backgroundColor,fontColor:s,hidden:!t.getDataVisibility(n),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:r,pointStyle:i,borderRadius:a&&(o||l.borderRadius),index:n}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){let i=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=i;else{let s,a,o=t=>+i[t];if(rD(i[t])){let{key:t="value"}=this._parsing;o=e=>+rX(i[e],t)}for(s=t,a=t+e;s<a;++s)r._parsed[s]=o(s)}}_getRotation(){return si(this.options.rotation-90)}_getCircumference(){return si(this.options.circumference)}_getRotationExtents(){let t=rQ,e=-rQ;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),a=r._getCircumference();t=Math.min(t,s),e=Math.max(e,s+a)}return{rotation:t,circumference:e-t}}update(t){let e,{chartArea:i}=this.chart,r=this._cachedMeta,s=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-a)/2,0),n=Math.min((e=this.options.cutout,"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:e/o),1),l=this._getRingWeight(this.index),{circumference:h,rotation:c}=this._getRotationExtents(),{ratioX:d,ratioY:u,offsetX:f,offsetY:p}=function(t,e,i){let r=1,s=1,a=0,o=0;if(e<rQ){let n=t+e,l=Math.cos(t),h=Math.sin(t),c=Math.cos(n),d=Math.sin(n),u=(e,r,s)=>sl(e,t,n,!0)?1:Math.max(r,r*i,s,s*i),f=(e,r,s)=>sl(e,t,n,!0)?-1:Math.min(r,r*i,s,s*i),p=u(0,l,c),g=u(r5,h,d),m=f(rZ,l,c),_=f(rZ+r5,h,d);r=(p-m)/2,s=(g-_)/2,a=-(p+m)/2,o=-(g+_)/2}return{ratioX:r,ratioY:s,offsetX:a,offsetY:o}}(c,h,n),g=Math.max(Math.min((i.width-a)/d,(i.height-a)/u)/2,0),m=rF(this.options.radius,g),_=Math.max(m*n,0),y=(m-_)/this._getVisibleDatasetWeightTotal();this.offsetX=f*m,this.offsetY=p*m,r.total=this.calculateTotal(),this.outerRadius=m-y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-y*l,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){let i=this.options,r=this._cachedMeta,s=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*s/rQ)}updateElements(t,e,i,r){let s,a="reset"===r,o=this.chart,n=o.chartArea,l=o.options.animation,h=(n.left+n.right)/2,c=(n.top+n.bottom)/2,d=a&&l.animateScale,u=d?0:this.innerRadius,f=d?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(e,r),m=this._getRotation();for(s=0;s<e;++s)m+=this._circumference(s,a);for(s=e;s<e+i;++s){let e=this._circumference(s,a),i=t[s],o={x:h+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:f,innerRadius:u};g&&(o.options=p||this.resolveDataElementOptions(s,i.active?"active":r)),m+=e,this.updateElement(i,s,o,r)}}calculateTotal(){let t,e=this._cachedMeta,i=e.data,r=0;for(t=0;t<i.length;t++){let s=e._parsed[t];null!==s&&!isNaN(s)&&this.chart.getDataVisibility(t)&&!i[t].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){let e=this._cachedMeta.total;return e>0&&!isNaN(t)?Math.abs(t)/e*rQ:0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=sT(e._parsed[t],i.options.locale);return{label:r[t]||"",value:s}}getMaxBorderWidth(t){let e,i,r,s,a,o=0,n=this.chart;if(!t){for(e=0,i=n.data.datasets.length;e<i;++e)if(n.isDatasetVisible(e)){t=(r=n.getDatasetMeta(e)).data,s=r.controller;break}}if(!t)return 0;for(e=0,i=t.length;e<i;++e)"inner"!==(a=s.resolveDataElementOptions(e)).borderAlign&&(o=Math.max(o,a.borderWidth||0,a.hoverBorderWidth||0));return o}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){let t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(rL(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class a4 extends aG{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((e,s)=>{let a=t.getDatasetMeta(0).controller.getStyle(s);return{text:e,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=sT(e._parsed[t].r,i.options.locale);return{label:r[t]||"",value:s}}parseObjectData(t,e,i,r){return ah.bind(this)(t,e,i,r)}update(t){let e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){let t=this._cachedMeta,e={min:1/0,max:-1/0};return t.data.forEach((t,i)=>{let r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){let t=this.chart,e=t.chartArea,i=t.options,r=Math.max(Math.min(e.right-e.left,e.bottom-e.top)/2,0),s=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-s)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,r){let s,a="reset"===r,o=this.chart,n=o.options.animation,l=this._cachedMeta.rScale,h=l.xCenter,c=l.yCenter,d=l.getIndexAngle(0)-.5*rZ,u=d,f=360/this.countVisibleElements();for(s=0;s<e;++s)u+=this._computeAngle(s,r,f);for(s=e;s<e+i;s++){let e=t[s],i=u,p=u+this._computeAngle(s,r,f),g=o.getDataVisibility(s)?l.getDistanceFromCenterForValue(this.getParsed(s).r):0;u=p,a&&(n.animateScale&&(g=0),n.animateRotate&&(i=p=d));let m={x:h,y:c,innerRadius:0,outerRadius:g,startAngle:i,endAngle:p,options:this.resolveDataElementOptions(s,e.active?"active":r)};this.updateElement(e,s,m,r)}}countVisibleElements(){let t=this._cachedMeta,e=0;return t.data.forEach((t,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?si(this.resolveDataElementOptions(t,e).angle||i):0}}class a6 extends aG{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return ah.bind(this)(t,e,i,r)}update(t){let e=this._cachedMeta,i=e.dataset,r=e.data||[],s=e.iScale.getLabels();if(i.points=r,"resize"!==t){let e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);let a={_loop:!0,_fullLoop:s.length===r.length,options:e};this.updateElement(i,void 0,a,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,i,r){let s=this._cachedMeta.rScale,a="reset"===r;for(let o=e;o<e+i;o++){let e=t[o],i=this.resolveDataElementOptions(o,e.active?"active":r),n=s.getPointPositionForValue(o,this.getParsed(o).r),l=a?s.xCenter:n.x,h=a?s.yCenter:n.y,c={x:l,y:h,angle:n.angle,skip:isNaN(l)||isNaN(h),options:i};this.updateElement(e,o,c,r)}}}class a9 extends aG{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=e,a=this.getParsed(t),o=r.getLabelForValue(a.x),n=s.getLabelForValue(a.y);return{label:i[t]||"",value:"("+o+", "+n+")"}}update(t){let e=this._cachedMeta,{data:i=[]}=e,r=this.chart._animationsDisabled,{start:s,count:a}=sx(e,i,r);if(this._drawStart=s,this._drawCount=a,sw(e)&&(s=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:s,_dataset:a}=e;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!a._decimated,s.points=i;let o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:o},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,s,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,r){let s="reset"===r,{iScale:a,vScale:o,_stacked:n,_dataset:l}=this._cachedMeta,h=this.resolveDataElementOptions(e,r),c=this.getSharedOptions(h),d=this.includeOptions(r,c),u=a.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=st(p)?p:1/0,_=this.chart._animationsDisabled||s||"none"===r,y=e>0&&this.getParsed(e-1);for(let h=e;h<e+i;++h){let e=t[h],i=this.getParsed(h),p=_?e:{},b=rC(i[f]),v=p[u]=a.getPixelForValue(i[u],h),x=p[f]=s||b?o.getBasePixel():o.getPixelForValue(n?this.applyStack(o,i,n):i[f],h);p.skip=isNaN(v)||isNaN(x)||b,p.stop=h>0&&Math.abs(i[u]-y[u])>m,g&&(p.parsed=i,p.raw=l.data[h]),d&&(p.options=c||this.resolveDataElementOptions(h,e.active?"active":r)),_||this.updateElement(e,h,p,r),y=i}this.updateSharedOptions(c,r,h)}getMaxOverflow(){let t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}let i=t.dataset,r=i.options&&i.options.borderWidth||0;return e.length?Math.max(r,e[0].size(this.resolveDataElementOptions(0)),e[e.length-1].size(this.resolveDataElementOptions(e.length-1)))/2:r}}function a8(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}class a7{static override(t){Object.assign(a7.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return a8()}parse(){return a8()}format(){return a8()}add(){return a8()}diff(){return a8()}startOf(){return a8()}endOf(){return a8()}}function ot(t,e,i,r,s){let a=t.getSortedVisibleDatasetMetas(),o=i[e];for(let t=0,i=a.length;t<i;++t){let{index:i,data:n}=a[t],{lo:l,hi:h}=function(t,e,i,r){let{controller:s,data:a,_sorted:o}=t,n=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(n&&e===n.axis&&"r"!==e&&o&&a.length){let o=n._reversePixels?sf:su;if(r){if(s._sharedOptions){let t=a[0],r="function"==typeof t.getRange&&t.getRange(e);if(r){let t=o(a,e,i-r),s=o(a,e,i+r);return{lo:t.lo,hi:s.hi}}}}else{let r=o(a,e,i);if(l){let{vScale:e}=s._cachedMeta,{_parsed:i}=t,a=i.slice(0,r.lo+1).reverse().findIndex(t=>!rC(t[e.axis]));r.lo-=Math.max(0,a);let o=i.slice(r.hi).findIndex(t=>!rC(t[e.axis]));r.hi+=Math.max(0,o)}return r}}return{lo:0,hi:a.length-1}}(a[t],e,o,s);for(let t=l;t<=h;++t){let e=n[t];e.skip||r(e,i,t)}}}function oe(t,e,i,r,s){let a=[];return(s||t.isPointInArea(e))&&ot(t,i,e,function(i,o,n){(s||sU(i,t.chartArea,0))&&i.inRange(e.x,e.y,r)&&a.push({element:i,datasetIndex:o,index:n})},!0),a}function oi(t,e,i,r,s,a){let o,n,l,h,c,d;return a||t.isPointInArea(e)?"r"!==i||r?(o=[],n=-1!==i.indexOf("x"),l=-1!==i.indexOf("y"),h=function(t,e){return Math.sqrt(Math.pow(n?Math.abs(t.x-e.x):0,2)+Math.pow(l?Math.abs(t.y-e.y):0,2))},c=1/0,ot(t,i,e,function(i,n,l){let d=i.inRange(e.x,e.y,s);if(r&&!d)return;let u=i.getCenterPoint(s);if(!(a||t.isPointInArea(u))&&!d)return;let f=h(e,u);f<c?(o=[{element:i,datasetIndex:n,index:l}],c=f):f===c&&o.push({element:i,datasetIndex:n,index:l})}),o):(d=[],ot(t,i,e,function(t,i,r){let{startAngle:a,endAngle:o}=t.getProps(["startAngle","endAngle"],s),{angle:n}=ss(t,{x:e.x,y:e.y});sl(n,a,o)&&d.push({element:t,datasetIndex:i,index:r})}),d):[]}function or(t,e,i,r,s){let a=[],o="x"===i?"inXRange":"inYRange",n=!1;return(ot(t,i,e,(t,r,l)=>{t[o]&&t[o](e[i],s)&&(a.push({element:t,datasetIndex:r,index:l}),n=n||t.inRange(e.x,e.y,s))}),r&&!n)?[]:a}var os={modes:{index(t,e,i,r){let s=av(e,t),a=i.axis||"x",o=i.includeInvisible||!1,n=i.intersect?oe(t,s,a,r,o):oi(t,s,a,!1,r,o),l=[];return n.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{let e=n[0].index,i=t.data[e];i&&!i.skip&&l.push({element:i,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,i,r){let s=av(e,t),a=i.axis||"xy",o=i.includeInvisible||!1,n=i.intersect?oe(t,s,a,r,o):oi(t,s,a,!1,r,o);if(n.length>0){let e=n[0].datasetIndex,i=t.getDatasetMeta(e).data;n=[];for(let t=0;t<i.length;++t)n.push({element:i[t],datasetIndex:e,index:t})}return n},point(t,e,i,r){let s=av(e,t);return oe(t,s,i.axis||"xy",r,i.includeInvisible||!1)},nearest(t,e,i,r){let s=av(e,t),a=i.axis||"xy",o=i.includeInvisible||!1;return oi(t,s,a,i.intersect,r,o)},x(t,e,i,r){let s=av(e,t);return or(t,s,"x",i.intersect,r)},y(t,e,i,r){let s=av(e,t);return or(t,s,"y",i.intersect,r)}}};let oa=["left","top","right","bottom"];function oo(t,e){return t.filter(t=>t.pos===e)}function on(t,e){return t.filter(t=>-1===oa.indexOf(t.pos)&&t.box.axis===e)}function ol(t,e){return t.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function oh(t,e,i,r){return Math.max(t[i],e[i])+Math.max(t[r],e[r])}function oc(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function od(t,e,i,r){let s,a,o,n,l,h,c=[];for(s=0,a=t.length,l=0;s<a;++s){(n=(o=t[s]).box).update(o.width||e.w,o.height||e.h,function(t,e){let i=e.maxPadding;return function(t){let r={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{r[t]=Math.max(e[t],i[t])}),r}(t?["left","right"]:["top","bottom"])}(o.horizontal,e));let{same:a,other:d}=function(t,e,i,r){let{pos:s,box:a}=i,o=t.maxPadding;if(!rD(s)){i.size&&(t[s]-=i.size);let e=r[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?a.height:a.width),i.size=e.size/e.count,t[s]+=i.size}a.getPadding&&oc(o,a.getPadding());let n=Math.max(0,e.outerWidth-oh(o,t,"left","right")),l=Math.max(0,e.outerHeight-oh(o,t,"top","bottom")),h=n!==t.w,c=l!==t.h;return t.w=n,t.h=l,i.horizontal?{same:h,other:c}:{same:c,other:h}}(e,i,o,r);l|=a&&c.length,h=h||d,n.fullSize||c.push(o)}return l&&od(c,e,i,r)||h}function ou(t,e,i,r,s){t.top=i,t.left=e,t.right=e+r,t.bottom=i+s,t.width=r,t.height=s}function of(t,e,i,r){let s=i.padding,{x:a,y:o}=e;for(let n of t){let t=n.box,l=r[n.stack]||{count:1,placed:0,weight:1},h=n.stackWeight/l.weight||1;if(n.horizontal){let r=e.w*h,a=l.size||t.height;rK(l.start)&&(o=l.start),t.fullSize?ou(t,s.left,o,i.outerWidth-s.right-s.left,a):ou(t,e.left+l.placed,o,r,a),l.start=o,l.placed+=r,o=t.bottom}else{let r=e.h*h,o=l.size||t.width;rK(l.start)&&(a=l.start),t.fullSize?ou(t,a,s.top,o,i.outerHeight-s.bottom-s.top):ou(t,a,e.top+l.placed,o,r),l.start=a,l.placed+=r,a=t.right}}e.x=a,e.y=o}var op={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){let i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,r){let s,a,o,n,l,h,c,d;if(!t)return;let u=s3(t.options.layout.padding),f=Math.max(e-u.width,0),p=Math.max(i-u.height,0),g=(a=ol((s=function(t){let e,i,r,s,a,o,n=[];for(e=0,i=(t||[]).length;e<i;++e)r=t[e],({position:s,options:{stack:a,stackWeight:o=1}}=r),n.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return n}(t.boxes)).filter(t=>t.box.fullSize),!0),o=ol(oo(s,"left"),!0),n=ol(oo(s,"right")),l=ol(oo(s,"top"),!0),h=ol(oo(s,"bottom")),c=on(s,"x"),d=on(s,"y"),{fullSize:a,leftAndTop:o.concat(l),rightAndBottom:n.concat(d).concat(h).concat(c),chartArea:oo(s,"chartArea"),vertical:o.concat(n).concat(d),horizontal:l.concat(h).concat(c)}),m=g.vertical,_=g.horizontal;rI(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});let y=Object.freeze({outerWidth:e,outerHeight:i,padding:u,availableWidth:f,availableHeight:p,vBoxMaxWidth:f/2/(m.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1),hBoxMaxHeight:p/2}),b=Object.assign({},u);oc(b,s3(r));let v=Object.assign({maxPadding:b,w:f,h:p,x:u.left,y:u.top},u),x=function(t,e){let i,r,s,a=function(t){let e={};for(let i of t){let{stack:t,pos:r,stackWeight:s}=i;if(!t||!oa.includes(r))continue;let a=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}(t),{vBoxMaxWidth:o,hBoxMaxHeight:n}=e;for(i=0,r=t.length;i<r;++i){let{fullSize:r}=(s=t[i]).box,l=a[s.stack],h=l&&s.stackWeight/l.weight;s.horizontal?(s.width=h?h*o:r&&e.availableWidth,s.height=n):(s.width=o,s.height=h?h*n:r&&e.availableHeight)}return a}(m.concat(_),y);od(g.fullSize,v,y,x),od(m,v,y,x),od(_,v,y,x)&&od(m,v,y,x);let w=v.maxPadding;function M(t){let e=Math.max(w[t]-v[t],0);return v[t]+=e,e}v.y+=M("top"),v.x+=M("left"),M("right"),M("bottom"),of(g.leftAndTop,v,y,x),v.x+=v.w,v.y+=v.h,of(g.rightAndBottom,v,y,x),t.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},rI(g.chartArea,e=>{let i=e.box;Object.assign(i,t.chartArea),i.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class og{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class om extends og{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}let o_="$chartjs",oy={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ob=t=>null===t||""===t,ov=!!aM&&{passive:!0};function ox(t,e){for(let i of t)if(i===e||i.contains(e))return!0}function ow(t,e,i){let r=t.canvas,s=new MutationObserver(t=>{let e=!1;for(let i of t)e=(e=e||ox(i.addedNodes,r))&&!ox(i.removedNodes,r);e&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function oM(t,e,i){let r=t.canvas,s=new MutationObserver(t=>{let e=!1;for(let i of t)e=(e=e||ox(i.removedNodes,r))&&!ox(i.addedNodes,r);e&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}let ok=new Map,oS=0;function o$(){let t=window.devicePixelRatio;t!==oS&&(oS=t,ok.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function oA(t,e,i){let r=t.canvas,s=r&&ag(r);if(!s)return;let a=sy((t,e)=>{let r=s.clientWidth;i(t,e),r<s.clientWidth&&i()},window),o=new ResizeObserver(t=>{let e=t[0],i=e.contentRect.width,r=e.contentRect.height;(0!==i||0!==r)&&a(i,r)});return o.observe(s),ok.size||window.addEventListener("resize",o$),ok.set(t,a),o}function oP(t,e,i){i&&i.disconnect(),"resize"===e&&(ok.delete(t),ok.size||window.removeEventListener("resize",o$))}function oE(t,e,i){let r=t.canvas,s=sy(e=>{null!==t.ctx&&i(function(t,e){let i=oy[t.type]||t.type,{x:r,y:s}=av(t,e);return{type:i,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==s?s:null}}(e,t))},t);return r&&r.addEventListener(e,s,ov),s}class oC extends og{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(!function(t,e){let i=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[o_]={initial:{height:r,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",ob(s)){let e=ak(t,"width");void 0!==e&&(t.width=e)}if(ob(r))if(""===t.style.height)t.height=t.width/(e||2);else{let e=ak(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[o_])return!1;let i=e[o_].initial;["height","width"].forEach(t=>{let r=i[t];rC(r)?e.removeAttribute(t):e.setAttribute(t,r)});let r=i.style||{};return Object.keys(r).forEach(t=>{e.style[t]=r[t]}),e.width=e.width,delete e[o_],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let r=t.$proxies||(t.$proxies={}),s={attach:ow,detach:oM,resize:oA}[e]||oE;r[e]=s(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),r=i[e];r&&((({attach:oP,detach:oP,resize:oP})[e]||function(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,ov)})(t,e,r),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return function(t,e,i,r){let s=a_(t),a=ab(s,"margin"),o=am(s.maxWidth,t,"clientWidth")||r1,n=am(s.maxHeight,t,"clientHeight")||r1,l=function(t,e,i){let r,s;if(void 0===e||void 0===i){let a=t&&ag(t);if(a){let t=a.getBoundingClientRect(),o=a_(a),n=ab(o,"border","width"),l=ab(o,"padding");e=t.width-l.width-n.width,i=t.height-l.height-n.height,r=am(o.maxWidth,a,"clientWidth"),s=am(o.maxHeight,a,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:r||r1,maxHeight:s||r1}}(t,e,i),{width:h,height:c}=l;if("content-box"===s.boxSizing){let t=ab(s,"border","width"),e=ab(s,"padding");h-=e.width+t.width,c-=e.height+t.height}return h=Math.max(0,h-a.width),c=Math.max(0,r?h/r:c-a.height),h=ax(Math.min(h,o,l.maxWidth)),c=ax(Math.min(c,n,l.maxHeight)),h&&!c&&(c=ax(h/2)),(void 0!==e||void 0!==i)&&r&&l.height&&c>l.height&&(h=ax(Math.floor((c=l.height)*r))),{width:h,height:c}}(t,e,i,r)}isAttached(t){let e=t&&ag(t);return!!(e&&e.isConnected)}}class oO{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return st(this.x)&&st(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let r={};return t.forEach(t=>{r[t]=i[t]&&i[t].active()?i[t]._to:this[t]}),r}}function oD(t,e,i,r,s){let a,o,n,l=rL(r,0),h=Math.min(rL(s,t.length),t.length),c=0;for(i=Math.ceil(i),s&&(i=(a=s-r)/Math.floor(a/i)),n=l;n<0;)n=Math.round(l+ ++c*i);for(o=Math.max(l,0);o<h;o++)o===n&&(e.push(t[o]),n=Math.round(l+ ++c*i))}let oT=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i,oz=(t,e)=>Math.min(e||t,t);function oL(t,e){let i=[],r=t.length/e,s=t.length,a=0;for(;a<s;a+=r)i.push(t[Math.floor(a)]);return i}function oF(t){return t.drawTicks?t.tickLength:0}function oR(t,e){if(!t.display)return 0;let i=s4(t.font,e),r=s3(t.padding);return(rO(t.text)?t.text.length:1)*i.lineHeight+r.height}class oI extends oO{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=rz(t,1/0),e=rz(e,-1/0),i=rz(i,1/0),r=rz(r,-1/0),{min:rz(t,i),max:rz(e,r),minDefined:rT(t),maxDefined:rT(e)}}getMinMax(t){let e,{min:i,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();if(s&&a)return{min:i,max:r};let o=this.getMatchingVisibleMetas();for(let n=0,l=o.length;n<l;++n)e=o[n].controller.getMinMax(this,t),s||(i=Math.min(i,e.min)),a||(r=Math.max(r,e.max));return i=a&&i>r?r:i,r=s&&i>r?i:r,{min:rz(i,rz(r,i)),max:rz(r,rz(i,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rR(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:r,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,i){let{min:r,max:s}=t,a=rF(e,(s-r)/2),o=(t,e)=>i&&0===t?0:t+e;return{min:o(r,-Math.abs(a)),max:o(s,a)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let n=o<this.ticks.length;this._convertTicksToLabels(n?oL(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=function(t,e){var i;let r,s,a=t.options.ticks,o=(r=(i=t).options.offset,s=i._tickSize(),Math.floor(Math.min(i._length/s+ +!r,i._maxLength/s))),n=Math.min(a.maxTicksLimit||o,o),l=a.major.enabled?function(t){let e,i,r=[];for(e=0,i=t.length;e<i;e++)t[e].major&&r.push(e);return r}(e):[],h=l.length,c=l[0],d=l[h-1],u=[];if(h>n)return function(t,e,i,r){let s,a=0,o=i[0];for(s=0,r=Math.ceil(r);s<t.length;s++)s===o&&(e.push(t[s]),o=i[++a*r])}(e,u,l,h/n),u;let f=function(t,e,i){let r=function(t){let e,i,r=t.length;if(r<2)return!1;for(i=t[0],e=1;e<r;++e)if(t[e]-t[e-1]!==i)return!1;return i}(t),s=e.length/i;if(!r)return Math.max(s,1);let a=function(t){let e,i=[],r=Math.sqrt(t);for(e=1;e<r;e++)t%e==0&&(i.push(e),i.push(t/e));return r===(0|r)&&i.push(r),i.sort((t,e)=>t-e).pop(),i}(r);for(let t=0,e=a.length-1;t<e;t++){let e=a[t];if(e>s)return e}return Math.max(s,1)}(l,e,n);if(h>0){let t,i,r=h>1?Math.round((d-c)/(h-1)):null;for(oD(e,u,f,rC(r)?0:c-r,c),t=0,i=h-1;t<i;t++)oD(e,u,f,l[t],l[t+1]);return oD(e,u,f,d,rC(r)?e.length:d+r),u}return oD(e,u,f),u}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),n&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rR(this.options.afterUpdate,[this])}beforeSetDimensions(){rR(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rR(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),rR(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rR(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e,i,r,s=this.options.ticks;for(e=0,i=t.length;e<i;e++)(r=t[e]).label=rR(s.callback,[r.value,e,t],this)}afterTickToLabelConversion(){rR(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rR(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t,e,i,r=this.options,s=r.ticks,a=oz(this.ticks.length,r.ticks.maxTicksLimit),o=s.minRotation||0,n=s.maxRotation,l=o;if(!this._isVisible()||!s.display||o>=n||a<=1||!this.isHorizontal()){this.labelRotation=o;return}let h=this._getLabelSizes(),c=h.widest.width,d=h.highest.height,u=sh(this.chart.width-c,0,this.maxWidth);c+6>(t=r.offset?this.maxWidth/a:u/(a-1))&&(t=u/(a-(r.offset?.5:1)),e=this.maxHeight-oF(r.grid)-s.padding-oR(r.title,this.chart.options.font),i=Math.sqrt(c*c+d*d),l=Math.max(o,Math.min(n,l=180/rZ*Math.min(Math.asin(sh((h.highest.height+6)/t,-1,1)),Math.asin(sh(e/i,-1,1))-Math.asin(sh(d/i,-1,1)))))),this.labelRotation=l}afterCalculateLabelRotation(){rR(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){rR(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){let a=oR(r,e.options.font);if(o?(t.width=this.maxWidth,t.height=oF(s)+a):(t.height=this.maxHeight,t.width=oF(s)+a),i.display&&this.ticks.length){let{first:e,last:r,widest:s,highest:a}=this._getLabelSizes(),n=2*i.padding,l=si(this.labelRotation),h=Math.cos(l),c=Math.sin(l);if(o){let e=i.mirror?0:c*s.width+h*a.height;t.height=Math.min(this.maxHeight,t.height+e+n)}else{let e=i.mirror?0:h*s.width+c*a.height;t.width=Math.min(this.maxWidth,t.width+e+n)}this._calculatePadding(e,r,c,h)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){let{ticks:{align:s,padding:a},position:o}=this.options,n=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){let o=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),c=0,d=0;n?l?(c=r*t.width,d=i*e.height):(c=i*t.height,d=r*e.width):"start"===s?d=e.width:"end"===s?c=t.width:"inner"!==s&&(c=t.width/2,d=e.width/2),this.paddingLeft=Math.max((c-o+a)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-h+a)*this.width/(this.width-h),0)}else{let i=e.height/2,r=t.height/2;"start"===s?(i=0,r=t.height):"end"===s&&(i=e.height,r=0),this.paddingTop=i+a,this.paddingBottom=r+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rR(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)rC(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=oL(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){let r,s,a,o,n,l,h,c,d,u,f,{ctx:p,_longestTextCache:g}=this,m=[],_=[],y=Math.floor(e/oz(e,i)),b=0,v=0;for(r=0;r<e;r+=y){if(o=t[r].label,p.font=l=(n=this._resolveTickFontOptions(r)).string,h=g[l]=g[l]||{data:{},gc:[]},c=n.lineHeight,d=u=0,rC(o)||rO(o)){if(rO(o))for(s=0,a=o.length;s<a;++s)rC(f=o[s])||rO(f)||(d=sW(p,h.data,h.gc,d,f),u+=c)}else d=sW(p,h.data,h.gc,d,o),u=c;m.push(d),_.push(u),b=Math.max(d,b),v=Math.max(u,v)}rI(g,t=>{let i,r=t.gc,s=r.length/2;if(s>e){for(i=0;i<s;++i)delete t.data[r[i]];r.splice(0,s)}});let x=m.indexOf(b),w=_.indexOf(v),M=t=>({width:m[t]||0,height:_[t]||0});return{first:M(0),last:M(e-1),widest:M(x),highest:M(w),widths:m,heights:_}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return sh(this._alignToPixels?sN(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){var e;let i=this.ticks||[];if(t>=0&&t<i.length){let e=i[t];return e.$context||(e.$context=s9(this.getContext(),{tick:e,index:t,type:"tick"}))}return this.$context||(this.$context=(e=this.chart.getContext(),s9(e,{scale:this,type:"scale"})))}_tickSize(){let t=this.options.ticks,e=si(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,o=s?s.widest.width+a:0,n=s?s.highest.height+a:0;return this.isHorizontal()?n*i>o*r?o/i:n/r:n*r<o*i?n/i:o/r}_isVisible(){let t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e,i,r,s,a,o,n,l,h,c,d,u,f=this.axis,p=this.chart,g=this.options,{grid:m,position:_,border:y}=g,b=m.offset,v=this.isHorizontal(),x=this.ticks.length+ +!!b,w=oF(m),M=[],k=y.setContext(this.getContext()),S=k.display?k.width:0,$=S/2,A=function(t){return sN(p,t,S)};if("top"===_)e=A(this.bottom),o=this.bottom-w,l=e-$,c=A(t.top)+$,u=t.bottom;else if("bottom"===_)e=A(this.top),c=t.top,u=A(t.bottom)-$,o=e+$,l=this.top+w;else if("left"===_)e=A(this.right),a=this.right-w,n=e-$,h=A(t.left)+$,d=t.right;else if("right"===_)e=A(this.left),h=t.left,d=A(t.right)-$,a=e+$,n=this.left+w;else if("x"===f){if("center"===_)e=A((t.top+t.bottom)/2+.5);else if(rD(_)){let t=Object.keys(_)[0],i=_[t];e=A(this.chart.scales[t].getPixelForValue(i))}c=t.top,u=t.bottom,l=(o=e+$)+w}else if("y"===f){if("center"===_)e=A((t.left+t.right)/2);else if(rD(_)){let t=Object.keys(_)[0],i=_[t];e=A(this.chart.scales[t].getPixelForValue(i))}n=(a=e-$)-w,h=t.left,d=t.right}let P=rL(g.ticks.maxTicksLimit,x),E=Math.max(1,Math.ceil(x/P));for(i=0;i<x;i+=E){let t=this.getContext(i),e=m.setContext(t),f=y.setContext(t),g=e.lineWidth,_=e.color,x=f.dash||[],w=f.dashOffset,k=e.tickWidth,S=e.tickColor,$=e.tickBorderDash||[],A=e.tickBorderDashOffset;void 0!==(r=function(t,e,i){let r,s=t.ticks.length,a=Math.min(e,s-1),o=t._startPixel,n=t._endPixel,l=t.getPixelForTick(a);if(!i||(r=1===s?Math.max(l-o,n-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(a-1))/2,!((l+=a<e?r:-r)<o-1e-6)&&!(l>n+1e-6)))return l}(this,i,b))&&(s=sN(p,r,g),v?a=n=h=d=s:o=l=c=u=s,M.push({tx1:a,ty1:o,tx2:n,ty2:l,x1:h,y1:c,x2:d,y2:u,width:g,color:_,borderDash:x,borderDashOffset:w,tickWidth:k,tickColor:S,tickBorderDash:$,tickBorderDashOffset:A}))}return this._ticksLength=x,this._borderValue=e,M}_computeLabelItems(t){let e,i,r,s,a,o,n,l,h,c,d,u=this.axis,f=this.options,{position:p,ticks:g}=f,m=this.isHorizontal(),_=this.ticks,{align:y,crossAlign:b,padding:v,mirror:x}=g,w=oF(f.grid),M=w+v,k=x?-v:M,S=-si(this.labelRotation),$=[],A="middle";if("top"===p)a=this.bottom-k,o=this._getXAxisLabelAlignment();else if("bottom"===p)a=this.top+k,o=this._getXAxisLabelAlignment();else if("left"===p){let t=this._getYAxisLabelAlignment(w);o=t.textAlign,s=t.x}else if("right"===p){let t=this._getYAxisLabelAlignment(w);o=t.textAlign,s=t.x}else if("x"===u){if("center"===p)a=(t.top+t.bottom)/2+M;else if(rD(p)){let t=Object.keys(p)[0],e=p[t];a=this.chart.scales[t].getPixelForValue(e)+M}o=this._getXAxisLabelAlignment()}else if("y"===u){if("center"===p)s=(t.left+t.right)/2-M;else if(rD(p)){let t=Object.keys(p)[0],e=p[t];s=this.chart.scales[t].getPixelForValue(e)}o=this._getYAxisLabelAlignment(w).textAlign}"y"===u&&("start"===y?A="top":"end"===y&&(A="bottom"));let P=this._getLabelSizes();for(e=0,i=_.length;e<i;++e){let t;r=_[e].label;let u=g.setContext(this.getContext(e));n=this.getPixelForTick(e)+g.labelOffset,h=(l=this._resolveTickFontOptions(e)).lineHeight;let f=(c=rO(r)?r.length:1)/2,y=u.color,v=u.textStrokeColor,w=u.textStrokeWidth,M=o;if(m?(s=n,"inner"===o&&(M=e===i-1?this.options.reverse?"left":"right":0===e?this.options.reverse?"right":"left":"center"),d="top"===p?"near"===b||0!==S?-c*h+h/2:"center"===b?-P.highest.height/2-f*h+h:-P.highest.height+h/2:"near"===b||0!==S?h/2:"center"===b?P.highest.height/2-f*h:P.highest.height-c*h,x&&(d*=-1),0===S||u.showLabelBackdrop||(s+=h/2*Math.sin(S))):(a=n,d=(1-c)*h/2),u.showLabelBackdrop){let r=s3(u.backdropPadding),s=P.heights[e],a=P.widths[e],n=d-r.top,l=0-r.left;switch(A){case"middle":n-=s/2;break;case"bottom":n-=s}switch(o){case"center":l-=a/2;break;case"right":l-=a;break;case"inner":e===i-1?l-=a:e>0&&(l-=a/2)}t={left:l,top:n,width:a+r.width,height:s+r.height,color:u.backdropColor}}$.push({label:r,font:l,textOffset:d,options:{rotation:S,color:y,strokeColor:v,strokeWidth:w,textAlign:M,textBaseline:A,translation:[s,a],backdrop:t}})}return $}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-si(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){let e,i,{position:r,ticks:{crossAlign:s,mirror:a,padding:o}}=this.options,n=this._getLabelSizes(),l=t+o,h=n.widest.width;return"left"===r?a?(i=this.right+o,"near"===s?e="left":"center"===s?(e="center",i+=h/2):(e="right",i+=h)):(i=this.right-l,"near"===s?e="right":"center"===s?(e="center",i-=h/2):(e="left",i=this.left)):"right"===r?a?(i=this.left+o,"near"===s?e="right":"center"===s?(e="center",i-=h/2):(e="left",i-=h)):(i=this.left+l,"near"===s?e="left":"center"===s?(e="center",i+=h/2):(e="right",i=this.right)):e="right",{textAlign:e,x:i}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,a),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let i=this.ticks.findIndex(e=>e.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){let e,i,r=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),o=(t,e,i)=>{i.width&&i.color&&(s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.setLineDash(i.borderDash||[]),s.lineDashOffset=i.borderDashOffset,s.beginPath(),s.moveTo(t.x,t.y),s.lineTo(e.x,e.y),s.stroke(),s.restore())};if(r.display)for(e=0,i=a.length;e<i;++e){let t=a[e];r.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),r.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){let t,e,i,r,{chart:s,ctx:a,options:{border:o,grid:n}}=this,l=o.setContext(this.getContext()),h=o.display?l.width:0;if(!h)return;let c=n.setContext(this.getContext(0)).lineWidth,d=this._borderValue;this.isHorizontal()?(t=sN(s,this.left,h)-h/2,e=sN(s,this.right,c)+c/2,i=r=d):(i=sN(s,this.top,h)-h/2,r=sN(s,this.bottom,c)+c/2,t=e=d),a.save(),a.lineWidth=l.width,a.strokeStyle=l.color,a.beginPath(),a.moveTo(t,i),a.lineTo(e,r),a.stroke(),a.restore()}drawLabels(t){if(!this.options.ticks.display)return;let e=this.ctx,i=this._computeLabelArea();for(let r of(i&&sq(e,i),this.getLabelItems(t))){let t=r.options,i=r.font;sJ(e,r.label,0,r.textOffset,i,t)}i&&sX(e)}drawTitle(){let t,e,{ctx:i,options:{position:r,title:s,reverse:a}}=this;if(!s.display)return;let o=s4(s.font),n=s3(s.padding),l=s.align,h=o.lineHeight/2;"bottom"===r||"center"===r||rD(r)?(h+=n.bottom,rO(s.text)&&(h+=o.lineHeight*(s.text.length-1))):h+=n.top;let{titleX:c,titleY:d,maxWidth:u,rotation:f}=function(t,e,i,r){let s,a,o,{top:n,left:l,bottom:h,right:c,chart:d}=t,{chartArea:u,scales:f}=d,p=0,g=h-n,m=c-l;if(t.isHorizontal()){if(a=sv(r,l,c),rD(i)){let t=Object.keys(i)[0],r=i[t];o=f[t].getPixelForValue(r)+g-e}else o="center"===i?(u.bottom+u.top)/2+g-e:oT(t,i,e);s=c-l}else{if(rD(i)){let t=Object.keys(i)[0],r=i[t];a=f[t].getPixelForValue(r)-m+e}else a="center"===i?(u.left+u.right)/2-m+e:oT(t,i,e);o=sv(r,h,n),p="left"===i?-r5:r5}return{titleX:a,titleY:o,maxWidth:s,rotation:p}}(this,h,r,l);sJ(i,s.text,0,0,o,{color:s.color,maxWidth:u,rotation:f,textAlign:(t=sb(l),(a&&"right"!==r||!a&&"right"===r)&&(t="left"===(e=t)?"right":"right"===e?"left":e),t),textBaseline:"middle",translation:[c,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=rL(t.grid&&t.grid.z,-1),r=rL(t.border&&t.border.z,0);return this._isVisible()&&this.draw===oI.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){let e,i,r=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];for(e=0,i=r.length;e<i;++e){let i=r[e];i[s]!==this.id||t&&i.type!==t||a.push(i)}return a}_resolveTickFontOptions(t){return s4(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class oj{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){var e,i,r,s,a,o;let n,l,h=Object.getPrototypeOf(t);"id"in(e=h)&&"defaults"in e&&(l=this.register(h));let c=this.items,d=t.id,u=this.scope+"."+d;if(!d)throw Error("class does not have id: "+t);return d in c||(c[d]=t,i=t,r=u,s=l,n=rH(Object.create(null),[s?sj.get(s):{},sj.get(r),i.defaults]),sj.set(r,n),i.defaultRoutes&&(a=r,Object.keys(o=i.defaultRoutes).forEach(t=>{let e=t.split("."),i=e.pop(),r=[a].concat(e).join("."),s=o[t].split("."),n=s.pop(),l=s.join(".");sj.route(r,i,l,n)})),i.descriptors&&sj.describe(r,i.descriptors),this.override&&sj.override(t.id,t.overrides)),u}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in sj[r]&&(delete(0,sj)[r][i],this.override&&delete(0,sL)[i])}}var oW=new class{constructor(){this.controllers=new oj(aG,"datasets",!0),this.elements=new oj(oO,"elements"),this.plugins=new oj(Object,"plugins"),this.scales=new oj(oI,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(e=>{let r=i||this._getRegistryForType(e);i||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):rI(e,e=>{let r=i||this._getRegistryForType(e);this._exec(t,r,e)})})}_exec(t,e,i){let r=rY(t);rR(i["before"+r],[],i),e[t](i),rR(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let r=e.get(t);if(void 0===r)throw Error('"'+t+'" is not a registered '+i+".");return r}};class oN{constructor(){this._init=void 0}notify(t,e,i,r){if("beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),void 0===this._init)return;let s=r?this._descriptors(t).filter(r):this._descriptors(t),a=this._notify(s,t,e,i);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),a}_notify(t,e,i,r){for(let s of(r=r||{},t)){let t=s.plugin;if(!1===rR(t[i],[e,r,s.options],t)&&r.cancelable)return!1}return!0}invalidate(){rC(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,r=rL(i.options&&i.options.plugins,{}),s=function(t){let e={},i=[],r=Object.keys(oW.plugins.items);for(let t=0;t<r.length;t++)i.push(oW.getPlugin(r[t]));let s=t.plugins||[];for(let t=0;t<s.length;t++){let r=s[t];-1===i.indexOf(r)&&(i.push(r),e[r.id]=!0)}return{plugins:i,localIds:e}}(i);return!1!==r||e?function(t,{plugins:e,localIds:i},r,s){let a=[],o=t.getContext();for(let l of e){var n;let e=l.id,h=(n=r[e],s||!1!==n?!0===n?{}:n:null);null!==h&&a.push({plugin:l,options:function(t,{plugin:e,local:i},r,s){let a=t.pluginScopeKeys(e),o=t.getOptionScopes(r,a);return i&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}(t.config,{plugin:l,local:i[e]},h,o)})}return a}(t,s,r,e):[]}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,r=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function oV(t,e){let i=sj.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function oH(t){if("x"===t||"y"===t||"r"===t)return t}function oB(t,...e){if(oH(t))return t;for(let r of e){var i;let e=r.axis||("top"===(i=r.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.length>1&&oH(t[0].toLowerCase());if(e)return e}throw Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function oU(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function oq(t){let e,i,r,s,a=t.options||(t.options={});a.plugins=rL(a.plugins,{}),e=sL[t.type]||{scales:{}},i=a.scales||{},r=oV(t.type,a),s=Object.create(null),Object.keys(i).forEach(a=>{let o=i[a];if(!rD(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);let n=oB(a,o,function(t,e){if(e.data&&e.data.datasets){let i=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(i.length)return oU(t,"x",i[0])||oU(t,"y",i[0])}return{}}(a,t),sj.scales[o.type]),l=n===r?"_index_":"_value_",h=e.scales||{};s[a]=rB(Object.create(null),[{axis:n},o,h[n],h[l]])}),t.data.datasets.forEach(e=>{let r=e.type||t.type,o=e.indexAxis||oV(r,a),n=(sL[r]||{}).scales||{};Object.keys(n).forEach(t=>{let r,a=(r=t,"_index_"===t?r=o:"_value_"===t&&(r="x"===o?"y":"x"),r),l=e[a+"AxisID"]||a;s[l]=s[l]||Object.create(null),rB(s[l],[{axis:a},i[l],n[t]])})}),Object.keys(s).forEach(t=>{let e=s[t];rB(e,[sj.scales[e.type],sj.scale])}),a.scales=s}function oX(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}let oY=new Map,oK=new Set;function oJ(t,e){let i=oY.get(t);return i||(i=e(),oY.set(t,i),oK.add(i)),i}let oG=(t,e,i)=>{let r=rX(e,i);void 0!==r&&t.add(r)};class oZ{constructor(t){var e;this._config=((e=(e=t)||{}).data=oX(e.data),oq(e),e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=oX(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),oq(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return oJ(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return oJ(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return oJ(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return oJ(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){let{options:r,type:s}=this,a=this._cachedScopes(t,i),o=a.get(e);if(o)return o;let n=new Set;e.forEach(e=>{t&&(n.add(t),e.forEach(e=>oG(n,t,e))),e.forEach(t=>oG(n,r,t)),e.forEach(t=>oG(n,sL[s]||{},t)),e.forEach(t=>oG(n,sj,t)),e.forEach(t=>oG(n,sF,t))});let l=Array.from(n);return 0===l.length&&l.push(Object.create(null)),oK.has(e)&&a.set(e,l),l}chartOptionScopes(){let{options:t,type:e}=this;return[t,sL[e]||{},sj.datasets[e]||{},{type:e},sj,sF]}resolveNamedOptions(t,e,i,r=[""]){let s={$shared:!0},{resolver:a,subPrefixes:o}=oQ(this._resolverCache,t,r),n=a;if(function(t,e){let{isScriptable:i,isIndexable:r}=at(t);for(let s of e){let e=i(s),a=r(s),o=(a||e)&&t[s];if(e&&(rJ(o)||o0(o))||a&&rO(o))return!0}return!1}(a,e)){s.$shared=!1,i=rJ(i)?i():i;let e=this.createResolver(t,i,o);n=s7(a,i,e)}for(let t of e)s[t]=n[t];return s}createResolver(t,e,i=[""],r){let{resolver:s}=oQ(this._resolverCache,t,i);return rD(e)?s7(s,e,void 0,r):s}}function oQ(t,e,i){let r=t.get(e);r||(r=new Map,t.set(e,r));let s=i.join(),a=r.get(s);return a||(a={resolver:s8(e,i),subPrefixes:i.filter(t=>!t.toLowerCase().includes("hover"))},r.set(s,a)),a}let o0=t=>rD(t)&&Object.getOwnPropertyNames(t).some(e=>rJ(t[e])),o1=["top","bottom","left","right","chartArea"];function o2(t,e){return"top"===t||"bottom"===t||-1===o1.indexOf(t)&&"x"===e}function o5(t,e){return function(i,r){return i[t]===r[t]?i[e]-r[e]:i[t]-r[t]}}function o3(t){let e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),rR(i&&i.onComplete,[t],e)}function o4(t){let e=t.chart,i=e.options.animation;rR(i&&i.onProgress,[t],e)}function o6(t){return ap()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}let o9={},o8=t=>{let e=o6(t);return Object.values(o9).filter(t=>t.canvas===e).pop()};class o7{static defaults=sj;static instances=o9;static overrides=sL;static registry=oW;static version="4.5.1";static getChart=o8;static register(...t){oW.add(...t),nt()}static unregister(...t){oW.remove(...t),nt()}constructor(t,e){var i,r;let s,a=this.config=new oZ(e),o=o6(t),n=o8(o);if(n)throw Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");let l=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||(!ap()||"u">typeof OffscreenCanvas&&o instanceof OffscreenCanvas?om:oC)),this.platform.updateConfig(a);let h=this.platform.acquireContext(o,l.aspectRatio),c=h&&h.canvas,d=c&&c.height,u=c&&c.width;if(this.id=rE(),this.ctx=h,this.canvas=c,this.width=u,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new oN,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=(i=t=>this.update(t),r=l.resizeDelay||0,function(...t){return r?(clearTimeout(s),s=setTimeout(i,r,t)):i.apply(this,t),r}),this._dataChanges=[],o9[this.id]=this,!h||!c)return void console.error("Failed to create chart: can't acquire context from the given item");aF.listen(this,"complete",o3),aF.listen(this,"progress",o4),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:s}=this;return rC(t)?e&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return oW}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():aw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sV(this.canvas,this.ctx),this}stop(){return aF.stop(this),this}resize(t,e){aF.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,t,e,s),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),n=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,aw(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),rR(i.onResize,[this,a],this),this.attached&&this._doResize(n)&&this.render())}ensureScalesHaveIDs(){rI(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){let t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((t,e)=>(t[e]=!1,t),{}),s=[];e&&(s=s.concat(Object.keys(e).map(t=>{let i=e[t],r=oB(t,i),s="r"===r,a="x"===r;return{options:i,dposition:s?"chartArea":a?"bottom":"left",dtype:s?"radialLinear":a?"category":"linear"}}))),rI(s,e=>{let s=e.options,a=s.id,o=oB(a,s),n=rL(s.type,e.dtype);(void 0===s.position||o2(s.position,o)!==o2(e.dposition))&&(s.position=e.dposition),r[a]=!0;let l=null;a in i&&i[a].type===n?l=i[a]:i[(l=new(oW.getScale(n))({id:a,type:n,ctx:this.ctx,chart:this})).id]=l,l.init(s,t)}),rI(r,(t,e)=>{t||delete i[e]}),rI(i,t=>{op.configure(this,t,t.options),op.addBox(this,t)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((t,e)=>t.index-e.index),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(o5("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,i)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){let t,e,i=[],r=this.data.datasets;for(this._removeUnreferencedMetasets(),t=0,e=r.length;t<e;t++){let e=r[t],s=this.getDatasetMeta(t),a=e.type||this.config.type;if(s.type&&s.type!==a&&(this._destroyDatasetMeta(t),s=this.getDatasetMeta(t)),s.type=a,s.indexAxis=e.indexAxis||oV(a,this.options),s.order=e.order||0,s.index=t,s.label=""+e.label,s.visible=this.isDatasetVisible(t),s.controller)s.controller.updateIndex(t),s.controller.linkScales();else{let e=oW.getController(a),{datasetElementType:r,dataElementType:o}=sj.datasets[a];Object.assign(e,{dataElementType:oW.getElement(o),datasetElementType:r&&oW.getElement(r)}),s.controller=new e(this,t),i.push(s.controller)}}return this._updateMetasets(),i}_resetElements(){rI(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let t=0,e=this.data.datasets.length;t<e;t++){let{controller:e}=this.getDatasetMeta(t),i=!r&&-1===s.indexOf(e);e.buildOrUpdateElements(i),a=Math.max(+e.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),r||rI(s,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(o5("z","_idx"));let{_active:o,_lastEvent:n}=this;n?this._eventHandler(n,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){rI(this.scales,t=>{op.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options;rG(new Set(Object.keys(this._listeners)),new Set(t.events))&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this;for(let{method:i,start:r,count:s}of this._getUniformDataChanges()||[]){var e="_removeElements"===i?-s:s;for(let i of Object.keys(t)){let s=+i;if(s>=r){let a=t[i];delete t[i],(e>0||s>r)&&(t[s+e]=a)}}}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,i=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),r=i(0);for(let t=1;t<e;t++)if(!rG(r,i(t)))return;return Array.from(r).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;op.update(this,this.width,this.height,t);let e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],rI(this.boxes,t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,rJ(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(aF.has(this)?this.attached&&!aF.running(this)&&aF.start(this):(this.draw(),o3({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e,i,r=this._sortedMetasets,s=[];for(e=0,i=r.length;e<i;++e){let i=r[e];(!t||i.visible)&&s.push(i)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=aL(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(r&&sq(e,r),t.controller.draw(),r&&sX(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return sU(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){let s=os.modes[e];return"function"==typeof s?s(this,t,i,r):[]}getDatasetMeta(t){let e=this.data.datasets[t],i=this._metasets,r=i.filter(t=>t&&t._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=s9(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){let r=i?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,r);rK(e)?(s.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(s,{visible:i}),this.update(e=>e.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),aF.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),sV(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete o9[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,i=(i,r)=>{e.addEventListener(this,i,r),t[i]=r},r=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};rI(this.options.events,t=>i(t,r))}bindResponsiveEvents(){let t;this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,i=this.platform,r=(t,r)=>{i.addEventListener(this,t,r),e[t]=r},s=(t,r)=>{e[t]&&(i.removeEventListener(this,t,r),delete e[t])},a=(t,e)=>{this.canvas&&this.resize(t,e)},o=()=>{s("attach",o),this.attached=!0,this.resize(),r("resize",a),r("detach",t)};t=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),r("attach",o)},i.isAttached(this.canvas)?o():t()}unbindEvents(){rI(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},rI(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){let r,s,a,o=i?"set":"remove";for("dataset"===e&&this.getDatasetMeta(t[0].datasetIndex).controller["_"+o+"DatasetHoverStyle"](),s=0,a=t.length;s<a;++s){let e=(r=t[s])&&this.getDatasetMeta(r.datasetIndex).controller;e&&e[o+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],i=t.map(({datasetIndex:t,index:e})=>{let i=this.getDatasetMeta(t);if(!i)throw Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}});rj(i,e)||(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,i){let r=this.options.hover,s=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),a=s(e,t),o=i?t:s(t,e);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(t,e){let i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,r))return;let s=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,e,i){var r;let{_active:s=[],options:a}=this,o=this._getActiveElements(t,s,i,e),n="mouseup"===t.type||"click"===t.type||"contextmenu"===t.type,l=(r=this._lastEvent,i&&"mouseout"!==t.type?n?r:t:null);i&&(this._lastEvent=null,rR(a.onHover,[t,o,this],this),n&&rR(a.onClick,[t,o,this],this));let h=!rj(o,s);return(h||e)&&(this._active=o,this._updateHoverStyles(o,s,e)),this._lastEvent=l,h}_getActiveElements(t,e,i,r){if("mouseout"===t.type)return[];if(!i)return e;let s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}function nt(){return rI(o7.instances,t=>t._plugins.invalidate())}function ne(t,e,i,r){return{x:i+t*Math.cos(e),y:r+t*Math.sin(e)}}function ni(t,e,i,r,s,a){var o,n,l,h;let c,d,u,f,{x:p,y:g,startAngle:m,pixelMargin:_,innerRadius:y}=e,b=Math.max(e.outerRadius+r+i-_,0),v=y>0?y+r+i+_:0,x=0,w=s-m;if(r){let t=b>0?b-r:0,e=((y>0?y-r:0)+t)/2;x=(w-(0!==e?w*e/(e+r):w))/2}let M=Math.max(.001,w*b-i/rZ)/b,k=(w-M)/2,S=m+k+x,$=s-k-x,{outerStart:A,outerEnd:P,innerStart:E,innerEnd:C}=(o=e,n=v,l=b,h=$-S,c=s1(o.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),u=Math.min(d=(l-n)/2,h*n/2),{outerStart:(f=t=>{let e=(l-Math.min(d,t))*h/2;return sh(t,0,Math.min(d,e))})(c.outerStart),outerEnd:f(c.outerEnd),innerStart:sh(c.innerStart,0,u),innerEnd:sh(c.innerEnd,0,u)}),O=b-A,D=b-P,T=S+A/O,z=$-P/D,L=v+E,F=v+C,R=S+E/L,I=$-C/F;if(t.beginPath(),a){let e=(T+z)/2;if(t.arc(p,g,b,T,e),t.arc(p,g,b,e,z),P>0){let e=ne(D,z,p,g);t.arc(e.x,e.y,P,z,$+r5)}let i=ne(F,$,p,g);if(t.lineTo(i.x,i.y),C>0){let e=ne(F,I,p,g);t.arc(e.x,e.y,C,$+r5,I+Math.PI)}let r=($-C/v+(S+E/v))/2;if(t.arc(p,g,v,$-C/v,r,!0),t.arc(p,g,v,r,S+E/v,!0),E>0){let e=ne(L,R,p,g);t.arc(e.x,e.y,E,R+Math.PI,S-r5)}let s=ne(O,S,p,g);if(t.lineTo(s.x,s.y),A>0){let e=ne(O,T,p,g);t.arc(e.x,e.y,A,S-r5,T)}}else{t.moveTo(p,g);let e=Math.cos(T)*b+p,i=Math.sin(T)*b+g;t.lineTo(e,i);let r=Math.cos(z)*b+p,s=Math.sin(z)*b+g;t.lineTo(r,s)}t.closePath()}class nr extends oO{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let{angle:r,distance:s}=ss(this.getProps(["x","y"],i),{x:t,y:e}),{startAngle:a,endAngle:o,innerRadius:n,outerRadius:l,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),c=(this.options.spacing+this.options.borderWidth)/2,d=rL(h,o-a),u=sl(r,a,o)&&a!==o,f=d>=rQ||u,p=sc(s,n+c,l+c);return f&&p}getCenterPoint(t){let{x:e,y:i,startAngle:r,endAngle:s,innerRadius:a,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:n,spacing:l}=this.options,h=(r+s)/2,c=(a+o+l+n)/2;return{x:e+Math.cos(h)*c,y:i+Math.sin(h)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,a=e.circular;if(this.pixelMargin=.33*("inner"===e.borderAlign),this.fullCircles=i>rQ?Math.floor(i/rQ):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();let o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*r,Math.sin(o)*r);let n=r*(1-Math.sin(Math.min(rZ,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,i,r,s){let{fullCircles:a,startAngle:o,circumference:n}=e,l=e.endAngle;if(a){ni(t,e,i,r,l,s);for(let e=0;e<a;++e)t.fill();isNaN(n)||(l=o+(n%rQ||rQ))}ni(t,e,i,r,l,s),t.fill()}(t,this,n,s,a),function(t,e,i,r,s){let{fullCircles:a,startAngle:o,circumference:n,options:l}=e,{borderWidth:h,borderJoinStyle:c,borderDash:d,borderDashOffset:u,borderRadius:f}=l,p="inner"===l.borderAlign;if(!h)return;t.setLineDash(d||[]),t.lineDashOffset=u,p?(t.lineWidth=2*h,t.lineJoin=c||"round"):(t.lineWidth=h,t.lineJoin=c||"bevel");let g=e.endAngle;if(a){ni(t,e,i,r,g,s);for(let e=0;e<a;++e)t.stroke();isNaN(n)||(g=o+(n%rQ||rQ))}p&&function(t,e,i){let{startAngle:r,pixelMargin:s,x:a,y:o,outerRadius:n,innerRadius:l}=e,h=s/n;t.beginPath(),t.arc(a,o,n,r-h,i+h),l>s?(h=s/l,t.arc(a,o,l,i+h,r-h,!0)):t.arc(a,o,s,i+r5,r-r5),t.closePath(),t.clip()}(t,e,g),l.selfJoin&&g-o>=rZ&&0===f&&"miter"!==c&&function(t,e,i){let{startAngle:r,x:s,y:a,outerRadius:o,innerRadius:n,options:l}=e,{borderWidth:h,borderJoinStyle:c}=l,d=Math.min(h/o,sn(r-i));if(t.beginPath(),t.arc(s,a,o-h/2,r+d/2,i-d/2),n>0){let e=Math.min(h/n,sn(r-i));t.arc(s,a,n+h/2,i-e/2,r+e/2,!0)}else{let e=Math.min(h/2,o*sn(r-i));if("round"===c)t.arc(s,a,e,i-rZ/2,r+rZ/2,!0);else if("bevel"===c){let o=2*e*e,n=-o*Math.cos(i+rZ/2)+s,l=-o*Math.sin(i+rZ/2)+a,h=o*Math.cos(r+rZ/2)+s,c=o*Math.sin(r+rZ/2)+a;t.lineTo(n,l),t.lineTo(h,c)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,g),a||(ni(t,e,i,r,g,s),t.stroke())}(t,this,n,s,a),t.restore()}}function ns(t,e,i=e){t.lineCap=rL(i.borderCapStyle,e.borderCapStyle),t.setLineDash(rL(i.borderDash,e.borderDash)),t.lineDashOffset=rL(i.borderDashOffset,e.borderDashOffset),t.lineJoin=rL(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=rL(i.borderWidth,e.borderWidth),t.strokeStyle=rL(i.borderColor,e.borderColor)}function na(t,e,i){t.lineTo(i.x,i.y)}function no(t,e,i={}){let r=t.length,{start:s=0,end:a=r-1}=i,{start:o,end:n}=e,l=Math.max(s,o),h=Math.min(a,n);return{count:r,start:l,loop:e.loop,ilen:h<l&&!(s<o&&a<o||s>n&&a>n)?r+h-l:h-l}}function nn(t,e,i,r){let s,a,o,{points:n,options:l}=e,{count:h,start:c,loop:d,ilen:u}=no(n,i,r),f=l.stepped?sY:l.tension||"monotone"===l.cubicInterpolationMode?sK:na,{move:p=!0,reverse:g}=r||{};for(s=0;s<=u;++s)(a=n[(c+(g?u-s:s))%h]).skip||(p?(t.moveTo(a.x,a.y),p=!1):f(t,o,a,g,l.stepped),o=a);return d&&f(t,o,a=n[(c+(g?u:0))%h],g,l.stepped),!!d}function nl(t,e,i,r){let s,a,o,n,l,h,c=e.points,{count:d,start:u,ilen:f}=no(c,i,r),{move:p=!0,reverse:g}=r||{},m=0,_=0,y=t=>(u+(g?f-t:t))%d,b=()=>{n!==l&&(t.lineTo(m,l),t.lineTo(m,n),t.lineTo(m,h))};for(p&&(a=c[y(0)],t.moveTo(a.x,a.y)),s=0;s<=f;++s){if((a=c[y(s)]).skip)continue;let e=a.x,i=a.y,r=0|e;r===o?(i<n?n=i:i>l&&(l=i),m=(_*m+e)/++_):(b(),t.lineTo(e,i),o=r,_=0,n=l=i),h=i}b()}function nh(t){let e=t.options,i=e.borderDash&&e.borderDash.length;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i?nn:nl}let nc="function"==typeof Path2D;class nd extends oO{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){let i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){let r=i.spanGaps?this._loop:this._fullLoop;!function(t,e,i,r,s){let a,o,n,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)!function(t,e="x"){let i,r,s,a=au(e),o=t.length,n=Array(o).fill(0),l=Array(o),h=ad(t,0);for(i=0;i<o;++i)if(r=s,s=h,h=ad(t,i+1),s){if(h){let t=h[e]-s[e];n[i]=0!==t?(h[a]-s[a])/t:0}l[i]=r?h?r9(n[i-1])!==r9(n[i])?0:(n[i-1]+n[i])/2:n[i-1]:n[i]}!function(t,e,i){let r,s,a,o,n,l=t.length,h=ad(t,0);for(let c=0;c<l-1;++c)if(n=h,h=ad(t,c+1),n&&h){if(r8(e[c],0,ac)){i[c]=i[c+1]=0;continue}(o=Math.pow(r=i[c]/e[c],2)+Math.pow(s=i[c+1]/e[c],2))<=9||(a=3/Math.sqrt(o),i[c]=r*a*e[c],i[c+1]=s*a*e[c])}}(t,n,l),function(t,e,i="x"){let r,s,a,o=au(i),n=t.length,l=ad(t,0);for(let h=0;h<n;++h){if(s=a,a=l,l=ad(t,h+1),!a)continue;let n=a[i],c=a[o];s&&(r=(n-s[i])/3,a[`cp1${i}`]=n-r,a[`cp1${o}`]=c-r*e[h]),l&&(r=(l[i]-n)/3,a[`cp2${i}`]=n+r,a[`cp2${o}`]=c+r*e[h])}}(t,l,e)}(t,s);else{let i=r?t[t.length-1]:t[0];for(a=0,o=t.length;a<o;++a)l=function(t,e,i,r){let s=t.skip?e:t,a=i.skip?e:i,o=sa(e,s),n=sa(a,e),l=o/(o+n),h=n/(o+n);l=isNaN(l)?0:l,h=isNaN(h)?0:h;let c=r*l,d=r*h;return{previous:{x:e.x-c*(a.x-s.x),y:e.y-c*(a.y-s.y)},next:{x:e.x+d*(a.x-s.x),y:e.y+d*(a.y-s.y)}}}(i,n=t[a],t[Math.min(a+1,o-!r)%o],e.tension),n.cp1x=l.previous.x,n.cp1y=l.previous.y,n.cp2x=l.next.x,n.cp2y=l.next.y,i=n}e.capBezierPoints&&function(t,e){let i,r,s,a,o,n=sU(t[0],e);for(i=0,r=t.length;i<r;++i)o=a,a=n,n=i<r-1&&sU(t[i+1],e),a&&(s=t[i],o&&(s.cp1x=af(s.cp1x,e.left,e.right),s.cp1y=af(s.cp1y,e.top,e.bottom)),n&&(s.cp2x=af(s.cp2x,e.left,e.right),s.cp2y=af(s.cp2y,e.top,e.bottom)))}(t,i)}(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){let i=t.points,r=t.options.spanGaps,s=i.length;if(!s)return[];let a=!!t._loop,{start:o,end:n}=function(t,e,i,r){let s=0,a=e-1;if(i&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,i&&(a+=s);a>s&&t[a%e].skip;)a--;return{start:s,end:a%=e}}(i,s,a,r);if(!0===r)return aD(t,[{start:o,end:n,loop:a}],i,e);let l=n<o?n+s:n,h=!!t._fullLoop&&0===o&&n===s-1;return aD(t,function(t,e,i,r){let s,a=t.length,o=[],n=e,l=t[e];for(s=e+1;s<=i;++s){let i=t[s%a];i.skip||i.stop?l.skip||(r=!1,o.push({start:e%a,end:(s-1)%a,loop:r}),e=n=i.stop?s:null):(n=s,l.skip&&(e=s)),l=i}return null!==n&&o.push({start:e%a,end:n%a,loop:r}),o}(i,o,l,h),i,e)}(this,this.options.segment))}first(){let t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){let t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){let i,r,s=this.options,a=t[e],o=this.points,n=aO(this,{property:e,start:a,end:a});if(!n.length)return;let l=[],h=s.stepped?a$:s.tension||"monotone"===s.cubicInterpolationMode?aA:aS;for(i=0,r=n.length;i<r;++i){let{start:r,end:c}=n[i],d=o[r],u=o[c];if(d===u){l.push(d);continue}let f=Math.abs((a-d[e])/(u[e]-d[e])),p=h(d,u,f,s.stepped);p[e]=t[e],l.push(p)}return 1===l.length?l[0]:l}pathSegment(t,e,i){return nh(this)(t,this,e,i)}path(t,e,i){let r=this.segments,s=nh(this),a=this._loop;for(let o of(e=e||0,i=i||this.points.length-e,r))a&=s(t,this,o,{start:e,end:e+i-1});return!!a}draw(t,e,i,r){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),function(t,e,i,r){if(nc&&!e.options.segment){let s;(s=e._path)||(s=e._path=new Path2D,e.path(s,i,r)&&s.closePath()),ns(t,e.options),t.stroke(s)}else!function(t,e,i,r){let{segments:s,options:a}=e,o=nh(e);for(let n of s)ns(t,a,n.style),t.beginPath(),o(t,e,n,{start:i,end:i+r-1})&&t.closePath(),t.stroke()}(t,e,i,r)}(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function nu(t,e,i,r){let s=t.options,{[i]:a}=t.getProps([i],r);return Math.abs(e-a)<s.radius+s.hitRadius}class nf extends oO{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){let r=this.options,{x:s,y:a}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(e-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return nu(this,t,"x",e)}inYRange(t,e){return nu(this,t,"y",e)}getCenterPoint(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0,i=(e=Math.max(e,e&&t.hoverRadius||0))&&t.borderWidth||0;return(e+i)*2}draw(t,e){let i=this.options;!this.skip&&!(i.radius<.1)&&sU(this,e,this.size(i)/2)&&(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,sH(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}function np(t,e){let i,r,s,a,o,{x:n,y:l,base:h,width:c,height:d}=t.getProps(["x","y","base","width","height"],e);return t.horizontal?(o=d/2,i=Math.min(n,h),r=Math.max(n,h),s=l-o,a=l+o):(i=n-(o=c/2),r=n+o,s=Math.min(l,h),a=Math.max(l,h)),{left:i,top:s,right:r,bottom:a}}function ng(t,e,i,r){return t?0:sh(e,i,r)}function nm(t,e,i,r){let s=null===e,a=null===i,o=t&&!(s&&a)&&np(t,r);return o&&(s||sc(e,o.left,o.right))&&(a||sc(i,o.top,o.bottom))}function n_(t,e){t.rect(e.x,e.y,e.w,e.h)}function ny(t,e,i={}){let r=t.x!==i.x?-e:0,s=t.y!==i.y?-e:0,a=(t.x+t.w!==i.x+i.w?e:0)-r,o=(t.y+t.h!==i.y+i.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+a,h:t.h+o,radius:t.radius}}class nb extends oO{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){var e,i,r;let s,a,o,n,l,h,c,d,{inflateAmount:u,options:{borderColor:f,backgroundColor:p}}=this,{inner:g,outer:m}=(a=(s=np(this)).right-s.left,o=s.bottom-s.top,e=a/2,i=o/2,n=this.options.borderWidth,l=this.borderSkipped,h=s2(n),c={t:ng(l.top,h.top,0,i),r:ng(l.right,h.right,0,e),b:ng(l.bottom,h.bottom,0,i),l:ng(l.left,h.left,0,e)},d=function(t,e,i){let{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,a=s5(s),o=Math.min(e,i),n=t.borderSkipped,l=r||rD(s);return{topLeft:ng(!l||n.top||n.left,a.topLeft,0,o),topRight:ng(!l||n.top||n.right,a.topRight,0,o),bottomLeft:ng(!l||n.bottom||n.left,a.bottomLeft,0,o),bottomRight:ng(!l||n.bottom||n.right,a.bottomRight,0,o)}}(this,a/2,o/2),{outer:{x:s.left,y:s.top,w:a,h:o,radius:d},inner:{x:s.left+c.l,y:s.top+c.t,w:a-c.l-c.r,h:o-c.t-c.b,radius:{topLeft:Math.max(0,d.topLeft-Math.max(c.t,c.l)),topRight:Math.max(0,d.topRight-Math.max(c.t,c.r)),bottomLeft:Math.max(0,d.bottomLeft-Math.max(c.b,c.l)),bottomRight:Math.max(0,d.bottomRight-Math.max(c.b,c.r))}}}),_=(r=m.radius).topLeft||r.topRight||r.bottomLeft||r.bottomRight?sG:n_;t.save(),(m.w!==g.w||m.h!==g.h)&&(t.beginPath(),_(t,ny(m,u,g)),t.clip(),_(t,ny(g,-u,m)),t.fillStyle=f,t.fill("evenodd")),t.beginPath(),_(t,ny(g,u)),t.fillStyle=p,t.fill(),t.restore()}inRange(t,e,i){return nm(this,t,e,i)}inXRange(t,e){return nm(this,t,null,e)}inYRange(t,e){return nm(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}let nv=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],nx=nv.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));new WeakMap;function nw(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function nM(t,e,{horizontal:i,minRotation:r}){let s=si(r),a=(i?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}class nk extends oI{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return rC(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,a=t=>r=e?r:t,o=t=>s=i?s:t;if(t){let t=r9(r),e=r9(s);t<0&&e<0?o(0):t>0&&e>0&&a(0)}if(r===s){let e=0===s?1:Math.abs(.05*s);o(s+e),t||a(r-e)}this.min=r,this.max=s}getTickLimit(){let t,{maxTicksLimit:e,stepSize:i}=this.options.ticks;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1)>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3):(t=this.computeTickLimit(),e=e||11),e&&(t=Math.min(e,t)),t}computeTickLimit(){return 1/0}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit(),r=function(t,e){var i,r;let s,a,o,n,l,h=[],{bounds:c,step:d,min:u,max:f,precision:p,count:g,maxTicks:m,maxDigits:_,includeBounds:y}=t,b=d||1,v=m-1,{min:x,max:w}=e,M=!rC(u),k=!rC(f),S=!rC(g),$=(w-x)/(_+1),A=r7((w-x)/v/b)*b;if(A<1e-14&&!M&&!k)return[{value:x},{value:w}];(n=Math.ceil(w/A)-Math.floor(x/A))>v&&(A=r7(n*A/v/b)*b),rC(p)||(A=Math.ceil(A*(s=Math.pow(10,p)))/s),"ticks"===c?(a=Math.floor(x/A)*A,o=Math.ceil(w/A)*A):(a=x,o=w),M&&k&&d&&(i=(f-u)/d,r=A/1e3,(l=Math.round(i))-r<=i&&l+r>=i)?(n=Math.round(Math.min((f-u)/A,m)),A=(f-u)/n,a=u,o=f):S?(a=M?u:a,A=((o=k?f:o)-a)/(n=g-1)):n=r8(n=(o-a)/A,Math.round(n),A/1e3)?Math.round(n):Math.ceil(n);let P=Math.max(sr(A),sr(a));a=Math.round(a*(s=Math.pow(10,rC(p)?P:p)))/s,o=Math.round(o*s)/s;let E=0;for(M&&(y&&a!==u?(h.push({value:u}),a<u&&E++,r8(Math.round((a+E*A)*s)/s,u,nM(u,$,t))&&E++):a<u&&E++);E<n;++E){let t=Math.round((a+E*A)*s)/s;if(k&&t>f)break;h.push({value:t})}return k&&y&&o!==f?h.length&&r8(h[h.length-1].value,f,nM(f,$,t))?h[h.length-1].value=f:h.push({value:f}):k&&o!==f||h.push({value:o}),h}({maxTicks:i=Math.max(2,i),bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&se(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return sT(t,this.chart.options.locale,this.options.ticks.format)}}class nS extends nk{static id="linear";static defaults={ticks:{callback:sz.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=rT(t)?t:0,this.max=rT(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=si(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001;return Math.ceil(e/Math.min(40,this._resolveTickFontOptions(0).lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}let n$=t=>Math.floor(r6(t)),nA=(t,e)=>Math.pow(10,n$(t)+e);function nP(t){return 1==t/Math.pow(10,n$(t))}function nE(t,e,i){let r=Math.pow(10,i),s=Math.floor(t/r);return Math.ceil(e/r)-s}class nC extends oI{static id="logarithmic";static defaults={ticks:{callback:sz.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=nk.prototype.parse.apply(this,[t,e]);if(0===i){this._zero=!0;return}return rT(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=rT(t)?Math.max(0,t):null,this.max=rT(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!rT(this._userMin)&&(this.min=t===nA(this.min,0)?nA(this.min,-1):nA(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,r=this.max,s=e=>i=t?i:e,a=t=>r=e?r:t;i===r&&(i<=0?(s(1),a(10)):(s(nA(i,-1)),a(nA(r,1)))),i<=0&&s(nA(r,-1)),r<=0&&a(nA(i,1)),this.min=i,this.max=r}buildTicks(){let t=this.options,e=function(t,{min:e,max:i}){e=rz(t.min,e);let r=[],s=n$(e),a=function(t,e){let i=n$(e-t);for(;nE(t,e,i)>10;)i++;for(;10>nE(t,e,i);)i--;return Math.min(i,n$(t))}(e,i),o=a<0?Math.pow(10,Math.abs(a)):1,n=Math.pow(10,a),l=s>a?Math.pow(10,s):0,h=Math.round((e-l)*o)/o,c=Math.floor((e-l)/n/10)*n*10,d=Math.floor((h-c)/Math.pow(10,a)),u=rz(t.min,Math.round((l+c+d*Math.pow(10,a))*o)/o);for(;u<i;)r.push({value:u,major:nP(u),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(d=2,o=++a>=0?1:o),u=Math.round((l+c+d*Math.pow(10,a))*o)/o;let f=rz(t.max,u);return r.push({value:f,major:nP(f),significand:d}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&se(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":sT(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=r6(t),this._valueRange=r6(this.max)-r6(t)}getPixelForValue(t){return((void 0===t||0===t)&&(t=this.min),null===t||isNaN(t))?NaN:this.getPixelForDecimal(t===this.min?0:(r6(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function nO(t){let e=t.ticks;if(e.display&&t.display){let t=s3(e.backdropPadding);return rL(e.font&&e.font.size,sj.font.size)+t.height}return 0}function nD(t,e,i,r,s){return t===r||t===s?{start:e-i/2,end:e+i/2}:t<r||t>s?{start:e-i,end:e}:{start:e,end:e+i}}function nT(t,e,i,r){let{ctx:s}=t;if(i)s.arc(t.xCenter,t.yCenter,e,0,rQ);else{let i=t.getPointPosition(0,e);s.moveTo(i.x,i.y);for(let a=1;a<r;a++)i=t.getPointPosition(a,e),s.lineTo(i.x,i.y)}}class nz extends nk{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:sz.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=s3(nO(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=rT(t)&&!isNaN(t)?t:0,this.max=rT(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/nO(this.options))}generateTickLabels(t){nk.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{let i=rR(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){let t=this.options;t.display&&t.pointLabels.display?function(t){let e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),r=[],s=[],a=t._pointLabels.length,o=t.options.pointLabels,n=o.centerPointLabels?rZ/a:0;for(let c=0;c<a;c++){var l,h;let a=o.setContext(t.getPointLabelContext(c));s[c]=a.padding;let d=t.getPointPosition(c,t.drawingArea+s[c],n),u=s4(a.font),f=(l=t.ctx,h=rO(h=t._pointLabels[c])?h:[h],{w:function(t,e,i,r){let s,a,o,n,l,h=(r=r||{}).data=r.data||{},c=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(h=r.data={},c=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let d=0,u=i.length;for(s=0;s<u;s++)if(null==(n=i[s])||rO(n)){if(rO(n))for(a=0,o=n.length;a<o;a++)null==(l=n[a])||rO(l)||(d=sW(t,h,c,d,l))}else d=sW(t,h,c,d,n);t.restore();let f=c.length/2;if(f>i.length){for(s=0;s<f;s++)delete h[c[s]];c.splice(0,f)}return d}(l,u.string,h),h:h.length*u.lineHeight});r[c]=f;let p=sn(t.getIndexAngle(c)+n),g=Math.round(180/rZ*p);!function(t,e,i,r,s){let a=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i)),n=0,l=0;r.start<e.l?(n=(e.l-r.start)/a,t.l=Math.min(t.l,e.l-n)):r.end>e.r&&(n=(r.end-e.r)/a,t.r=Math.max(t.r,e.r+n)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}(i,e,p,nD(g,d.x,f.w,0,180),nD(g,d.y,f.h,90,270))}t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){let r,s=[],a=t._pointLabels.length,o=t.options,{centerPointLabels:n,display:l}=o.pointLabels,h={extra:nO(o)/2,additionalAngle:n?rZ/a:0};for(let o=0;o<a;o++){h.padding=i[o],h.size=e[o];let a=function(t,e,i){var r,s,a,o,n,l,h;let c=t.drawingArea,{extra:d,additionalAngle:u,padding:f,size:p}=i,g=t.getPointPosition(e,c+d+f,u),m=Math.round(180/rZ*sn(g.angle+r5)),_=(r=g.y,s=p.h,90===(a=m)||270===a?r-=s/2:(a>270||a<90)&&(r-=s),r),y=0===(o=m)||180===o?"center":o<180?"left":"right",b=(n=g.x,l=p.w,"right"===(h=y)?n-=l:"center"===h&&(n-=l/2),n);return{visible:!0,x:g.x,y:_,textAlign:y,left:b,top:_,right:b+p.w,bottom:_+p.h}}(t,o,h);s.push(a),"auto"===l&&(a.visible=function(t,e){if(!e)return!0;let{left:i,top:r,right:s,bottom:a}=t;return!(sU({x:i,y:r},e)||sU({x:i,y:a},e)||sU({x:s,y:r},e)||sU({x:s,y:a},e))}(a,r),a.visible&&(r=a))}return s}(t,r,s)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){return sn(t*(rQ/(this._pointLabels.length||1))+si(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(rC(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(rC(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let i=e[t];return s9(this.getContext(),{label:i,index:t,type:"pointLabel"})}}getPointPosition(t,e,i=0){let r=this.getIndexAngle(t)-r5+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),nT(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t,e,i,r=this.ctx,s=this.options,{angleLines:a,grid:o,border:n}=s,l=this._pointLabels.length;if(s.pointLabels.display&&function(t,e){let{ctx:i,options:{pointLabels:r}}=t;for(let s=e-1;s>=0;s--){let e=t._pointLabelItems[s];if(!e.visible)continue;let a=r.setContext(t.getPointLabelContext(s));!function(t,e,i){let{left:r,top:s,right:a,bottom:o}=i,{backdropColor:n}=e;if(!rC(n)){let i=s5(e.borderRadius),l=s3(e.backdropPadding);t.fillStyle=n;let h=r-l.left,c=s-l.top,d=a-r+l.width,u=o-s+l.height;Object.values(i).some(t=>0!==t)?(t.beginPath(),sG(t,{x:h,y:c,w:d,h:u,radius:i}),t.fill()):t.fillRect(h,c,d,u)}}(i,a,e);let o=s4(a.font),{x:n,y:l,textAlign:h}=e;sJ(i,t._pointLabels[s],n,l+o.lineHeight/2,o,{color:a.color,textAlign:h,textBaseline:"middle"})}}(this,l),o.display&&this.ticks.forEach((t,i)=>{if(0!==i||0===i&&this.min<0){e=this.getDistanceFromCenterForValue(t.value);let r=this.getContext(i),s=o.setContext(r),a=n.setContext(r);!function(t,e,i,r,s){let a=t.ctx,o=e.circular,{color:n,lineWidth:l}=e;(o||r)&&n&&l&&!(i<0)&&(a.save(),a.strokeStyle=n,a.lineWidth=l,a.setLineDash(s.dash||[]),a.lineDashOffset=s.dashOffset,a.beginPath(),nT(t,i,o,r),a.closePath(),a.stroke(),a.restore())}(this,s,e,l,a)}}),a.display){for(r.save(),t=l-1;t>=0;t--){let o=a.setContext(this.getPointLabelContext(t)),{color:n,lineWidth:l}=o;l&&n&&(r.lineWidth=l,r.strokeStyle=n,r.setLineDash(o.borderDash),r.lineDashOffset=o.borderDashOffset,e=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),i=this.getPointPosition(t,e),r.beginPath(),r.moveTo(this.xCenter,this.yCenter),r.lineTo(i.x,i.y),r.stroke())}r.restore()}}drawBorder(){}drawLabels(){let t,e,i=this.ctx,r=this.options,s=r.ticks;if(!s.display)return;let a=this.getIndexAngle(0);i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(a),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((a,o)=>{if(0===o&&this.min>=0&&!r.reverse)return;let n=s.setContext(this.getContext(o)),l=s4(n.font);if(t=this.getDistanceFromCenterForValue(this.ticks[o].value),n.showLabelBackdrop){i.font=l.string,e=i.measureText(a.label).width,i.fillStyle=n.backdropColor;let r=s3(n.backdropPadding);i.fillRect(-e/2-r.left,-t-l.size/2-r.top,e+r.width,l.size+r.height)}sJ(i,a.label,0,-t,l,{color:n.color,strokeColor:n.textStrokeColor,strokeWidth:n.textStrokeWidth})}),i.restore()}drawTitle(){}}let nL={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},nF=Object.keys(nL);function nR(t,e){return t-e}function nI(t,e){if(rC(e))return null;let i=t._adapter,{parser:r,round:s,isoWeekday:a}=t._parseOpts,o=e;return("function"==typeof r&&(o=r(o)),rT(o)||(o="string"==typeof r?i.parse(o,r):i.parse(o)),null===o)?null:(s&&(o="week"===s&&(st(a)||!0===a)?i.startOf(o,"isoWeek",a):i.startOf(o,s)),+o)}function nj(t,e,i,r){let s=nF.length;for(let a=nF.indexOf(t);a<s-1;++a){let t=nL[nF[a]],s=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(s*t.size))<=r)return nF[a]}return nF[s-1]}function nW(t,e,i){if(i){if(i.length){let{lo:r,hi:s}=sd(i,e);t[i[r]>=e?i[r]:i[s]]=!0}}else t[e]=!0}function nN(t,e,i){let r,s,a=[],o={},n=e.length;for(r=0;r<n;++r)o[s=e[r]]=r,a.push({value:s,major:!1});return 0!==n&&i?function(t,e,i,r){let s,a,o=t._adapter,n=+o.startOf(e[0].value,r),l=e[e.length-1].value;for(s=n;s<=l;s=+o.add(s,1,r))(a=i[s])>=0&&(e[a].major=!0);return e}(t,a,o,i):a}class nV extends oI{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){let i=t.time||(t.time={}),r=this._adapter=new a7(t.adapters.date);r.init(e),rB(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:nI(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,e=this._adapter,i=t.time.unit||"day",{min:r,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function n(t){a||isNaN(t.min)||(r=Math.min(r,t.min)),o||isNaN(t.max)||(s=Math.max(s,t.max))}a&&o||(n(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&n(this.getMinMax(!1))),r=rT(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),s=rT(s)&&!isNaN(s)?s:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){let t=this.getLabelTimestamps(),e=1/0,i=-1/0;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){let t=this.options,e=t.time,i=t.ticks,r="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);let s=this.min,a=function(t,e,i){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>i;)s--;return r>0||s<t.length?t.slice(r,s):t}(r,s,this.max);return this._unit=e.unit||(i.autoSkip?nj(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(t,e,i,r,s){for(let a=nF.length-1;a>=nF.indexOf(i);a--){let i=nF[a];if(nL[i].common&&t._adapter.diff(s,r,i)>=e-1)return i}return nF[i?nF.indexOf(i):0]}(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=nF.indexOf(t)+1,i=nF.length;e<i;++e)if(nL[nF[e]].common)return nF[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&a.reverse(),nN(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,i,r=0,s=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),r=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),s=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;r=sh(r,0,a),s=sh(s,0,a),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){let t,e,i=this._adapter,r=this.min,s=this.max,a=this.options,o=a.time,n=o.unit||nj(o.minUnit,r,s,this._getLabelCapacity(r)),l=rL(a.ticks.stepSize,1),h="week"===n&&o.isoWeekday,c=st(h)||!0===h,d={},u=r;if(c&&(u=+i.startOf(u,"isoWeek",h)),u=+i.startOf(u,c?"day":n),i.diff(s,r,n)>1e5*l)throw Error(r+" and "+s+" are too far apart with stepSize of "+l+" "+n);let f="data"===a.ticks.source&&this.getDataTimestamps();for(t=u,e=0;t<s;t=+i.add(t,l,n),e++)nW(d,t,f);return(t===s||"ticks"===a.bounds||1===e)&&nW(d,t,f),Object.keys(d).sort(nR).map(t=>+t)}getLabelForValue(t){let e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){let i=this.options.time.displayFormats,r=this._unit,s=e||i[r];return this._adapter.format(t,s)}_tickFormatFunction(t,e,i,r){let s=this.options,a=s.ticks.callback;if(a)return rR(a,[t,e,i],this);let o=s.time.displayFormats,n=this._unit,l=this._majorUnit,h=n&&o[n],c=l&&o[l],d=i[e],u=l&&c&&d&&d.major;return this._adapter.format(t,r||(u?c:h))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)(r=t[e]).label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let e=this.options.ticks,i=this.ctx.measureText(t).width,r=si(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(r),a=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:i*s+o*a,h:i*a+o*s}}_getLabelCapacity(t){let e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,s=this._tickFormatFunction(t,0,nN(this,[t],this._majorUnit),r),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;let r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)i=i.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){let t,e,i=this._cache.labels||[];if(i.length)return i;let r=this.getLabels();for(t=0,e=r.length;t<e;++t)i.push(nI(this,r[t]));return this._cache.labels=this._normalized?i:this.normalize(i)}normalize(t){return sm(t.sort(nR))}}function nH(t,e,i){let r,s,a,o,n=0,l=t.length-1;i?(e>=t[n].pos&&e<=t[l].pos&&({lo:n,hi:l}=su(t,"pos",e)),{pos:r,time:a}=t[n],{pos:s,time:o}=t[l]):(e>=t[n].time&&e<=t[l].time&&({lo:n,hi:l}=su(t,"time",e)),{time:r,pos:a}=t[n],{time:s,pos:o}=t[l]);let h=s-r;return h?a+(o-a)*(e-r)/h:a}class nB extends nV{static id="timeseries";static defaults=nV.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=nH(e,this.min),this._tableRange=nH(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let e,i,r,{min:s,max:a}=this,o=[],n=[];for(e=0,i=t.length;e<i;++e)(r=t[e])>=s&&r<=a&&o.push(r);if(o.length<2)return[{time:s,pos:0},{time:a,pos:1}];for(e=0,i=o.length;e<i;++e)Math.round((o[e+1]+o[e-1])/2)!==(r=o[e])&&n.push({time:r,pos:e/(i-1)});return n}_generate(){let t=this.min,e=this.max,i=super.getDataTimestamps();return i.includes(t)&&i.length||i.splice(0,0,t),i.includes(e)&&1!==i.length||i.push(e),i.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t}getDecimalForValue(t){return(nH(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return nH(this._table,i*this._tableRange+this._minPos,!0)}}var nU=function(){if("u">typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),nq=function(t){var e,i=[];for(t=[].concat(t);t.length;)"string"==typeof(e=t.pop())?i.unshift.apply(i,e.split("\n")):Array.isArray(e)?t.push.apply(t,e):rC(t)||i.unshift(""+e);return i},nX=function(t,e,i){var r,s=[].concat(e),a=s.length,o=t.font,n=0;for(r=0,t.font=i.string;r<a;++r)n=Math.max(t.measureText(s[r]).width,n);return t.font=o,{height:a*i.lineHeight,width:n}},nY=function(t,e){var i,r,s,a,o=t.slice(),n=[];for(i=0,s=e.length;i<s;++i)a=e[i],-1===(r=o.indexOf(a))?n.push([a,1]):o.splice(r,1);for(i=0,s=o.length;i<s;++i)n.push([o[i],-1]);return n};function nK(t,e){var i=e.x,r=e.y;if(null===i)return{x:0,y:-1};if(null===r)return{x:1,y:0};var s=t.x-i,a=t.y-r,o=Math.sqrt(s*s+a*a);return{x:o?s/o:0,y:o?a/o:-1}}function nJ(t,e,i){var r=0;return t<i.left?r|=1:t>i.right&&(r|=2),e<i.top?r|=8:e>i.bottom&&(r|=4),r}function nG(t,e){var i,r,s=e.anchor,a=t;return e.clamp&&(a=function(t,e){for(var i,r,s,a=t.x0,o=t.y0,n=t.x1,l=t.y1,h=nJ(a,o,e),c=nJ(n,l,e);h|c&&!(h&c);)8&(i=h||c)?(r=a+(n-a)*(e.top-o)/(l-o),s=e.top):4&i?(r=a+(n-a)*(e.bottom-o)/(l-o),s=e.bottom):2&i?(s=o+(l-o)*(e.right-a)/(n-a),r=e.right):1&i&&(s=o+(l-o)*(e.left-a)/(n-a),r=e.left),i===h?h=nJ(a=r,o=s,e):c=nJ(n=r,l=s,e);return{x0:a,x1:n,y0:o,y1:l}}(a,e.area)),"start"===s?(i=a.x0,r=a.y0):"end"===s?(i=a.x1,r=a.y1):(i=(a.x0+a.x1)/2,r=(a.y0+a.y1)/2),function(t,e,i,r,s){switch(s){case"center":i=r=0;break;case"bottom":i=0,r=1;break;case"right":i=1,r=0;break;case"left":i=-1,r=0;break;case"top":i=0,r=-1;break;case"start":i=-i,r=-r;break;case"end":break;default:s*=Math.PI/180,i=Math.cos(s),r=Math.sin(s)}return{x:t,y:e,vx:i,vy:r}}(i,r,t.vx,t.vy,e.align)}var nZ=function(t,e){var i=(t.startAngle+t.endAngle)/2,r=Math.cos(i),s=Math.sin(i),a=t.innerRadius,o=t.outerRadius;return nG({x0:t.x+r*a,y0:t.y+s*a,x1:t.x+r*o,y1:t.y+s*o,vx:r,vy:s},e)},nQ=function(t,e){var i=nK(t,e.origin),r=i.x*t.options.radius,s=i.y*t.options.radius;return nG({x0:t.x-r,y0:t.y-s,x1:t.x+r,y1:t.y+s,vx:i.x,vy:i.y},e)},n0=function(t,e){var i=nK(t,e.origin),r=t.x,s=t.y,a=0,o=0;return t.horizontal?(r=Math.min(t.x,t.base),a=Math.abs(t.base-t.x)):(s=Math.min(t.y,t.base),o=Math.abs(t.base-t.y)),nG({x0:r,y0:s+o,x1:r+a,y1:s,vx:i.x,vy:i.y},e)},n1=function(t,e){var i=nK(t,e.origin);return nG({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:i.x,vy:i.y},e)},n2=function(t){return Math.round(t*nU)/nU},n5=function(t,e,i,r){this._config=t,this._index=r,this._model=null,this._rects=null,this._ctx=e,this._el=i};rH(n5.prototype,{_modelize:function(t,e,i,r){var s,a=this._index,o=s4(s6([i.font,{}],r,a)),n=s6([i.color,sj.color],r,a);return{align:s6([i.align,"center"],r,a),anchor:s6([i.anchor,"center"],r,a),area:r.chart.chartArea,backgroundColor:s6([i.backgroundColor,null],r,a),borderColor:s6([i.borderColor,null],r,a),borderRadius:s6([i.borderRadius,0],r,a),borderWidth:s6([i.borderWidth,0],r,a),clamp:s6([i.clamp,!1],r,a),clip:s6([i.clip,!1],r,a),color:n,display:t,font:o,lines:e,offset:s6([i.offset,4],r,a),opacity:s6([i.opacity,1],r,a),origin:function(t,e){var i=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!i)return null;if(void 0!==i.xCenter&&void 0!==i.yCenter)return{x:i.xCenter,y:i.yCenter};var r=i.getBasePixel();return t.horizontal?{x:r,y:null}:{x:null,y:r}}(this._el,r),padding:s3(s6([i.padding,4],r,a)),positioner:(s=this._el)instanceof nr?nZ:s instanceof nf?nQ:s instanceof nb?n0:n1,rotation:s6([i.rotation,0],r,a)*(Math.PI/180),size:nX(this._ctx,e,o),textAlign:s6([i.textAlign,"start"],r,a),textShadowBlur:s6([i.textShadowBlur,0],r,a),textShadowColor:s6([i.textShadowColor,n],r,a),textStrokeColor:s6([i.textStrokeColor,n],r,a),textStrokeWidth:s6([i.textStrokeWidth,0],r,a)}},update:function(t){var e,i,r,s,a,o,n,l,h,c,d=null,u=null,f=this._index,p=this._config,g=s6([p.display,!0],t,f);g&&(e=t.dataset.data[f],(r=rC(i=rL(rR(p.formatter,[e,t]),e))?[]:nq(i)).length)&&(a=(s=d=this._modelize(g,r,p,t)).borderWidth||0,o=s.padding,n=s.size.height,h=-(l=s.size.width)/2,c=-n/2,u={frame:{x:h-o.left-a,y:c-o.top-a,w:l+o.width+2*a,h:n+o.height+2*a},text:{x:h,y:c,w:l,h:n}}),this._model=d,this._rects=u},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var i,r,s,a,o,n=t.ctx,l=this._model,h=this._rects;this.visible()&&(n.save(),l.clip&&(i=l.area,n.beginPath(),n.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),n.clip()),n.globalAlpha=Math.max(0,Math.min(l.opacity,1)),n.translate(n2(e.x),n2(e.y)),n.rotate(l.rotation),r=h.frame,s=l.backgroundColor,a=l.borderColor,o=l.borderWidth,(s||a&&o)&&(n.beginPath(),function(t,e,i,r,s,a){var o=Math.PI/2;if(a){var n=Math.min(a,s/2,r/2),l=e+n,h=i+n,c=e+r-n,d=i+s-n;t.moveTo(e,h),l<c&&h<d?(t.arc(l,h,n,-Math.PI,-o),t.arc(c,h,n,-o,0),t.arc(c,d,n,0,o),t.arc(l,d,n,o,Math.PI)):l<c?(t.moveTo(l,i),t.arc(c,h,n,-o,o),t.arc(l,h,n,o,Math.PI+o)):h<d?(t.arc(l,h,n,-Math.PI,0),t.arc(l,d,n,0,Math.PI)):t.arc(l,h,n,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,i)}else t.rect(e,i,r,s)}(n,n2(r.x)+o/2,n2(r.y)+o/2,n2(r.w)-o,n2(r.h)-o,l.borderRadius),n.closePath(),s&&(n.fillStyle=s,n.fill()),a&&o&&(n.strokeStyle=a,n.lineWidth=o,n.lineJoin="miter",n.stroke())),function(t,e,i,r){var s,a,o,n,l,h,c=r.textAlign,d=r.color,u=!!d,f=r.font,p=e.length,g=r.textStrokeColor,m=r.textStrokeWidth,_=g&&m;if(p&&(u||_))for(s=i,a=f.lineHeight,o=s.w,n=s.x,l=s.y+a/2,"center"===c?n+=o/2:("end"===c||"right"===c)&&(n+=o),i={h:a,w:o,x:n,y:l},t.font=f.string,t.textAlign=c,t.textBaseline="middle",t.shadowBlur=r.textShadowBlur,t.shadowColor=r.textShadowColor,u&&(t.fillStyle=d),_&&(t.lineJoin="round",t.lineWidth=m,t.strokeStyle=g),h=0,p=e.length;h<p;++h)!function(t,e,i){var r=t.shadowBlur,s=i.stroked,a=n2(i.x),o=n2(i.y),n=n2(i.w);s&&t.strokeText(e,a,o,n),i.filled&&(r&&s&&(t.shadowBlur=0),t.fillText(e,a,o,n),r&&s&&(t.shadowBlur=r))}(t,e[h],{stroked:_,filled:u,w:i.w,x:i.x,y:i.y+i.h*h})}(n,l.lines,h.text,l),n.restore())}});var n3=Number.MIN_SAFE_INTEGER||-0x1fffffffffffff,n4=Number.MAX_SAFE_INTEGER||0x1fffffffffffff;function n6(t,e,i){var r=Math.cos(i),s=Math.sin(i),a=e.x,o=e.y;return{x:a+r*(t.x-a)-s*(t.y-o),y:o+s*(t.x-a)+r*(t.y-o)}}function n9(t,e){var i,r,s,a,o,n=n4,l=n3,h=e.origin;for(i=0;i<t.length;++i)s=(r=t[i]).x-h.x,a=r.y-h.y,n=Math.min(n,o=e.vx*s+e.vy*a),l=Math.max(l,o);return{min:n,max:l}}function n8(t,e){var i=e.x-t.x,r=e.y-t.y,s=Math.sqrt(i*i+r*r);return{vx:(e.x-t.x)/s,vy:(e.y-t.y)/s,origin:t,ln:s}}var n7=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function lt(t,e,i){var r=e.positioner(t,e),s=r.vx,a=r.vy;if(!s&&!a)return{x:r.x,y:r.y};var o=i.w,n=i.h,l=e.rotation,h=Math.abs(o/2*Math.cos(l))+Math.abs(n/2*Math.sin(l)),c=Math.abs(o/2*Math.sin(l))+Math.abs(n/2*Math.cos(l)),d=1/Math.max(Math.abs(s),Math.abs(a));return h*=s*d,c*=a*d,h+=e.offset*s,c+=e.offset*a,{x:r.x+h,y:r.y+c}}rH(n7.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,i){this._rotation=i,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this._rect;return!((t=n6(t,this.center(),-this._rotation)).x<e.x-1||t.y<e.y-1||t.x>e.x+e.w+2||t.y>e.y+e.h+2)},intersects:function(t){var e,i,r,s=this._points(),a=t._points(),o=[n8(s[0],s[1]),n8(s[0],s[3])];for(this._rotation!==t._rotation&&o.push(n8(a[0],a[1]),n8(a[0],a[3])),e=0;e<o.length;++e)if(i=n9(s,o[e]),r=n9(a,o[e]),i.max<r.min||r.max<i.min)return!1;return!0},_points:function(){var t=this._rect,e=this._rotation,i=this.center();return[n6({x:t.x,y:t.y},i,e),n6({x:t.x+t.w,y:t.y},i,e),n6({x:t.x+t.w,y:t.y+t.h},i,e),n6({x:t.x,y:t.y+t.h},i,e)]}});var le={prepare:function(t){var e,i,r,s,a,o=[];for(e=0,r=t.length;e<r;++e)for(i=0,s=t[e].length;i<s;++i)a=t[e][i],o.push(a),a.$layout={_box:new n7,_hidable:!1,_visible:!0,_set:e,_idx:a._index};return o.sort(function(t,e){var i=t.$layout,r=e.$layout;return i._idx===r._idx?r._set-i._set:r._idx-i._idx}),this.update(o),o},update:function(t){var e,i,r,s,a,o=!1;for(e=0,i=t.length;e<i;++e)s=(r=t[e]).model(),(a=r.$layout)._hidable=s&&"auto"===s.display,a._visible=r.visible(),o|=a._hidable;o&&function(t){var e,i,r,s,a,o,n;for(e=0,i=t.length;e<i;++e)(s=(r=t[e]).$layout)._visible&&(n=new Proxy(r._el,{get:(t,e)=>t.getProps([e],!0)[e]}),a=r.geometry(),o=lt(n,r.model(),a),s._box.update(o,a,r.rotation()));!function(t,e){var i,r,s,a;for(i=t.length-1;i>=0;--i)for(s=t[i].$layout,r=i-1;r>=0&&s._visible;--r)(a=t[r].$layout)._visible&&s._box.intersects(a._box)&&e(s,a)}(t,function(t,e){var i=t._hidable,r=e._hidable;i&&r||r?e._visible=!1:i&&(t._visible=!1)})}(t)},lookup:function(t,e){var i,r;for(i=t.length-1;i>=0;--i)if((r=t[i].$layout)&&r._visible&&r._box.contains(e))return t[i];return null},draw:function(t,e){var i,r,s,a,o,n;for(i=0,r=e.length;i<r;++i)(a=(s=e[i]).$layout)._visible&&(o=s.geometry(),n=lt(s._el,s.model(),o),a._box.update(n,o,s.rotation()),s.draw(t,n))}},li="$datalabels",lr="$default";function ls(t,e,i,r){if(e){var s,a=i.$context,o=i.$groups;!e[o._set]||(s=e[o._set][o._key])&&!0===rR(s,[a,r])&&(t[li]._dirty=!0,i.update(a))}}class la extends e8{static{this.styles=ea`
    :host {
      display: flex;
      align-items: center;
      gap: 8px;
    }
  `}willUpdate(t){(t.has("hass")||t.has("forecast"))&&(this.suntimesInfo=i$(this.hass,this.forecast.datetime))}createRenderRoot(){return this}render(){if(!this.forecast)return eX;let{label:t,className:e}=this.getDateInfo(),i=!!("hourly"===this.forecastType&&this.config.forecast?.show_sun_times)&&!!this.suntimesInfo&&this.suntimesInfo.isNightTime;return eB`
      <div class="wfc-forecast-slot-time wfc-label ${e||""}">
        ${t}
      </div>
      <wfc-weather-condition-icon-provider
        .hass=${this.hass}
        .config=${this.config}
        .state=${this.forecast.condition}
        .isNightTime=${i}
      ></wfc-weather-condition-icon-provider>
    `}getDateInfo(){let t,e;if("hourly"!==this.forecastType)return{label:ix(this.hass,this.forecast.datetime)};let i=new Date(this.forecast.datetime),r=this.forecast.groupEndtime?new Date(this.forecast.groupEndtime):((e=new Date(i)).setMinutes(59,59,999),e),s=i;if(this.config.forecast?.show_sun_times&&this.suntimesInfo){let{sunrise:e,sunset:a}=this.suntimesInfo,o=t=>{let e=new Date(i);return e.setHours(t.getHours(),t.getMinutes()),e.getTime()>=i.getTime()&&e.getTime()<=r.getTime()};o(e)?(t="wfc-sunrise",s=e):o(a)&&(t="wfc-sunset",s=a)}return{label:t?((t,e,i=!1)=>iS(e).toLocaleTimeString(ik(t),{hour:"numeric",minute:"2-digit",hour12:!i&&iM(t)}))(this.hass,s,!0):((t,e,i=!1)=>iS(e).toLocaleTimeString(ik(t),{hour:"numeric",hour12:!i&&iM(t)}))(this.hass,s,!0),className:t}}}k([ew({attribute:!1})],la.prototype,"hass",void 0),k([ew({attribute:!1})],la.prototype,"forecast",void 0),k([ew({attribute:!1})],la.prototype,"forecastType",void 0),k([ew({attribute:!1})],la.prototype,"config",void 0),la=k([t8("wfc-forecast-header-items")],la),o7.register(class extends aG{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,r){return aQ(t,e,i,r)}parseArrayData(t,e,i,r){return aQ(t,e,i,r)}parseObjectData(t,e,i,r){let s,a,o,n,{iScale:l,vScale:h}=t,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,u="x"===l.axis?c:d,f="x"===h.axis?c:d,p=[];for(s=i,a=i+r;s<a;++s)n=e[s],(o={})[l.axis]=l.parse(rX(n,u),s),p.push(aZ(rX(n,f),o,h,s));return p}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);let s=i._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let{iScale:e,vScale:i}=this._cachedMeta,r=this.getParsed(t),s=r._custom,a=a0(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+e.getLabelForValue(r[e.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){let e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){let s="reset"===r,{index:a,_cachedMeta:{vScale:o}}=this,n=o.getBasePixel(),l=o.isHorizontal(),h=this._getRuler(),{sharedOptions:c,includeOptions:d}=this._getSharedOptions(e,r);for(let u=e;u<e+i;u++){let e=this.getParsed(u),i=s||rC(e[o.axis])?{base:n,head:n}:this._calculateBarValuePixels(u),f=this._calculateBarIndexPixels(u,h),p=(e._stacks||{})[o.axis],g={horizontal:l,base:i.base,enableBorderRadius:!p||a0(e._custom)||a===p._top||a===p._bottom,x:l?i.head:f.center,y:l?f.center:i.head,height:l?f.size:Math.abs(i.size),width:l?Math.abs(i.size):f.size};d&&(g.options=c||this.resolveDataElementOptions(u,t[u].active?"active":r));let m=g.options||t[u].options;!function(t,e,i,r){let s,a,o,n,l,h=e.borderSkipped,c={};if(!h){t.borderSkipped=c;return}if(!0===h){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:d,end:u,reverse:f,top:p,bottom:g}=(t.horizontal?(s=t.base>t.x,a="left",o="right"):(s=t.base<t.y,a="bottom",o="top"),s?(n="end",l="start"):(n="start",l="end"),{start:a,end:o,reverse:s,top:n,bottom:l});"middle"===h&&i&&(t.enableBorderRadius=!0,(i._top||0)===r?h=p:(i._bottom||0)===r?h=g:(c[a1(g,d,u,f)]=!0,h=p)),c[a1(h,d,u,f)]=!0,t.borderSkipped=c}(g,m,p,a),function(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?.33*(1===i):e}(g,m,h.ratio),this.updateElement(t[u],u,g,r)}}_getStacks(t,e){let{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),s=i.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(e),n=o&&o[i.axis],l=t=>{let e=t._parsed.find(t=>t[i.axis]===n),r=e&&e[t.vScale.axis];if(rC(r)||isNaN(r))return!0};for(let i of r)if(!(void 0!==e&&l(i))&&((!1===s||-1===a.indexOf(i.stack)||void 0===s&&void 0===i.stack)&&a.push(i.stack),i.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){let t={},e=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[rL("x"===this.chart.options.indexAxis?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){let r=this._getStacks(t,i),s=void 0!==e?r.indexOf(e):-1;return -1===s?r.length-1:s}_getRuler(){let t,e,i=this.options,r=this._cachedMeta,s=r.iScale,a=[];for(t=0,e=r.data.length;t<e;++t)a.push(s.getPixelForValue(this.getParsed(t)[s.axis],t));let o=i.barThickness;return{min:o||function(t){let e,i,r,s,a=t.iScale,o=function(t,e){if(!t._cache.$bar){let i=t.getMatchingVisibleMetas(e),r=[];for(let e=0,s=i.length;e<s;e++)r=r.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=sm(r.sort((t,e)=>t-e))}return t._cache.$bar}(a,t.type),n=a._length,l=()=>{32767!==r&&-32768!==r&&(rK(s)&&(n=Math.min(n,Math.abs(r-s)||n)),s=r)};for(e=0,i=o.length;e<i;++e)r=a.getPixelForValue(o[e]),l();for(e=0,s=void 0,i=a.ticks.length;e<i;++e)r=a.getPixelForTick(e),l();return n}(r),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:i.grouped,ratio:o?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(t){let e,i,{_cachedMeta:{vScale:r,_stacked:s,index:a},options:{base:o,minBarLength:n}}=this,l=o||0,h=this.getParsed(t),c=h._custom,d=a0(c),u=h[r.axis],f=0,p=s?this.applyStack(r,h,s):u;p!==u&&(f=p-u,p=u),d&&(u=c.barStart,p=c.barEnd-c.barStart,0!==u&&r9(u)!==r9(c.barEnd)&&(f=0),f+=u);let g=rC(o)||d?f:o,m=r.getPixelForValue(g);if(Math.abs(i=(e=this.chart.getDataVisibility(t)?r.getPixelForValue(f+p):m)-m)<n){var _;i=(0!==(_=i)?r9(_):(r.isHorizontal()?1:-1)*(r.min>=l?1:-1))*n,u===l&&(m-=i/2);let t=r.getPixelForDecimal(0),o=r.getPixelForDecimal(1),c=Math.min(t,o);e=(m=Math.max(Math.min(m,Math.max(t,o)),c))+i,s&&!d&&(h._stacks[r.axis]._visualValues[a]=r.getValueForPixel(e)-r.getValueForPixel(m))}if(m===r.getPixelForValue(l)){let t=r9(i)*r.getLineWidthForValue(l)/2;m+=t,i-=t}return{size:i,base:m,head:e,center:e+i/2}}_calculateBarIndexPixels(t,e){let i,r,s=e.scale,a=this.options,o=a.skipNull,n=rL(a.maxBarThickness,1/0),l=this._getAxisCount();if(e.grouped){var h,c;let s,d,u,f,p,g,m,_,y,b=o?this._getStackCount(t):e.stackCount,v="flex"===a.barThickness?(h=b*l,d=(s=e.pixels)[t],u=t>0?s[t-1]:null,f=t<s.length-1?s[t+1]:null,p=a.categoryPercentage,null===u&&(u=d-(null===f?e.end-e.start:f-d)),null===f&&(f=d+d-u),g=d-(d-Math.min(u,f))/2*p,{chunk:Math.abs(f-u)/2*p/h,ratio:a.barPercentage,start:g}):(c=b*l,rC(y=a.barThickness)?(m=e.min*a.categoryPercentage,_=a.barPercentage):(m=y*c,_=1),{chunk:m/c,ratio:_,start:e.pixels[t]-m/2}),x="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf(rL(x,this.getFirstScaleIdForIndexAxis())),M=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+w;i=v.start+v.chunk*M+v.chunk/2,r=Math.min(n,v.chunk*v.ratio)}else i=s.getPixelForValue(this.getParsed(t)[s.axis],t),r=Math.min(n,e.min*e.ratio);return{base:i-r/2,head:i+r/2,center:i,size:r}}draw(){let t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length,s=0;for(;s<r;++s)null===this.getParsed(s)[e.axis]||i[s].hidden||i[s].draw(this._ctx)}},nb,class extends aG{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let e=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=e,a=this.chart._animationsDisabled,{start:o,count:n}=sx(e,r,a);this._drawStart=o,this._drawCount=n,sw(e)&&(o=0,n=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;let l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:l},t),this.updateElements(r,o,n,t)}updateElements(t,e,i,r){let s="reset"===r,{iScale:a,vScale:o,_stacked:n,_dataset:l}=this._cachedMeta,{sharedOptions:h,includeOptions:c}=this._getSharedOptions(e,r),d=a.axis,u=o.axis,{spanGaps:f,segment:p}=this.options,g=st(f)?f:1/0,m=this.chart._animationsDisabled||s||"none"===r,_=e+i,y=t.length,b=e>0&&this.getParsed(e-1);for(let i=0;i<y;++i){let f=t[i],y=m?f:{};if(i<e||i>=_){y.skip=!0;continue}let v=this.getParsed(i),x=rC(v[u]),w=y[d]=a.getPixelForValue(v[d],i),M=y[u]=s||x?o.getBasePixel():o.getPixelForValue(n?this.applyStack(o,v,n):v[u],i);y.skip=isNaN(w)||isNaN(M)||x,y.stop=i>0&&Math.abs(v[d]-b[d])>g,p&&(y.parsed=v,y.raw=l.data[i]),c&&(y.options=h||this.resolveDataElementOptions(i,f.active?"active":r)),m||this.updateElement(f,i,y,r),b=v}}getMaxOverflow(){let t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];return r.length?Math.max(i,r[0].size(this.resolveDataElementOptions(0)),r[r.length-1].size(this.resolveDataElementOptions(r.length-1)))/2:i}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},nd,nf,nS,class extends oI{static id="category";static defaults={ticks:{callback:nw}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let e=this._addedLabels;if(e.length){let t=this.getLabels();for(let{index:i,label:r}of e)t[i]===r&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){let i,r;if(rC(t))return null;let s=this.getLabels();return i=e=isFinite(e)&&s[e]===t?e:function(t,e,i,r){let s=t.indexOf(e);if(-1===s){var a;return a=i,"string"==typeof e?(a=t.push(e)-1,r.unshift({index:a,label:e})):isNaN(e)&&(a=null),a}return s!==t.lastIndexOf(e)?i:s}(s,t,rL(e,t),this._addedLabels),r=s.length-1,null===i?null:sh(Math.round(i),0,r)}determineDataLimits(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),{min:i,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){let t=this.min,e=this.max,i=this.options.offset,r=[],s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-!i,1),this._startValue=this.min-.5*!!i;for(let i=t;i<=e;i++)r.push({value:i});return r}getLabelForValue(t){return nw.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},{id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(rC(t))return null;var e,i,r,s=t;if(rD(t))if(rC(t.label))if(rC(t.r))for(r=0,s="",i=(e=Object.keys(t)).length;r<i;++r)s+=(0!==r?", ":"")+e[r]+": "+t[e[r]];else s=t.r;else s=t.label;return""+s},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(t){t[li]={_actives:[]}},beforeUpdate:function(t){var e=t[li];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,i){var r,s,a,o,n,l,h,c,d,u,f,p,g,m,_=e.index,y=t[li],b=y._datasets[_]=[],v=t.isDatasetVisible(_),x=t.data.datasets[_],w=(r=i,o=x.datalabels,n={},l=[],!1===o?null:(!0===o&&(o={}),a=Object.keys(s=(r=rH({},[r,o])).labels||{}),delete r.labels,a.length?a.forEach(function(t){s[t]&&l.push(rH({},[r,s[t],{_key:t}]))}):l.push(r),n=l.reduce(function(t,e){return rI(e.listeners||{},function(i,r){t[r]=t[r]||{},t[r][e._key||lr]=i}),delete e.listeners,t},{}),{labels:l,listeners:n})),M=e.meta.data||[],k=t.ctx;for(k.save(),h=0,d=M.length;h<d;++h)if((g=M[h])[li]=[],v&&g&&t.getDataVisibility(h)&&!g.skip)for(c=0,u=w.labels.length;c<u;++c)p=(f=w.labels[c])._key,(m=new n5(f,k,g,h)).$groups={_set:_,_key:p||lr},m.$context={active:!1,chart:t,dataIndex:h,dataset:x,datasetIndex:_},m.update(m.$context),g[li].push(m),b.push(m);k.restore(),rH(y._listeners,w.listeners,{merger:function(t,i,r){i[t]=i[t]||{},i[t][e.index]=r[t],y._listened=!0}})},afterUpdate:function(t){t[li]._labels=le.prepare(t[li]._datasets)},afterDatasetsDraw:function(t){le.draw(t,t[li]._labels)},beforeEvent:function(t,e){if(t[li]._listened){var i,r,s,a=e.event;switch(a.type){case"mousemove":case"mouseout":!function(t,e){var i,r,s,a,o,n=t[li],l=n._listeners;if(l.enter||l.leave){if("mousemove"===e.type)o=le.lookup(n._labels,e);else if("mouseout"!==e.type)return;a=n._hovered,n._hovered=o,i=o,(a||i)&&(a?i?a!==i&&(s=r=!0):s=!0:r=!0,s&&ls(t,l.leave,a,e),r&&ls(t,l.enter,i,e))}}(t,a);break;case"click":(s=(r=(i=t[li])._listeners.click)&&le.lookup(i._labels,a))&&ls(t,r,s,a)}}},afterEvent:function(t){var e,i,r,s,a,o,n,l=t[li],h=nY(l._actives,l._actives=t.getActiveElements());for(e=0,i=h.length;e<i;++e)if((a=h[e])[1])for(r=0,s=(n=a[0].element[li]||[]).length;r<s;++r)(o=n[r]).$context.active=1===a[1],o.update(o.$context);(l._dirty||h.length)&&(le.update(l._labels),t.render()),delete l._dirty}});class lo extends e8{createRenderRoot(){return this}disconnectedCallback(){super.disconnectedCallback(),this._chart?.destroy(),this._chart=null}firstUpdated(){this.initChart()}updated(t){if(super.updated(t),(t.has("forecast")||t.has("weatherEntity")||t.has("hass")||t.has("forecastType")||t.has("itemWidth"))&&this.itemWidth>0&&this.forecast?.length)if(this._chart){let e=t.has("forecastType")||t.has("itemWidth");this.updateChartData(e)}else this.initChart()}render(){let t=this.safeForecast;if(!t?.length||this.itemWidth<=0)return eX;let e=t.length,i=Math.max(e-1,0),r=`calc(${e} * var(--forecast-item-width) + ${i} * var(--forecast-item-gap))`;return eB`
      <div
        class="wfc-scroll-container"
        style=${re({"--wfc-forecast-chart-width":r})}
        .actionHandler=${iV({hasHold:this.config.forecast_action?.hold_action!==void 0,hasDoubleClick:this.config.forecast_action?.double_tap_action!==void 0,stopPropagation:!0})}
        @pointerdown=${this._onPointerDown}
        @action=${this._onForecastAction}
      >
        <div class="wfc-forecast-chart-header">
          ${this.renderHeaderItems(t)}
        </div>

        <div class="wfc-chart-clipper" style=${re({width:"var(--wfc-forecast-chart-width)",overflow:"hidden"})}>
          <div
            class="wfc-forecast-chart"
            id="chart-container"
            style=${re({width:"calc(var(--wfc-forecast-chart-width) + var(--forecast-item-gap))",marginLeft:"calc(var(--forecast-item-gap) / -2)",display:"block"})}
          >
            <canvas id="forecast-canvas"></canvas>
          </div>
        </div>

        <div class="wfc-forecast-chart-footer">
          ${t.map(t=>eB`
              <div class="wfc-forecast-slot">
                <wfc-forecast-info
                  .hass=${this.hass}
                  .weatherEntity=${this.weatherEntity}
                  .forecast=${t}
                  .config=${this.config}
                  .hidePrecipitation=${!0}
                ></wfc-forecast-info>
              </div>
            `)}
        </div>
      </div>
    `}initChart(){if(!this._canvas||!this.forecast?.length)return;let t=this.getChartConfig();t&&(this._chart=new o7(this._canvas,t))}updateChartData(t=!1){if(!this._chart||!this.forecast?.length)return;let e=this.getChartConfig();this._chart.data=e.data,this._chart.options.scales&&e.options?.scales&&(this._chart.options.scales=e.options.scales),t&&this._chart.resize(),this._chart.update("none")}getChartConfig(){let t=this.safeForecast,e=getComputedStyle(this),i=e.getPropertyValue("--wfc-chart-grid-color"),r=e.getPropertyValue("--wfc-chart-temp-high-label-color"),s=e.getPropertyValue("--wfc-chart-temp-low-label-color"),a=e.getPropertyValue("--wfc-chart-precipitation-label-color"),o=e.getPropertyValue("--wfc-precipitation-bar-color"),{minTemp:n,maxTemp:l}=this.computeScaleLimits(t),h=i1(iG(this.hass,this.weatherEntity,"precipitation"),this.forecastType),c=this.getTemperatureLineStyle(e,"temperature"),d=this.getTemperatureLineStyle(e,"templow");return{type:"line",data:{labels:t.map(t=>t.datetime),datasets:[{data:t.map(t=>t.temperature),yAxisID:"yTemp",datalabels:{anchor:"end",align:"top",color:r,formatter:t=>null!=t?`${i4(this.hass,this.weatherEntity,t,this.config.forecast?.temperature_precision,!0)}\xb0`:null},...c},{data:t.map(t=>t.templow??null),yAxisID:"yTemp",datalabels:{anchor:"start",align:"bottom",color:s,formatter:t=>null!=t?`${i4(this.hass,this.weatherEntity,t,this.config.forecast?.temperature_precision,!0)}\xb0`:null},...d},{data:t.map(t=>t.precipitation&&0!==t.precipitation?t.precipitation:null),backgroundColor:o,type:"bar",yAxisID:"yPrecip",borderWidth:0,borderRadius:{topLeft:3,topRight:3},categoryPercentage:.6,barPercentage:.8,order:0,datalabels:{anchor:"start",align:"end",offset:-22,color:a,formatter:t=>((t,e)=>{if(void 0===t)return"";let i="mm"===e?t:25.4*t;if(0===i||i<.05)return"";let r="in"===e?t.toFixed(2):t.toFixed(1);return`${r} ${e}`})(t,iG(this.hass,this.weatherEntity,"precipitation"))}}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{autoPadding:!1,padding:{top:10,bottom:10,left:0,right:0}},elements:{line:{tension:.3}},scales:{x:{offset:!0,border:{color:i,dash:[4,4]},grid:{offset:!0,display:!0,color:i,drawTicks:!0},ticks:{display:!1}},yTemp:{type:"linear",display:!1,min:n,max:l,position:"left",grid:{display:!1},ticks:{display:!1}},yPrecip:{type:"linear",display:!1,position:"right",beginAtZero:!0,suggestedMin:0,suggestedMax:h,grid:{display:!1,drawOnChartArea:!1},ticks:{display:!1}}}}}}getTemperatureLineStyle(t,e){let i=t.getPropertyValue("temperature"===e?"--wfc-chart-temp-high-line-color":"--wfc-chart-temp-low-line-color"),r=e=>this.computeTemperatureLineColor(e,t,i);return{borderColor:r,pointBorderColor:r,pointBackgroundColor:r,borderDash:this.config.forecast?.use_color_thresholds&&"templow"===e?[4,4]:void 0,fill:!1}}computeTemperatureLineColor(t,e,i){if(!this.config.forecast?.use_color_thresholds)return i;let{ctx:r,chartArea:s,scales:a}=t.chart;if(!s||!a.yTemp)return i;null===this._temperatureColors&&(this._temperatureColors={cold:e.getPropertyValue("--wfc-temp-cold")||"#2196f3",freezing:e.getPropertyValue("--wfc-temp-freezing")||"#4fb3ff",chilly:e.getPropertyValue("--wfc-temp-chilly")||"#ffeb3b",mild:e.getPropertyValue("--wfc-temp-mild")||"#4caf50",warm:e.getPropertyValue("--wfc-temp-warm")||"#ff9800",hot:e.getPropertyValue("--wfc-temp-hot")||"#f44336"});let{min:o,max:n}=a.yTemp,l=r.createLinearGradient(0,s.bottom,0,s.top),h=t=>Math.max(0,Math.min(1,(t-o)/(n-o))),c="F"===iG(this.hass,this.weatherEntity,"temperature"),d=t=>c?9*t/5+32:t;for(let t of[{pos:h(d(-10)),color:this._temperatureColors.cold},{pos:h(d(0)),color:this._temperatureColors.freezing},{pos:h(d(8)),color:this._temperatureColors.chilly},{pos:h(d(18)),color:this._temperatureColors.mild},{pos:h(d(26)),color:this._temperatureColors.warm},{pos:h(d(34)),color:this._temperatureColors.hot}].sort((t,e)=>t.pos-e.pos))l.addColorStop(t.pos,t.color);return l}computeScaleLimits(t){let e=t.map(t=>t.temperature),i=Math.min(...t.map(t=>t.templow??t.temperature)),r=Math.max(...e),s=t.some(t=>void 0!==t.templow&&null!==t.templow),a=Math.max(r-i,10),o=Math.max(.2*a,2),n=Math.floor(i-Math.max(a*(s?.35:.1),s?5:1)),l=Math.ceil(r+o);return n>=l&&(l=n+1),{minTemp:n,maxTemp:l}}renderHeaderItems(t){let e,i=[];return t.forEach(t=>{if(t.datetime){if("hourly"===this.forecastType){let r=ix(this.hass,t.datetime);e!==r&&(e=r,i.push(eB`<div class="wfc-day-indicator-container">
              <div class="wfc-day-indicator wfc-label">${r}</div>
            </div>`))}i.push(eB`
        <div class="wfc-forecast-slot">
          <wfc-forecast-header-items
            .hass=${this.hass}
            .forecast=${t}
            .forecastType=${this.forecastType}
            .config=${this.config}
          ></wfc-forecast-header-items>
        </div>
      `)}}),i}get safeForecast(){if(!this.forecast?.length||this.itemWidth<=0)return[];let t=this._getGapValue(),e=Math.floor((16384+t)/(this.itemWidth+t));return this.forecast.length>e?(iF.debug(`Truncating forecast to ${e} items to stay under 16384px (including ${t}px gaps).`),this.forecast.slice(0,e)):this.forecast}_getGapValue(){return parseFloat(getComputedStyle(this).getPropertyValue("--forecast-item-gap").trim())||0}_onPointerDown(t){this._lastChartEvent=t}constructor(...t){super(...t),this.forecast=[],this.itemWidth=0,this._lastChartEvent=null,this._chart=null,this._temperatureColors=null,this._scrollController=new i8(this,{selector:".wfc-scroll-container",childSelector:".wfc-forecast-slot"}),this._onForecastAction=t=>{if(this._scrollController.isScrolling()||!this._chart||!this._lastChartEvent)return;let e=this._lastChartEvent;this._lastChartEvent=null,t.preventDefault(),t.stopPropagation();let i=av(e,this._chart),r=this._chart.scales.x;if(!r)return;let s=r.getValueForPixel(i.x);if(null==s)return;let a=r.getLabelForValue(s),o=this._chart.data.labels?.indexOf(a)??-1;if(-1===o)return;let n=this.safeForecast[o];n&&il(this,"action",{selectedForecast:n,action:t.detail.action})}}}k([ew({attribute:!1})],lo.prototype,"hass",void 0),k([ew({attribute:!1})],lo.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],lo.prototype,"forecast",void 0),k([ew({attribute:!1})],lo.prototype,"config",void 0),k([ew({attribute:!1})],lo.prototype,"forecastType",void 0),k([ew({attribute:!1})],lo.prototype,"itemWidth",void 0),k([(t,e,i)=>{let r,s,a;return r=t,s=e,(a={get(){let t;return t=this,t.renderRoot?.querySelector("canvas")??null}}).configurable=!0,a.enumerable=!0,Reflect.decorate&&"object"!=typeof s&&Object.defineProperty(r,s,a),a}],lo.prototype,"_canvas",void 0),lo=k([t8("wfc-forecast-chart")],lo);class ln extends e8{createRenderRoot(){return this}render(){let t;if(!this.forecast)return eX;let e=this.forecast.precipitation||0,i=this.computePrecipitationBarHeight(e),r=void 0!==(t=this.forecast).precipitation&&t.precipitation>0||void 0!==t.precipitation_probability&&t.precipitation_probability>0;return eB`
      <div class="wfc-forecast-slot-temperature">
        <span class="wfc-forecast-temperature-high wfc-small">
          ${Math.round(this.forecast.temperature)}</span
        >${void 0!==this.forecast.templow?eB`<span
              class="wfc-forecast-temperature-low wfc-secondary wfc-small"
              >/${Math.round(this.forecast.templow)}</span
            >`:eX}
      </div>
      <div
        class=${iq({"wfc-forecast-precip-amount-container":!0,"wfc-not-available":!r})}
      >
        <div
          class="wfc-forecast-precip-amount-bar"
          style="--forecast-precipitation-bar-height-pct: ${i}%;"
        ></div>
        <span class="wfc-forecast-precip-amount">
          ${e.toFixed(1)}
        </span>
      </div>
    `}computePrecipitationBarHeight(t){return t<.1?0:t<.2?10:Math.round(Math.min(t/(this.maxPrecipitation||10)*100,100))}}k([ew({attribute:!1})],ln.prototype,"hass",void 0),k([ew({attribute:!1})],ln.prototype,"forecast",void 0),k([ew({attribute:!1})],ln.prototype,"config",void 0),k([ew({attribute:!1})],ln.prototype,"maxPrecipitation",void 0),ln=k([t8("wfc-forecast-details")],ln);class ll extends e8{static{this.styles=ea`
    :host {
      display: inline-block;
    }
    text {
      font-size: calc(var(--ha-font-size-l, 16px) * 1.4);
      fill: var(--primary-text-color);
      font-weight: 600;
      text-anchor: middle;
      dominant-baseline: middle;
    }
  `}render(){if(!this.hass||!this.forecast||!this.weatherEntity)return eX;let t=this.forecast.wind_speed||0,e=(t=>{if(null!=t.wind_bearing){if("number"==typeof t.wind_bearing)return t.wind_bearing;if("string"==typeof t.wind_bearing){let e=parseFloat(t.wind_bearing);return!isNaN(e)&&isFinite(e)?e:iK[t.wind_bearing.toUpperCase()]}}})(this.forecast),i=this.radius,r=i+10,s=i+10,a=2*(i+10),o=Math.round(t),n=this.computeLineColor(),l=e;void 0!==l&&"direction"===this.type&&(l=(l+180)%360);let h=Number.isFinite(l),c=s-i,d=.45*i;return eB`
      <svg
        width="${this.size}"
        height="${this.size}"
        viewBox="0 0 ${a} ${a}"
        role="img"
        aria-label="${h?`Wind speed: ${o}, bearing: ${l} degrees`:`Wind speed: ${o}`}"
      >
        <circle
          cx="${r}"
          cy="${s}"
          r="${i}"
          stroke="${n}"
          stroke-width="${4}"
          fill="none"
        />
        ${h?eU` <g transform="rotate(${l} ${r} ${s})">
              <polygon
                points="${r-d},${c} ${r+d},${c} ${r},${c-.55*i}"
                fill="${n}"
              />
            </g>`:eX}
        <text x="${r}" y="${s}" dy="0.1em">${o}</text>
      </svg>
    `}computeLineColor(){let t=i2(this.hass,this.weatherEntity,this.forecast);return!t||t<=3?"var(--wfc-wind-low)":t<=8?"var(--wfc-wind-medium)":"var(--wfc-wind-high)"}constructor(...t){super(...t),this.size=35,this.radius=20,this.type="bearing"}}k([ew({attribute:!1})],ll.prototype,"hass",void 0),k([ew({attribute:!1})],ll.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],ll.prototype,"forecast",void 0),k([ew({attribute:!1})],ll.prototype,"size",void 0),k([ew({attribute:!1})],ll.prototype,"radius",void 0),k([ew({attribute:!1})],ll.prototype,"type",void 0),ll=k([t8("wfc-wind-indicator")],ll);class lh extends e8{createRenderRoot(){return this}render(){return this.forecast?eB`
      <div class="wfc-forecast-slot-info">
        ${this.getExtraInfo()??eX}
      </div>
    `:eX}getExtraInfo(){let t=this.config?.forecast?.extra_attribute;if(!t)return null;if("precipitation_probability"===t){let t=Math.round(this.forecast.precipitation_probability||0);return t>0?eB`
            <span class="wfc-forecast-precip-probability wfc-secondary">
              ${t<10?"<10%":`${t}%`}
            </span>
          `:null}return"wind_bearing"===t||"wind_direction"===t?eB`<wfc-wind-indicator
        .hass=${this.hass}
        .weatherEntity=${this.weatherEntity}
        .forecast=${this.forecast}
        .type="${"wind_direction"===t?"direction":"bearing"}"
      ></wfc-wind-indicator>`:(iF.warn(`Unsupported forecast.extra_attribute: ${t}`),null)}}k([ew({attribute:!1})],lh.prototype,"hass",void 0),k([ew({attribute:!1})],lh.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],lh.prototype,"forecast",void 0),k([ew({attribute:!1})],lh.prototype,"config",void 0),lh=k([t8("wfc-forecast-info")],lh);class lc extends e8{createRenderRoot(){return this}render(){let t;if(!this.forecast?.length)return eX;let e=[],i=i1(iG(this.hass,this.weatherEntity,"precipitation"),this.forecastType);return this.forecast.forEach((r,s)=>{if(r.datetime){if("hourly"===this.forecastType){let i=ix(this.hass,r.datetime);t!==i&&(t=i,e.push(eB`<div class="wfc-day-indicator-container">
              <div class="wfc-day-indicator wfc-label">${i}</div>
            </div>`))}e.push(eB`
        <div class="wfc-forecast-slot" data-index=${s}>
          <wfc-forecast-header-items
            .hass=${this.hass}
            .forecast=${r}
            .forecastType=${this.forecastType}
            .config=${this.config}
          ></wfc-forecast-header-items>
          <wfc-forecast-details
            .hass=${this.hass}
            .forecast=${r}
            .maxPrecipitation=${i}
            .config=${this.config}
          ></wfc-forecast-details>
          <wfc-forecast-info
            .hass=${this.hass}
            .weatherEntity=${this.weatherEntity}
            .forecast=${r}
            .config=${this.config}
          ></wfc-forecast-info>
        </div>
      `)}}),eB`
      <div
        class="wfc-forecast wfc-scroll-container"
        .actionHandler=${iV({hasHold:this.config.forecast_action?.hold_action!==void 0,hasDoubleClick:this.config.forecast_action?.double_tap_action!==void 0,stopPropagation:!0})}
        @action=${this._onForecastAction}
        @pointerdown=${this._onPointerDown}
      >
        ${e}
      </div>
    `}constructor(...t){super(...t),this.forecast=[],this._selectedForecastIndex=null,this._scrollController=new i8(this,{selector:".wfc-scroll-container",childSelector:".wfc-forecast-slot"}),this._onPointerDown=t=>{let e=t.target,i=e?.closest(".wfc-forecast-slot");this._selectedForecastIndex=i?.dataset.index?Number(i.dataset.index):null},this._onForecastAction=t=>{if(this._scrollController.isScrolling()||null===this._selectedForecastIndex)return;t.preventDefault(),t.stopPropagation();let e=this.forecast[this._selectedForecastIndex];e&&il(this,"action",{selectedForecast:e,action:t.detail.action})}}}k([ew({attribute:!1})],lc.prototype,"hass",void 0),k([ew({attribute:!1})],lc.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],lc.prototype,"forecast",void 0),k([ew({attribute:!1})],lc.prototype,"forecastType",void 0),k([ew({attribute:!1})],lc.prototype,"config",void 0),lc=k([t8("wfc-forecast-simple")],lc);class ld extends e8{createRenderRoot(){return this}render(){if(!this.state||!this.config)return eX;let t=this.getClasses(),e=this.getWeatherStateIcon();return eB`
      <div class="${t}" data-condition="${this.state}">${e}</div>
    `}getClasses(){return this.classes?`wfc-weather-condition-icon-slot ${this.classes}`:"wfc-weather-condition-icon-slot"}getWeatherStateIcon(){if(this.config?.icons_path?.trim()){let{path:t,state:e}=this.getCustomWeatherIconPath();return eB` <img src="${t}" alt="${e}" /> `}let t=getComputedStyle(this).getPropertyValue(`--weather-icon-${this.state}`);return t?eB`
        <div
          style="background-size: cover;${re({"background-image":t})}"
        ></div>
      `:lu.has(this.state)?eB`${ly(this.state,this.isNightTime)}`:eX}constructor(...t){super(...t),this.isNightTime=!1,this.state="exceptional",this.getCustomWeatherIconPath=()=>{let t=lu.has(this.state)?this.state:"exceptional";this.isNightTime&&("partlycloudy"===this.state?t="partlycloudy-night":"sunny"===this.state&&(t="clear-night"));let e=this.config.icons_path?.trim().replace(/\/$/,"");return{path:`${e}/${t}.svg`,state:t}}}}k([ew({attribute:!1})],ld.prototype,"config",void 0),k([ew({attribute:!1})],ld.prototype,"classes",void 0),k([ew({attribute:!1})],ld.prototype,"isNightTime",void 0),k([ew({attribute:!1})],ld.prototype,"state",void 0),ld=k([t8("wfc-weather-condition-icon-provider")],ld);let lu=new Set(["clear-night","cloudy","exceptional","fog","lightning","lightning-rainy","partlycloudy","pouring","rainy","hail","snowy","snowy-rainy","sunny","windy","windy-variant"]),lf=new Set(["partlycloudy","cloudy","fog","windy","windy-variant","hail","rainy","snowy","snowy-rainy","pouring","lightning","lightning-rainy"]),lp=new Set(["hail","rainy","pouring"]),lg=new Set(["windy","windy-variant"]),lm=new Set(["snowy","snowy-rainy"]),l_=new Set(["lightning","lightning-rainy"]),ly=(t,e)=>eU`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 17 17"
  >
  ${"sunny"===t&&e?eU`
          <path
            class="moon"
            d="m 13.502891,11.382935 c -1.011285,1.859223 -2.976664,3.121381 -5.2405751,3.121381 -3.289929,0 -5.953329,-2.663833 -5.953329,-5.9537625 0,-2.263911 1.261724,-4.228856 3.120948,-5.240575 -0.452782,0.842738 -0.712753,1.806363 -0.712753,2.832381 0,3.289928 2.663833,5.9533275 5.9533291,5.9533275 1.026017,0 1.989641,-0.259969 2.83238,-0.712752"
          />
        `:"sunny"===t?eU`
          <path
            class="sun"
            d="m 14.39303,8.4033507 c 0,3.3114723 -2.684145,5.9956173 -5.9956169,5.9956173 -3.3114716,0 -5.9956168,-2.684145 -5.9956168,-5.9956173 0,-3.311471 2.6841452,-5.995617 5.9956168,-5.995617 3.3114719,0 5.9956169,2.684146 5.9956169,5.995617"
          />
        `:""}
  ${"clear-night"===t?eU`
          <path
            class="moon"
            d="m 13.502891,11.382935 c -1.011285,1.859223 -2.976664,3.121381 -5.2405751,3.121381 -3.289929,0 -5.953329,-2.663833 -5.953329,-5.9537625 0,-2.263911 1.261724,-4.228856 3.120948,-5.240575 -0.452782,0.842738 -0.712753,1.806363 -0.712753,2.832381 0,3.289928 2.663833,5.9533275 5.9533291,5.9533275 1.026017,0 1.989641,-0.259969 2.83238,-0.712752"
          />
        `:""}
  ${"partlycloudy"===t&&e?eU`
          <path
            class="moon"
            d="m14.981 4.2112c0 1.9244-1.56 3.4844-3.484 3.4844-1.9244 0-3.4844-1.56-3.4844-3.4844s1.56-3.484 3.4844-3.484c1.924 0 3.484 1.5596 3.484 3.484"
          />
        `:"partlycloudy"===t?eU`
          <path
            class="sun"
            d="m14.981 4.2112c0 1.9244-1.56 3.4844-3.484 3.4844-1.9244 0-3.4844-1.56-3.4844-3.4844s1.56-3.484 3.4844-3.484c1.924 0 3.484 1.5596 3.484 3.484"
          />
        `:""}
  ${lf.has(t)?eU`
          <path
            class="cloud-back"
            d="m3.8863 5.035c-0.54892 0.16898-1.04 0.46637-1.4372 0.8636-0.63077 0.63041-1.0206 1.4933-1.0206 2.455 0 1.9251 1.5589 3.4682 3.4837 3.4682h6.9688c1.9251 0 3.484-1.5981 3.484-3.5232 0-1.9251-1.5589-3.5232-3.484-3.5232h-1.0834c-0.25294-1.6916-1.6986-2.9083-3.4463-2.9083-1.7995 0-3.2805 1.4153-3.465 3.1679"
          />
          <path
            class="cloud-front"
            d="m4.1996 7.6995c-0.33902 0.10407-0.64276 0.28787-0.88794 0.5334-0.39017 0.38982-0.63147 0.92322-0.63147 1.5176 0 1.1896 0.96414 2.1431 2.1537 2.1431h4.3071c1.1896 0 2.153-0.98742 2.153-2.1777 0-1.1896-0.96344-2.1777-2.153-2.1777h-0.66992c-0.15593-1.0449-1.0499-1.7974-2.1297-1.7974-1.112 0-2.0274 0.87524-2.1417 1.9586"
          />
        `:""}
  ${lp.has(t)?eU`
          <path
            class="rain"
            d="m5.2852 14.734c-0.22401 0.24765-0.57115 0.2988-0.77505 0.11395-0.20391-0.1845-0.18732-0.53481 0.036689-0.78281 0.14817-0.16298 0.59126-0.32914 0.87559-0.42369 0.12453-0.04092 0.22684 0.05186 0.19791 0.17956-0.065617 0.2921-0.18732 0.74965-0.33514 0.91299"
          />
          <path
            class="rain"
            d="m11.257 14.163c-0.22437 0.24765-0.57115 0.2988-0.77505 0.11395-0.2039-0.1845-0.18768-0.53481 0.03669-0.78281 0.14817-0.16298 0.59126-0.32914 0.8756-0.42369 0.12453-0.04092 0.22684 0.05186 0.19791 0.17956-0.06562 0.2921-0.18732 0.74965-0.33514 0.91299"
          />
          <path
            class="rain"
            d="m8.432 15.878c-0.15452 0.17039-0.3937 0.20567-0.53446 0.07867-0.14041-0.12735-0.12876-0.36865 0.025753-0.53975 0.10195-0.11218 0.40711-0.22684 0.60325-0.29175 0.085725-0.02858 0.15628 0.03563 0.13652 0.12382-0.045508 0.20108-0.12912 0.51647-0.23107 0.629"
          />
          <path
            class="rain"
            d="m7.9991 14.118c-0.19226 0.21237-0.49001 0.25612-0.66499 0.09737-0.17462-0.15804-0.16051-0.45861 0.03175-0.67098 0.12665-0.14005 0.50729-0.28293 0.75071-0.36336 0.10689-0.03563 0.19473 0.0441 0.17004 0.15346-0.056092 0.25082-0.16051 0.64347-0.28751 0.78352"
          />
        `:""}
  ${"pouring"===t?eU`
          <path
            class="rain"
            d="m10.648 16.448c-0.19226 0.21449-0.49001 0.25894-0.66499 0.09878-0.17498-0.16016-0.16087-0.4639 0.03175-0.67874 0.12665-0.14146 0.50694-0.2854 0.75071-0.36724 0.10689-0.03563 0.19473 0.0448 0.17004 0.15558-0.05645 0.25365-0.16051 0.65017-0.28751 0.79163"
          />
          <path
            class="rain"
            d="m5.9383 16.658c-0.22437 0.25012-0.5715 0.30162-0.77505 0.11501-0.20391-0.18627-0.18768-0.54046 0.036689-0.79093 0.14817-0.1651 0.59126-0.33267 0.87559-0.42827 0.12418-0.04127 0.22648 0.05221 0.19791 0.18168-0.065617 0.29528-0.18732 0.75741-0.33514 0.92251"
          />
        `:""}
  ${lg.has(t)?eU`
          <path
            class="cloud-back"
            d="m 13.59616,15.30968 c 0,0 -0.09137,-0.0071 -0.250472,-0.0187 -0.158045,-0.01235 -0.381353,-0.02893 -0.64382,-0.05715 -0.262466,-0.02716 -0.564444,-0.06385 -0.877358,-0.124531 -0.156986,-0.03034 -0.315383,-0.06844 -0.473781,-0.111478 -0.157691,-0.04551 -0.313266,-0.09842 -0.463902,-0.161219 l -0.267406,-0.0949 c -0.09984,-0.02646 -0.205669,-0.04904 -0.305153,-0.06738 -0.193322,-0.02716 -0.3838218,-0.03316 -0.5640912,-0.02011 -0.3626556,0.02611 -0.6847417,0.119239 -0.94615,0.226483 -0.2617611,0.108656 -0.4642556,0.230364 -0.600075,0.324203 -0.1358195,0.09419 -0.2049639,0.160514 -0.2049639,0.160514 0,0 0.089958,-0.01623 0.24765,-0.04445 0.1559278,-0.02575 0.3764139,-0.06174 0.6367639,-0.08714 0.2596444,-0.02646 0.5591527,-0.0441 0.8678333,-0.02328 0.076905,0.0035 0.1538111,0.01658 0.2321278,0.02293 0.077611,0.01058 0.1534581,0.02893 0.2314221,0.04022 0.07267,0.01834 0.1397,0.03986 0.213078,0.05644 l 0.238125,0.08925 c 0.09207,0.03281 0.183444,0.07055 0.275872,0.09878 0.09243,0.0261 0.185208,0.05327 0.277636,0.07161 0.184856,0.0388 0.367947,0.06174 0.543983,0.0702 0.353131,0.01905 0.678745,-0.01341 0.951442,-0.06456 0.27305,-0.05292 0.494595,-0.123119 0.646642,-0.181681 0.152047,-0.05785 0.234597,-0.104069 0.234597,-0.104069"
          />
          <path
            class="cloud-back"
            d="m 4.7519154,13.905801 c 0,0 0.091369,-0.0032 0.2511778,-0.0092 0.1580444,-0.0064 0.3820583,-0.01446 0.6455833,-0.03281 0.2631722,-0.01729 0.5662083,-0.04269 0.8812389,-0.09137 0.1576916,-0.02434 0.3175,-0.05609 0.4776611,-0.09384 0.1591027,-0.03951 0.3167944,-0.08643 0.4699,-0.14358 l 0.2702277,-0.08467 c 0.1008945,-0.02222 0.2074334,-0.04127 0.3072695,-0.05574 0.1943805,-0.01976 0.3848805,-0.0187 0.5651499,0.0014 0.3608917,0.03951 0.67945,0.144639 0.936625,0.261761 0.2575278,0.118534 0.4554364,0.247297 0.5873754,0.346781 0.132291,0.09913 0.198966,0.168275 0.198966,0.168275 0,0 -0.08925,-0.01976 -0.245886,-0.05397 C 9.9423347,14.087088 9.7232597,14.042988 9.4639681,14.00736 9.2057347,13.97173 8.9072848,13.94245 8.5978986,13.95162 c -0.077258,7.06e-4 -0.1541638,0.01058 -0.2328333,0.01411 -0.077964,0.0078 -0.1545166,0.02328 -0.2331861,0.03175 -0.073025,0.01588 -0.1404055,0.03422 -0.2141361,0.04798 l -0.2420055,0.08008 c -0.093486,0.02963 -0.1859139,0.06421 -0.2794,0.0889 C 7.3028516,14.23666 7.2093653,14.2603 7.116232,14.27512 6.9303181,14.30722 6.7465209,14.3231 6.5697792,14.32486 6.2166487,14.33046 5.8924459,14.28605 5.6218654,14.224318 5.3505793,14.161565 5.1318571,14.082895 4.9822793,14.01869 4.8327015,13.95519 4.7519154,13.905801 4.7519154,13.905801"
          />
        `:""}
  ${lm.has(t)?eU`
          <path
            class="snow"
            d="m 8.4319893,15.348341 c 0,0.257881 -0.209197,0.467079 -0.467078,0.467079 -0.258586,0 -0.46743,-0.209198 -0.46743,-0.467079 0,-0.258233 0.208844,-0.467431 0.46743,-0.467431 0.257881,0 0.467078,0.209198 0.467078,0.467431"
          />
          <path
            class="snow"
            d="m 11.263878,14.358553 c 0,0.364067 -0.295275,0.659694 -0.659695,0.659694 -0.364419,0 -0.6596937,-0.295627 -0.6596937,-0.659694 0,-0.364419 0.2952747,-0.659694 0.6596937,-0.659694 0.36442,0 0.659695,0.295275 0.659695,0.659694"
          />
          <path
            class="snow"
            d="m 5.3252173,13.69847 c 0,0.364419 -0.295275,0.660047 -0.659695,0.660047 -0.364067,0 -0.659694,-0.295628 -0.659694,-0.660047 0,-0.364067 0.295627,-0.659694 0.659694,-0.659694 0.36442,0 0.659695,0.295627 0.659695,0.659694"
          />
        `:""}
  ${l_.has(t)?eU`
          <path
            class="sun"
            d="m 9.9252695,10.935875 -1.6483986,2.341014 1.1170184,0.05929 -1.2169864,2.02141 3.0450261,-2.616159 H 9.8864918 L 10.97937,11.294651 10.700323,10.79794 h -0.508706 l -0.2663475,0.137936"
          />
        `:""}
  </svg>`;var lb=function(t,e){for(var i=-1,r=null==t?0:t.length,s=Array(r);++i<r;)s[i]=e(t[i],i,t);return s},lv=function(t){return"symbol"==typeof t||tx(t)&&"[object Symbol]"==I(t)},lx=1/0,lw=C?C.prototype:void 0,lM=lw?lw.toString:void 0,lk=function t(e){if("string"==typeof e)return e;if(tA(e))return lb(e,t)+"";if(lv(e))return lM?lM.call(e):"";var i=e+"";return"0"==i&&1/e==-lx?"-0":i},lS=function(t){return null==t?"":lk(t)},l$=function(t,e,i){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(i=i>s?s:i)<0&&(i+=s),s=e>i?0:i-e>>>0,e>>>=0;for(var a=Array(s);++r<s;)a[r]=t[r+e];return a},lA=function(t,e,i){var r=t.length;return i=void 0===i?r:i,!e&&i>=r?t:l$(t,e,i)},lP=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),lE=function(t){return lP.test(t)},lC="\\ud800-\\udfff",lO="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",lD="\\ud83c[\\udffb-\\udfff]",lT="[^"+lC+"]",lz="(?:\\ud83c[\\udde6-\\uddff]){2}",lL="[\\ud800-\\udbff][\\udc00-\\udfff]",lF="(?:"+lO+"|"+lD+")?",lR="[\\ufe0e\\ufe0f]?",lI="(?:\\u200d(?:"+[lT,lz,lL].join("|")+")"+lR+lF+")*",lj=RegExp(lD+"(?="+lD+")|"+("(?:"+[lT+lO+"?",lO,lz,lL,"["+lC+"]"].join("|"))+")"+(lR+lF+lI),"g"),lW=function(t){var e,i=lE(t=lS(t))?lE(e=t)?e.match(lj)||[]:e.split(""):void 0,r=i?i[0]:t.charAt(0),s=i?lA(i,1).join(""):t.slice(1);return r.toUpperCase()+s},lN=function(t){return lW(lS(t).toLowerCase())};class lV extends e8{createRenderRoot(){return this}render(){if(!this.hass||!this.weatherEntity||0===this.weatherAttributes.length)return eX;let t=this.weatherAttributes.map(t=>this._renderAttribute(t)).filter(t=>t!==eX);return 0===t.length?eX:eB`
      <div class="wfc-current-attributes">${t}</div>
    `}_renderAttribute(t){let e=i3(this.hass,this.weatherEntity,this.config,t);return e?eB`
      <div class="wfc-current-attribute">
        <ha-attribute-icon
          class="wfc-current-attribute-icon"
          .hass=${this.hass}
          .stateObj=${this.weatherEntity}
          .attribute=${t}
          .icon=${iJ[t]}
        ></ha-attribute-icon>
        <span class="wfc-current-attribute-name">
          ${this.localize(t)}
        </span>
        <span class="wfc-current-attribute-value">${e}</span>
      </div>
    `:eX}constructor(...t){super(...t),this.weatherAttributes=[],this.localize=t=>this.hass.formatEntityAttributeName(this.weatherEntity,t)||this.hass.localize(lH(t))||lN(t).replace(/_/g," ")}}k([ew({attribute:!1})],lV.prototype,"hass",void 0),k([ew({attribute:!1})],lV.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],lV.prototype,"weatherAttributes",void 0),k([ew({attribute:!1})],lV.prototype,"config",void 0),lV=k([t8("wfc-current-weather-attributes")],lV);let lH=iv(t=>"pressure"===t?"ui.card.weather.attributes.air_pressure":`ui.card.weather.attributes.${t}`),lB={...iJ,precipitation:"mdi:weather-rainy"};class lU extends e8{createRenderRoot(){return this}render(){if(!this.hass||!this.weatherEntity)return eX;let{state:t}=this.weatherEntity,e=this.getTemperature(),i=this.getSecondaryWeatherAttribute(),r=this.isNightTime(),s=this.getConfiguredAttributes(),a=this.config.name||this.weatherEntity.attributes.friendly_name;return eB`
      <div class="wfc-current-weather">
        <div class="wfc-current-conditions">
          <wfc-weather-condition-icon-provider
            .config=${this.config}
            .state=${t}
            .isNightTime=${r}
            .classes=${"wfc-current-icon"}
          ></wfc-weather-condition-icon-provider>
          <div class="wfc-name-state">
            <span class="wfc-current-state">
              ${this.hass.formatEntityState(this.weatherEntity)}
            </span>
            ${a?eB`<span class="wfc-name wfc-secondary">${a}</span>`:eX}
          </div>
          <div class="wfc-current-primary-secondary">
            ${null!==e?eB`
                  <div
                    class="wfc-current-temperature"
                    .actionHandler=${iV({stopPropagation:!0,hasHold:im(this.config.hold_action),hasDoubleClick:im(this.config.double_tap_action)})}
                    @action=${this.onAction}
                  >
                    ${e}
                  </div>
                `:eX}
            ${i?eB`
                  <div class="wfc-current-secondary-info">
                    ${i.icon?eB`
                          <ha-attribute-icon
                            class="wfc-current-secondary-icon wfc-secondary"
                            .hass=${this.hass}
                            .icon=${i.icon}
                          ></ha-attribute-icon>
                        `:eX}
                    <span class="wfc-current-secondary-value wfc-secondary"
                      >${i.value}</span
                    >
                  </div>
                `:eX}
          </div>
        </div>
        ${s.length>0?eB`<wfc-current-weather-attributes
              .hass=${this.hass}
              .weatherEntity=${this.weatherEntity}
              .config=${this.config}
              .weatherAttributes=${s}
            ></wfc-current-weather-attributes>`:eX}
      </div>
    `}isNightTime(){let t=i$(this.hass,new Date);return!!this.config.forecast?.show_sun_times&&!!t&&t.isNightTime}getConfiguredAttributes(){let t=this.config.current?.show_attributes;return null==t?[]:Array.isArray(t)?t:"boolean"==typeof t?t?[...iH]:[]:"string"==typeof t?[t]:[]}getTemperature(){if(this.config?.temperature_entity){let t=this.hass.states[this.config.temperature_entity];if(t)return i4(this.hass,this.weatherEntity,t.state,this.config.current?.temperature_precision)}return null!=this.weatherEntity.attributes.temperature?i4(this.hass,this.weatherEntity,this.weatherEntity.attributes.temperature,this.config.current?.temperature_precision):null}getSecondaryWeatherAttribute(){let t,e,i=this.hourlyForecast,r=this.config.current?.secondary_info_attribute;if(r&&r in this.weatherEntity.attributes){let t=lB[r],e=i3(this.hass,this.weatherEntity,this.config,r);if(null!=e)return{icon:t,value:e}}let s=this.getTemperatureExtrema();if(s)return{value:`${s.high} / ${s.low}`};if(i&&i.length&&i[0]?.precipitation!=null)t=i[0].precipitation,e="precipitation";else{if(!("humidity"in this.weatherEntity.attributes))return null;t=this.weatherEntity.attributes.humidity,e="humidity"}return{icon:lB[e],value:this.hass.formatEntityAttributeValue(this.weatherEntity,e,t)}}getTemperatureExtrema(){if(!this.hourlyForecast?.length||!this.dailyForecast?.length)return null;let t=iw(new Date().toISOString()),e=this.dailyForecast[0]?.templow??this.dailyForecast[0]?.temperature??1/0,i=this.dailyForecast[0]?.temperature??-1/0;for(let r of this.hourlyForecast)if(iw(r.datetime)===t){let t=r.templow??r.temperature,s=r.temperature;null!=t&&t<e&&(e=t),null!=s&&s>i&&(i=s)}return e===1/0||i===-1/0?null:{high:i4(this.hass,this.weatherEntity,i,this.config.current?.temperature_precision),low:i4(this.hass,this.weatherEntity,e,this.config.current?.temperature_precision)}}constructor(...t){super(...t),this.onAction=t=>{let e=this.config.temperature_entity?{...this.config,entity:this.config.temperature_entity}:this.config;ig(this,this.hass,e,t.detail.action)}}}k([ew({attribute:!1})],lU.prototype,"hass",void 0),k([ew({attribute:!1})],lU.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],lU.prototype,"hourlyForecast",void 0),k([ew({attribute:!1})],lU.prototype,"dailyForecast",void 0),k([ew({attribute:!1})],lU.prototype,"config",void 0),lU=k([t8("wfc-current-weather")],lU);var lq={};lq=':host{--sun-size:var(--weather-forecast-card-effects-sun-size,140px);--sun-spin-duration:var(--weather-forecast-card-effects-sun-spin-duration,100s);--moon-size:var(--weather-forecast-card-effects-moon-size,80px);--sky-visibility:var(--weather-forecast-card-effects-sky-visibility,visible);--drop-color-start:color-mix(in srgb,var(--rain-color),transparent 100%);--drop-color-end:color-mix(in srgb,var(--rain-color),transparent 40%);--drop-height:var(--weather-forecast-card-effects-drop-height,20px);--drop-start-pos-diff-y:50px;--snow-glow-color:var(--snow-color);--container-height:0px;pointer-events:none;z-index:0;box-sizing:border-box;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));display:block;position:absolute;inset:0;overflow:hidden}:host(.light){--sun-color:var(--weather-forecast-card-effects-sun-color,#facc15);--sun-ray-color:var(--weather-forecast-card-effects-sun-ray-color,#fde04766);--sun-ray-opacity:.25;--moon-color:var(--weather-forecast-card-effects-moon-color,#dcdce6);--star-color:var(--weather-forecast-card-effects-star-color,#fff);--snow-color:var(--weather-forecast-card-effects-snow-color,#cbd5e1);--glow-intensity:.9;--rain-color:var(--weather-forecast-card-effects-rain-color,#2563eb);--clear-sky-color:var(--weather-forecast-card-effects-clear-sky-color,#1e82e699);--clear-sky-accent:var(--weather-forecast-card-effects-clear-sky-accent,#64b4f073);--clear-sky-horizon:var(--weather-forecast-card-effects-clear-sky-horizon,#d2ebff4d);--clear-night-sky-color:var(--weather-forecast-card-effects-clear-night-sky-color,#312e81b3);--clear-night-sky-accent:var(--weather-forecast-card-effects-clear-night-sky-accent,#581c878c);--clear-night-horizon:var(--weather-forecast-card-effects-clear-night-horizon,#ec489966)}:host(.dark){--sun-color:var(--weather-forecast-card-effects-sun-color,#fbbf24);--sun-ray-color:var(--weather-forecast-card-effects-sun-ray-color,#fbbf2480);--sun-ray-opacity:.15;--moon-color:var(--weather-forecast-card-effects-moon-color,#dcdce6);--star-color:var(--weather-forecast-card-effects-star-color,#fff);--snow-color:var(--weather-forecast-card-effects-snow-color,#fff);--glow-intensity:.6;--rain-color:var(--weather-forecast-card-effects-rain-color,#6cb4ee);--clear-sky-color:var(--weather-forecast-card-effects-clear-sky-color,#0369a1cc);--clear-sky-accent:var(--weather-forecast-card-effects-clear-sky-accent,#07598599);--clear-sky-horizon:var(--weather-forecast-card-effects-clear-sky-horizon,#0c4a6e66);--clear-night-sky-color:var(--weather-forecast-card-effects-clear-night-sky-color,#0a0f28d9);--clear-night-sky-accent:var(--weather-forecast-card-effects-clear-night-sky-accent,#141e5099);--clear-night-horizon:var(--weather-forecast-card-effects-clear-night-horizon,#28196466)}.snowflake-path{left:var(--pos-x);transform:rotate(var(--fall-angle,0deg));transform-origin:top;position:absolute;top:-50px}.snowflake{background:var(--snow-color);width:var(--flake-size);height:var(--flake-size);opacity:var(--flake-opacity);filter:blur(var(--flake-blur));box-shadow:0 0 1px var(--snow-glow-color),0 0 calc(var(--flake-shadow-spread)*var(--glow-intensity))var(--snow-glow-color);animation:snowflake var(--duration)linear infinite;animation-delay:var(--delay);border-radius:50%;position:absolute;left:0}.raindrop-path{left:var(--pos-x);top:calc(-1*var(--drop-height) - var(--drop-start-pos-diff-y));transform:rotate(var(--fall-angle,0deg));transform-origin:top;position:absolute}.raindrop{width:1px;height:var(--drop-height);background:linear-gradient(to bottom,var(--drop-color-start),var(--drop-color-end));animation:raindrop var(--duration)linear infinite;animation-delay:var(--delay);border-radius:1px;position:absolute;top:0;left:0}.splat{content:"";width:15px;height:10px;left:-7.5px;top:calc(var(--landing-pos-y) + var(--drop-height) + 50px - 5px);opacity:1;animation:splat var(--duration)linear infinite;animation-delay:var(--delay);border-top:2px dotted #fff3;border-radius:50%;position:absolute;transform:scale(0)}.lightning-flash{z-index:100;opacity:0;pointer-events:none;border-radius:inherit;mix-blend-mode:overlay;background:#fff;animation:20s infinite lightning-loop;position:absolute;inset:0;overflow:hidden}.sky{visibility:var(--sky-visibility);z-index:0;border-radius:inherit;background:linear-gradient(180deg,var(--clear-sky-color)0%,var(--clear-sky-accent)55%,var(--clear-sky-horizon)100%);height:100%;position:absolute;top:0;left:0;right:0}.sky:before{content:"";pointer-events:none;background:radial-gradient(circle at 65% 15%,#ffffff40 0%,#0000 50%);position:absolute;inset:0}.sun{top:calc(var(--sun-size)*-.95);width:var(--sun-size);height:var(--sun-size);box-shadow:0 0 20px 2px #fff7ed,0 0 40px 10px var(--sun-color),0 0 100px 30px #fdba744d;filter:drop-shadow(0 0 5px #0000001a);background:#f5fee0;border-radius:50%;position:absolute;right:35%;transform:translate(50%)}.sun-ray{background:linear-gradient(to bottom,transparent 0%,var(--sun-ray-color)50%,transparent 100%);transform-origin:top;opacity:var(--sun-ray-opacity);box-shadow:0 0 15px var(--sun-ray-color);border-radius:50% 50% 10% 10%;position:absolute;top:50%;left:50%}.ray-box{width:var(--sun-size);animation:spin var(--sun-spin-duration)linear infinite;margin:auto;position:absolute;inset:0}.night-sky{visibility:var(--sky-visibility);z-index:0;border-radius:inherit;background:linear-gradient(180deg,var(--clear-night-sky-color)0%,var(--clear-night-sky-accent)50%,var(--clear-night-horizon)100%);height:100%;position:absolute;top:0;left:0;right:0}.night-sky:before{content:"";pointer-events:none;background:radial-gradient(circle at 70% 20%,#ffffff26 0%,#0000 60%);position:absolute;inset:0}.moon{top:calc(var(--moon-size)*-.85);width:var(--moon-size);height:var(--moon-size);background:var(--moon-color);filter:drop-shadow(0 0 10px #0000001a);border-radius:50%;position:absolute;right:30%;transform:translate(50%);box-shadow:0 0 25px 5px #fff3,0 0 50px 15px #c8d2ff1a}.star{background:var(--star-color);box-shadow:0 0 3px 1px var(--star-color);border-radius:50%;animation:3s ease-in-out infinite twinkle;position:absolute}@keyframes twinkle{0%,to{opacity:var(--star-opacity,1)}50%{opacity:.3}}@keyframes snowflake{0%{transform:translate(0,0)}12.5%{transform:translate3d(calc(var(--drift-amplitude,15px)*.707),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.125),0)}25%{transform:translate3d(var(--drift-amplitude,15px),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.25),0)}37.5%{transform:translate3d(calc(var(--drift-amplitude,15px)*.707),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.375),0)}50%{transform:translate3d(0,calc((var(--container-height) + var(--drop-start-pos-diff-y))*.5),0)}62.5%{transform:translate3d(calc(var(--drift-amplitude,15px)*-.707),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.625),0)}75%{transform:translate3d(calc(var(--drift-amplitude,15px)*-1),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.75),0)}87.5%{transform:translate3d(calc(var(--drift-amplitude,15px)*-.707),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.875),0)}to{opacity:.2;transform:translate3d(0,calc(var(--container-height) + var(--drop-start-pos-diff-y)),0)}}@keyframes raindrop{0%{opacity:1;transform:translate(0,0)}65%{opacity:1}75%{opacity:0;transform:translate3d(0,calc(var(--landing-pos-y) + var(--drop-start-pos-diff-y)),0)}to{opacity:0;transform:translate3d(0,calc(var(--landing-pos-y) + var(--drop-start-pos-diff-y)),0)}}@keyframes splat{0%{opacity:0;transform:scale(0)}80%{opacity:0;transform:scale(0)}90%{opacity:.5;transform:scale(1)}to{opacity:1;transform:scale(1.5)}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes lightning-loop{0%,90%{opacity:0}90.1%{opacity:.4}90.2%{opacity:0}90.3%{opacity:0}90.4%{opacity:.8}90.7%{opacity:.1}91%{opacity:0}91.1%{opacity:.3}91.3%{opacity:0}to{opacity:0}}';let lX=ea`
  ${es(lq)}
`;var lY=Math.floor,lK=Math.random,lJ=/\s/,lG=function(t){for(var e=t.length;e--&&lJ.test(t.charAt(e)););return e},lZ=/^\s+/,lQ=0/0,l0=/^[-+]0x[0-9a-f]+$/i,l1=/^0b[01]+$/i,l2=/^0o[0-7]+$/i,l5=parseInt,l3=function(t){if("number"==typeof t)return t;if(lv(t))return lQ;if(j(t)){var e,i="function"==typeof t.valueOf?t.valueOf():t;t=j(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=(e=t)?e.slice(0,lG(e)+1).replace(lZ,""):e;var r=l1.test(t);return r||l2.test(t)?l5(t.slice(2),r?2:8):l0.test(t)?lQ:+t},l4=1/0,l6=function(t){return t?(t=l3(t))===l4||t===-l4?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0},l9=parseFloat,l8=Math.min,l7=Math.random,ht=function(t,e,i){if(i&&"boolean"!=typeof i&&t6(t,e,i)&&(e=i=void 0),void 0===i&&("boolean"==typeof e?(i=e,e=void 0):"boolean"==typeof t&&(i=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=l6(t),void 0===e?(e=t,t=0):e=l6(e)),t>e){var r,s,a=t;t=e,e=a}if(i||t%1||e%1){var o=l7();return l8(t+o*(e-t+l9("1e-"+((o+"").length-1))),e)}return r=t,s=e,r+lY(lK()*(s-r+1))};class he extends e8{static{this.styles=lX}connectedCallback(){super.connectedCallback(),this._resizeObserver?.disconnect(),this._resizeObserver=new ResizeObserver(t=>{let e=t[0],i=Math.round(e?.contentRect.height||0);this._containerHeight!==i&&(this._containerHeight=i,this._particles=this.computeParticles())}),this._resizeObserver.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver?.disconnect()}willUpdate(t){if(t.has("hass")){let e=t.get("hass"),i=this.hass?.themes?.darkMode;e?.themes?.darkMode!==i&&(this._isDark=i??!1)}(t.has("config")||t.has("weatherEntity")||t.has("currentForecast"))&&(this._particles=this.computeParticles())}updated(t){t.has("hass")&&this.onThemeChanged()}render(){let t=this.getActiveEffects();return t.length?eB`
      ${t.map(t=>{switch(t){case"sky":return this.renderSky();case"moon":return this.renderMoon();case"sun":return this.renderSun();case"rain":return this.renderRain();case"snow":return this.renderSnow();case"lightning":return this.renderLightning();default:return eX}})}
    `:eX}computeParticles(){let t=[];return this.getActiveEffects().forEach(e=>{switch(e){case"rain":t.push(...this.computeRainParticles());break;case"snow":t.push(...this.computeSnowParticles());break;case"moon":t.push(...this.computeStarParticles());break;case"sun":t.push(...this.computeSunRayParticles())}}),t}computeSnowParticles(){let t=this.computeIntensity(),e=[],i=Math.max(5,Math.round(t/10*75)),r=115/i;for(let t=0;t<i;t++){let i=-15+t*r+ht(0,.5*r),s=Math.random(),a=5*s+2,o=4.5/(s+.5)+ht(0,.8),n=ht(0,5,!0).toFixed(1),l=.7*s+.5,h=s<.3?1.5-3*s:.5*(s>.9),c=.9*a,d=(10+25*s).toFixed(0),u=(2+2*Math.random()).toFixed(2);e.push({type:"snow",x:`${i.toFixed(1)}%`,delay:n,duration:o.toFixed(1),size:a.toFixed(0),opacity:l.toFixed(1),blur:h.toFixed(1),shadowSpread:c.toFixed(1),driftAmplitude:d,driftFrequency:u})}return e}computeRainParticles(){let t=this.computeIntensity(),e=[],i=Math.max(10,Math.round(t/10*75)),r=100/i;for(let t=0;t<i;t++){let i=t*r+ht(0,.8*r),s=ht(.2,.5,!0),a=ht(.4,.7,!0),o=ht(.85,1,!0),n=this._containerHeight*o;e.push({type:"rain",x:`${i.toFixed(1)}%`,delay:s.toFixed(2),duration:a.toFixed(2),landingPosY:n.toFixed(0)})}return e}computeStarParticles(){let t=[];for(let e=0;e<30;e++){let i=e%6,r=Math.floor(e/6),s=ht(16.666666666666668*i+2.5,(i+1)*16.666666666666668-2.5),a=ht(6*r+.8999999999999999,(r+1)*6-.8999999999999999),o=ht(1,3),n=ht(.3,1,!0),l=ht(0,5,!0);t.push({type:"star",x:`${s.toFixed(0)}`,y:`${a.toFixed(0)}`,size:`${o}`,opacity:n.toFixed(2),delay:l.toFixed(1)})}return t}getActiveEffects(){let t=this.weatherEntity?.state,e=this.config.show_condition_effects;if(!e||!t)return[];let i=new Set,r=t=>!0===e||!!Array.isArray(e)&&e.includes(t);if((t.includes("rainy")||"pouring"===t)&&r("rain")&&i.add("rain"),t.includes("snowy")&&r("snow")&&i.add("snow"),t.includes("lightning")&&r("lightning")&&i.add("lightning"),"sunny"===t||"clear-night"===t){r("sky")&&i.add("sky");let e="clear-night"===t;if(this.config.forecast?.show_sun_times){let t=i$(this.hass,new Date);t?.isNightTime&&(e=!0)}e?r("moon")&&i.add("moon"):r("sun")&&i.add("sun")}return Array.from(i)}renderSky(){let t="clear-night"===this.weatherEntity.state;return this.config.forecast?.show_sun_times&&(t=i$(this.hass,new Date)?.isNightTime??t),eB`<div class="${t?"night-sky":"sky"}"></div>`}renderSun(){let t=this._particles.filter(t=>"sunray"===t.type);return eB`
      <div class="sun">
        <div class="ray-box">
          ${t.map(t=>eB`<div
                class="sun-ray"
                style="${re({transform:`translate(-50%, 0) rotate(${t.angle}deg)`,height:`${t.height}px`,width:`${t.width}px`})}"
              ></div>`)}
        </div>
      </div>
    `}computeSunRayParticles(){return Array.from({length:30}).map(()=>({type:"sunray",angle:`${ht(0,360)}`,height:`${ht(100,200)}`,width:`${ht(5,15)}`}))}renderSnow(){return this.style.setProperty("--container-height",`${this._containerHeight}px`),this.style.setProperty("--fall-angle",`${this.computeFallingAngle()}deg`),this._particles.filter(t=>"snow"===t.type).map(t=>eB`
        <div
          class="snowflake-path"
          style="${re({"--duration":`${t.duration}s`,"--delay":`${t.delay}s`,"--pos-x":t.x,"--flake-size":`${t.size}px`,"--flake-opacity":t.opacity,"--flake-blur":`${t.blur}px`,"--flake-shadow-spread":`${t.shadowSpread}px`,"--drift-amplitude":`${t.driftAmplitude}px`,"--drift-frequency":t.driftFrequency})}"
        >
          <div class="snowflake"></div>
        </div>
      `)}renderRain(){return this.style.setProperty("--container-height",`${this._containerHeight}px`),this.style.setProperty("--fall-angle",`${this.computeFallingAngle(!0)}deg`),this._particles.filter(t=>"rain"===t.type).map(t=>eB`
        <div
          class="raindrop-path"
          style="${re({"--duration":`${t.duration}s`,"--delay":`${t.delay}s`,"--pos-x":t.x,"--landing-pos-y":`${t.landingPosY}px`})}"
        >
          <div class="raindrop"></div>
          <div class="splat"></div>
        </div>
      `)}renderLightning(){return eB` <div class="lightning-flash"></div> `}renderMoon(){return eB`
      <div class="moon"></div>
      ${this._particles.filter(t=>"star"===t.type).map(t=>eB`
          <div
            class="star"
            style="${re({left:`${t.x}%`,top:`${t.y}%`,width:`${t.size}px`,height:`${t.size}px`,opacity:t.opacity,animationDelay:`${t.delay}s`})}"
          ></div>
        `)}
    `}computeIntensity(){let t=this.currentForecast?.precipitation||0;if(t>0){let e=i1(iG(this.hass,this.weatherEntity,"precipitation"),"hourly");if(e>0)return Math.min(10,Math.ceil(t/e*10))}return this.weatherEntity?.state==="pouring"?10:3}computeFallingAngle(t=!1){let e=this.currentForecast;if(e?.wind_bearing===void 0||e?.wind_speed===void 0)return 0;let i=Math.min(i2(this.hass,this.weatherEntity,e)||0,14)/14;return Math.sin(e.wind_bearing*Math.PI/180)*Math.pow(i,t?.8:.5)*(t?15:35)}onThemeChanged(){this.classList.toggle("dark",this._isDark),this.classList.toggle("light",!this._isDark)}constructor(...t){super(...t),this._isDark=!1,this._containerHeight=0,this._particles=[]}}k([ew({attribute:!1})],he.prototype,"hass",void 0),k([ew({attribute:!1})],he.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],he.prototype,"currentForecast",void 0),k([ew({attribute:!1})],he.prototype,"config",void 0),k([eM()],he.prototype,"_isDark",void 0),k([eM()],he.prototype,"_containerHeight",void 0),he=k([t8("wfc-animation-provider")],he);let hi={type:"custom:weather-forecast-card",show_current:!0,show_forecast:!0,default_forecast:"daily",forecast:{mode:iU.Simple,show_sun_times:!0},forecast_action:{tap_action:{action:"toggle-forecast"}},tap_action:{action:"more-info"}};class hr extends e8{static{this.styles=ie}static async getConfigElement(){return document.createElement("weather-forecast-card-editor")}static getStubConfig(t){let e=Object.keys(t?.states??{}).filter(t=>t.startsWith("weather.")),i=e.find(t=>"weather.home"===t)||e[0]||"";return{...hi,entity:i}}setConfig(t){if(!t||!t.entity)throw Error("entity is required");if(!1===t.show_current&&!1===t.show_forecast)throw Error("At least one of show_current or show_forecast must be true");if(t.forecast?.daily_slots!=null&&t.forecast.daily_slots<=0)throw Error("daily_slots must be greater than 0");if(t.forecast?.hourly_slots!=null&&t.forecast.hourly_slots<=0)throw Error("hourly_slots must be greater than 0");if(t.current?.temperature_precision!=null&&(t.current.temperature_precision<0||t.current.temperature_precision>2)||t.forecast?.temperature_precision!=null&&(t.forecast.temperature_precision<0||t.forecast.temperature_precision>2))throw Error("temperature_precision must be 0 or greater and at most 2");this.config=t9({},hi,t),this._currentForecastType=this.config.default_forecast||"daily"}connectedCallback(){super.connectedCallback(),this._minForecastItemWidth=this.getInitialMinForecastItemWidth(),this.waitForLayout(),this.hasUpdated&&this.config&&this.hass&&this.subscribeForecastEvents()}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribeForecastEvents(),this._resizeObserver?.disconnect(),this._resizeObserver=null,this._currentItemWidth=0}shouldUpdate(t){return function(t,e,i){if(e.has("config")||i)return!0;if(t.config.entity){var r=e.get("hass");return!r||r.states[t.config.entity]!==t.hass.states[t.config.entity]}return!1}(this,t,!1)||t.has("_dailyForecastEvent")||t.has("_hourlyForecastEvent")||t.has("_currentForecastType")||t.has("_currentItemWidth")||t.has("_isScrollable")}updated(t){super.updated(t),this.config&&this.hass&&((t.has("config")||this.haveWeatherUnitsChanged(t)||!this._hourlySubscription&&!this._dailySubscription)&&this.subscribeForecastEvents(),t.has("_currentForecastType")&&this._forecastContainer&&this.layoutForecastItems(this._forecastContainer.clientWidth))}render(){if(!this.config||!this.hass)return eX;let t=this.config.entity,e=this.hass.states[t];if(!e){var i;return eB`<hui-warning>
        ${i=this.hass,!i?"Home Assistant instance is not available.":"NOT_RUNNING"!==i.config.state?`${i.localize("ui.card.common.entity_not_found")}: ${t}`:i.localize("ui.panel.lovelace.warning.starting")}
      </hui-warning>`}let r=this.config.forecast?.mode===iU.Chart,s=this.getCurrentForecast();return eB`
      <ha-card>
        ${this.config.show_condition_effects?eB`<wfc-animation-provider
              .hass=${this.hass}
              .weatherEntity=${e}
              .config=${this.config}
              .currentForecast=${this._hourlyForecastData?.[0]}
            ></wfc-animation-provider>`:eX}
        <div class="wfc-container">
          ${this.config.show_current?eB`<div
                class="wfc-current-weather-container"
                .actionHandler=${iV({hasHold:im(this.config.hold_action),hasDoubleClick:im(this.config.double_tap_action)})}
                @action=${this.onCardAction}
              >
                <wfc-current-weather
                  .hass=${this.hass}
                  .weatherEntity=${e}
                  .config=${this.config}
                  .hourlyForecast=${this._hourlyForecastData}
                  .dailyForecast=${this._dailyForecastData}
                ></wfc-current-weather>
              </div>`:eX}
          ${!1===this.config.show_forecast?eX:eB`<div
                class="${iq({"wfc-forecast-container":!0,"is-scrollable":this._isScrollable})}"
                .actionHandler=${iV({hasHold:im(this.config.forecast_action?.hold_action),hasDoubleClick:im(this.config.forecast_action?.double_tap_action)})}
                @action=${this.onForecastAction}
              >
                ${r?eB`
                      <wfc-forecast-chart
                        .hass=${this.hass}
                        .config=${this.config}
                        .weatherEntity=${e}
                        .forecast=${s}
                        .forecastType=${this._currentForecastType}
                        .itemWidth=${this._currentItemWidth}
                      ></wfc-forecast-chart>
                    `:eB`
                      <wfc-forecast-simple
                        .hass=${this.hass}
                        .config=${this.config}
                        .weatherEntity=${e}
                        .forecast=${s}
                        .forecastType=${this._currentForecastType}
                      ></wfc-forecast-simple>
                    `}
              </div>`}
        </div>
      </ha-card>
    `}waitForLayout(){this.isConnected&&(this._forecastContainer||(this._forecastContainer=this.renderRoot?.querySelector(".wfc-forecast-container")),(this._forecastContainer?.clientWidth||0)>0?this.initResizeObserver():requestAnimationFrame(()=>this.waitForLayout()))}initResizeObserver(){!this._resizeObserver&&this._forecastContainer&&(this._resizeObserver=new ResizeObserver(t=>{for(let e of t)e.contentRect.width>0&&this.layoutForecastItems(e.contentRect.width)}),this._resizeObserver.observe(this._forecastContainer),this.layoutForecastItems(this._forecastContainer.clientWidth))}getInitialMinForecastItemWidth(){return parseInt(getComputedStyle(this).getPropertyValue("--forecast-item-width").trim()||"60",10)}processForecastData(){if(!this._dailyForecastEvent&&!this._hourlyForecastEvent)return;let{attributes:t}=this.hass.states[this.config.entity];if(!t)return;let e=this._hourlyForecastData?.length,i=this._dailyForecastData?.length,r=iQ(t,this._hourlyForecastEvent,"hourly"),s=iQ(t,this._dailyForecastEvent,"daily");if(!r&&!s)return;this._dailyForecastData=s?.forecast,this._dailyForecastData&&this.config?.forecast?.daily_slots!=null&&(this._dailyForecastData=this._dailyForecastData.slice(0,this.config.forecast.daily_slots));let a=this.config?.forecast?.hourly_group_size||0;a>1&&r?.forecast?this._hourlyForecastData=((t,e)=>{let i=[],r=0;for(;r<t.length;){let s=new Date(t[r].datetime).getHours()%e,a=0===s?e:e-s,o=t.slice(r,r+a);if(r+=o.length,0===o.length)continue;let n=o.map(t=>t.temperature),l=o.map(t=>t.humidity).filter(t=>void 0!==t),h=o.map(t=>t.pressure).filter(t=>void 0!==t),c=o.map(t=>t.wind_speed).filter(t=>void 0!==t),d=o.map(t=>t.wind_bearing).filter(t=>void 0!==t),u=o.map(t=>t.precipitation_probability).filter(t=>void 0!==t),f=new Date(o[o.length-1].datetime);f.setMinutes(59),f.setSeconds(59);let p={datetime:o[0].datetime,groupEndtime:f.toISOString(),condition:i9(o),temperature:parseFloat(iA(n).toFixed(1))};l.length>0&&(p.humidity=Math.round(iA(l))),u.length>0&&(p.precipitation_probability=Math.max(...u)),o.some(t=>void 0!==t.precipitation)&&(p.precipitation=o.reduce((t,e)=>t+(e.precipitation||0),0));let g=o.map(t=>t.templow).filter(t=>void 0!==t);g.length>0&&(p.templow=Math.min(...g)),h.length>0&&(p.pressure=Math.round(iA(h))),c.length>0&&(p.wind_speed=iA(c)),d.length>0&&(p.wind_bearing=i6(d)),i.push(p)}return i})(r.forecast,a):this._hourlyForecastData=r?.forecast,this._hourlyForecastData&&this.config?.forecast?.hourly_slots!=null&&(this._hourlyForecastData=this._hourlyForecastData.slice(0,this.config.forecast.hourly_slots)),this.getCurrentForecast().length!==(("hourly"===this._currentForecastType?e:i)??0)&&this._forecastContainer&&this.layoutForecastItems(this._forecastContainer.clientWidth)}_toggleForecastView(t){let e="daily"===this._currentForecastType;this._currentForecastType="daily"===this._currentForecastType?"hourly":"daily",t&&this.config?.forecast?.scroll_to_selected&&requestAnimationFrame(()=>{if(e)this.scrollToForecastItem(t);else{let t=this._dailyForecastData?.[0];t&&this.scrollToForecastItem(t,"instant")}})}scrollToForecastItem(t,e="smooth"){if(!this._forecastContainer)return;let i=this._forecastContainer.querySelector(".wfc-scroll-container");if(!i)return;let r=iw(t.datetime),s=this.getCurrentForecast(),a=s.findIndex(t=>iw(t.datetime)===r),o=-1!==a?a:s.length-1,n=this._currentItemWidth||0;i.scrollTo({left:o*n,behavior:e})}unsubscribeForecastEvents(){iF.debug("Unsubscribing from forecast events"),this._dailySubscription?.then(t=>{try{t()}catch(t){iF.warn("Error unsubscribing from daily forecast:",t)}}),this._hourlySubscription?.then(t=>{try{t()}catch(t){iF.warn("Error unsubscribing from hourly forecast:",t)}}),this._dailySubscription=void 0,this._hourlySubscription=void 0}async subscribeForecastEvents(){if(this.unsubscribeForecastEvents(),this.isConnected&&this.hass&&this.config&&this.hass.config.components.includes("weather")&&this.hass.states[this.config.entity]){if(!(t=>{if(!t||!t.attributes)return!1;let e=t.attributes.supported_features;return"number"==typeof e&&(1&e)!=0&&(2&e)!=0})(this.hass.states[this.config.entity]))return void iF.warn("Weather entity does not support all forecast features.");iF.debug("Subscribing to forecast events");try{this._dailySubscription=Promise.resolve(i0(this.hass,this.config.entity,"daily",t=>{this._dailyForecastEvent=t,this.processForecastData()}))}catch(t){throw iR(t)&&setTimeout(()=>{this._dailyForecastEvent=void 0},2e3),t}try{this._hourlySubscription=Promise.resolve(i0(this.hass,this.config.entity,"hourly",t=>{this._hourlyForecastEvent=t,this.processForecastData()}))}catch(t){throw iR(t)&&setTimeout(()=>{this._hourlyForecastEvent=void 0},2e3),t}}}getCurrentForecast(){return("hourly"===this._currentForecastType?this._hourlyForecastData:this._dailyForecastData)||[]}layoutForecastItems(t){if(t<=0||!this._minForecastItemWidth)return;let e=this.getCurrentForecast();if(!e.length)return;let i=Math.max(1,Math.floor(t/this._minForecastItemWidth)),r=Math.floor(t/i),s=e.length,a=t-s*r,o=a>0?a/(s-1):0;this._currentItemWidth=r+o,this._isScrollable=e.length>i,this.style.setProperty("--forecast-item-gap",`${o}px`),this.style.setProperty("--forecast-item-width",`${r}px`)}haveWeatherUnitsChanged(t){if(!t.has("hass")||!this.config?.entity)return!1;let e=t.get("hass"),i=this.hass;if(!e||!i)return!1;let r=e.states[this.config.entity],s=i.states[this.config.entity];return!!r&&!!s&&Object.values(iX).some(t=>r.attributes[t]!==s.attributes[t])}constructor(...t){super(...t),this._currentForecastType="daily",this._isScrollable=!1,this._forecastContainer=null,this._resizeObserver=null,this.onForecastAction=t=>{if(!this.config)return;let e=t.detail.action;"tap"===e&&this.config.forecast_action?.tap_action?.action==="toggle-forecast"||"hold"===e&&this.config.forecast_action?.hold_action?.action==="toggle-forecast"||"double_tap"===e&&this.config.forecast_action?.double_tap_action?.action==="toggle-forecast"?this._toggleForecastView(t.detail.selectedForecast??void 0):ig(this,this.hass,{entity:this.config.entity,tap_action:this.config.forecast_action?.tap_action,hold_action:this.config.forecast_action?.hold_action,double_tap_action:this.config.forecast_action?.double_tap_action},t.detail.action)},this.onCardAction=t=>{ig(this,this.hass,this.config,t.detail.action)}}}k([ew({attribute:!1})],hr.prototype,"hass",void 0),k([eM()],hr.prototype,"config",void 0),k([eM()],hr.prototype,"_dailySubscription",void 0),k([eM()],hr.prototype,"_hourlySubscription",void 0),k([eM()],hr.prototype,"_dailyForecastEvent",void 0),k([eM()],hr.prototype,"_hourlyForecastEvent",void 0),k([eM()],hr.prototype,"_currentItemWidth",void 0),k([eM()],hr.prototype,"_currentForecastType",void 0),k([eM()],hr.prototype,"_isScrollable",void 0);var hs={};hs=JSON.parse('{"name":"weather-forecast-card","version":"0.7.0","description":"A TypeScript weather forecast card built with Parcel","type":"module","module":"dist/weather-forecast-card.js","targets":{"module":{"distDir":"./dist","source":["src/index.ts"],"optimize":true,"publicUrl":"/hacsfiles/ha-weather-forecast-card/","includeNodeModules":true}},"scripts":{"dev":"parcel serve test/app/index.html test/app/resources/img/*.svg --open","build":"parcel build --no-source-maps --target module","build:debug":"parcel build --target module --no-optimize","clean":"rm -rf ./dist/ ./.parcel-cache","demo":"parcel serve demo/index.html demo/background.png","lint":"eslint \'src/**/*.ts\'","test":"vitest run","test:watch":"vitest watch"},"keywords":[],"author":"","license":"ISC","dependencies":{"chart.js":"^4.5.1","chartjs-plugin-datalabels":"^2.2.0","consola":"^3.4.2","custom-card-helpers":"^1.9.0","home-assistant-js-websocket":"^9.5.0","lit":"^3.1.0","lodash-es":"^4.17.22","memoize-one":"^6.0.0","suncalc":"^1.9.0"},"devDependencies":{"@eslint/js":"^9.39.2","@mdi/js":"^7.4.47","@open-wc/testing":"^4.0.0","@parcel/transformer-inline-string":"^2.16.3","@types/lodash-es":"^4.17.12","@types/node":"^20.10.0","@types/suncalc":"^1.9.2","eslint":"^9.39.2","eslint-config-prettier":"^10.1.8","happy-dom":"^20.0.11","parcel":"^2.16.1","prettier":"^3.7.4","typescript":"^5.9.3","typescript-eslint":"^8.50.0","vitest":"^4.0.16"}}');class ha extends e8{setConfig(t){this._config=t}render(){if(!this.hass||!this._config)return eX;let t=this._schema(this.localize.bind(this)),e=hn(this._config);return eB`
      <ha-form
        .hass=${this.hass}
        .data=${e}
        .schema=${t}
        .computeLabel=${this._computeLabel}
        .computeHelper=${this._computeHelper}
        @value-changed=${this._valueChanged}
      >
      </ha-form>
    `}_valueChanged(t){t.stopPropagation();let e=t.detail.value;"show_both"===e.forecast_mode?(e.show_current=!0,e.show_forecast=!0):"show_current"===e.forecast_mode?(e.show_current=!0,e.show_forecast=!1):(e.show_current=!1,e.show_forecast=!0),delete e.forecast_mode;let i=ho(e);i?.forecast?.extra_attribute==="none"&&delete i.forecast.extra_attribute,Array.isArray(i.show_condition_effects)&&iB.every(t=>i.show_condition_effects.includes(t))&&(i.show_condition_effects=!0),Array.isArray(i?.current?.show_attributes)&&iH.every(t=>i.current.show_attributes.includes(t))&&(i.current.show_attributes=!0),il(this,"config-changed",{config:i})}constructor(...t){super(...t),this._schema=iv(t=>[...this._genericSchema(t),...this._currentWeatherSchema(t),...this._forecastSchema(t),...this._interactionsSchema(),...this._advancedSchema()]),this._genericSchema=t=>[{name:"entity",required:!0,selector:{entity:{domain:"weather"}},optional:!1},{name:"name",selector:{text:{}},optional:!0},{name:"temperature_entity",selector:{entity:{domain:"sensor",device_class:"temperature"}},optional:!0},{name:"forecast_mode",default:"show_both",selector:{select:{options:[{value:"show_both",label:t("ui.panel.lovelace.editor.card.weather-forecast.show_both")},{value:"show_current",label:t("ui.panel.lovelace.editor.card.weather-forecast.show_only_current")},{value:"show_forecast",label:t("ui.panel.lovelace.editor.card.weather-forecast.show_only_forecast")}]}}},{name:"default_forecast",default:"daily",optional:!0,selector:{select:{options:[{value:"hourly",label:t("ui.panel.lovelace.editor.card.weather-forecast.hourly")},{value:"daily",label:t("ui.panel.lovelace.editor.card.weather-forecast.daily")}]}}},{name:"show_condition_effects",default:!1,optional:!0,selector:{select:{multiple:!0,options:iB.map(t=>({value:t,label:lN(t)}))}}}],this._currentWeatherSchema=t=>[{name:"current.show_attributes",default:!1,optional:!0,selector:{select:{multiple:!0,options:iH.map(e=>({value:e,label:t(`ui.card.weather.attributes.${e}`)||lN(e).replace(/_/g," ")}))}}},{name:"current.secondary_info_attribute",default:"none",optional:!0,selector:{select:{options:iH.map(e=>({value:e,label:t(`ui.card.weather.attributes.${e}`)||lN(e).replace(/_/g," ")}))}}}],this._forecastSchema=t=>[{name:"forecast.mode",default:"simple",selector:{select:{options:[{value:"simple",label:"Simple"},{value:"chart",label:"Chart"}]}},optional:!0},{name:"forecast.extra_attribute",optional:!0,selector:{select:{mode:"dropdown",options:[{value:"none",label:t("ui.panel.lovelace.editor.card.weather-forecast.none")||"(no attribute)"},{value:"wind_bearing",label:t("ui.card.weather.attributes.wind_bearing")||"Wind bearing"},{value:"wind_direction",label:t("ui.card.weather.attributes.wind_direction")||"Wind direction"},{value:"precipitation_probability",label:t("ui.card.weather.attributes.precipitation_probability")||"Precipitation probability"}]}}},{name:"forecast.scroll_to_selected",selector:{boolean:{}},default:!1,optional:!0},{name:"forecast.show_sun_times",selector:{boolean:{}},default:!0,optional:!0},{name:"forecast.use_color_thresholds",selector:{boolean:{}},default:!1,optional:!0},{name:"forecast.hourly_group_size",optional:!0,selector:{number:{min:1,max:4}},default:1},{name:"forecast.hourly_slots",optional:!0,selector:{number:{min:1}}},{name:"forecast.daily_slots",optional:!0,selector:{number:{min:1}}}],this._interactionsSchema=()=>[{name:"forecast_interactions",type:"expandable",flatten:!0,schema:[{name:"forecast_action.tap_action",selector:{ui_action:{default_action:"toggle-forecast"}}},{name:"",type:"optional_actions",flatten:!0,schema:["hold_action","double_tap_action"].map(t=>({name:`forecast_action.${t}`,selector:{ui_action:{default_action:"none"}}}))}]},{name:"interactions",type:"expandable",flatten:!0,schema:[{name:"tap_action",selector:{ui_action:{default_action:"more-info"}}},{name:"",type:"optional_actions",flatten:!0,schema:["hold_action","double_tap_action"].map(t=>({name:t,selector:{ui_action:{default_action:"none"}}}))}]}],this._advancedSchema=()=>[{name:"advanced_settings",type:"expandable",flatten:!0,schema:[{name:"icons_path",selector:{text:{}},optional:!0},{name:"current.temperature_precision",optional:!0,selector:{number:{min:0,max:2}}},{name:"forecast.temperature_precision",optional:!0,selector:{number:{min:0,max:2}}}]}],this._computeLabel=t=>{let e=t.name.startsWith("forecast_action.")?t.name.split(".")[1]:t.name;switch(e){case"entity":return`${this.hass.localize("ui.panel.lovelace.editor.card.generic.entity")} (${(this.hass.localize("ui.panel.lovelace.editor.card.config.required")||"required").toLocaleLowerCase()})`;case"name":return this.hass.localize("ui.panel.lovelace.editor.card.generic.name");case"temperature_entity":return`${this.hass.localize("ui.card.weather.attributes.temperature")} ${(this.hass.localize("ui.panel.lovelace.editor.card.generic.entity")||"entity").toLocaleLowerCase()}`;case"forecast_mode":return this.hass.localize("ui.panel.lovelace.editor.card.weather-forecast.weather_to_show");case"default_forecast":return this.hass.localize("ui.panel.lovelace.editor.card.weather-forecast.forecast_type");case"icons_path":return"Path to custom icons";case"current.show_attributes":return this.hass.localize("ui.panel.lovelace.editor.card.generic.attribute")||"attribute";case"current.secondary_info_attribute":return this.hass.localize("ui.panel.lovelace.editor.card.generic.secondary_info_attribute")||"Secondary info attribute";case"forecast.extra_attribute":return`Extra ${(this.hass.localize("ui.card.weather.forecast")||"forecast").toLocaleLowerCase()} ${(this.hass.localize("ui.panel.lovelace.editor.card.generic.attribute")||"attribute").toLocaleLowerCase()}`;case"forecast.mode":return"Forecast display mode";case"current.temperature_precision":return"Current temperature precision";case"forecast.temperature_precision":return"Forecast temperature precision";case"forecast.scroll_to_selected":return"Scroll to selected forecast";case"forecast.show_sun_times":return"Show sunrise and sunset times";case"forecast.use_color_thresholds":return"Use color thresholds";case"forecast.hourly_group_size":return"Hourly forecast group size";case"forecast.hourly_slots":return"Hourly forecast slots";case"forecast.daily_slots":return"Daily forecast slots";case"forecast_interactions":return`${this.hass.localize("ui.card.weather.forecast")} ${(this.hass.localize("ui.panel.lovelace.editor.card.generic.interactions")||"interactions").toLocaleLowerCase()}`;case"advanced_settings":return this.hass.localize("ui.dialogs.helper_settings.generic.advanced_settings");case"show_condition_effects":return"Show condition effects";default:return this.hass.localize(`ui.panel.lovelace.editor.card.generic.${e}`)}},this._computeHelper=t=>{switch(t.name){case"temperature_entity":return"Optional temperature sensor entity to override the weather entity's temperature.";case"default_forecast":return"Select the default forecast type to show when forecasts are enabled. Users can still toggle between hourly and daily forecasts if both are available.";case"current.show_attributes":return"Select which weather attributes to display in the current weather section.";case"current.secondary_info_attribute":return"Select a weather attribute to display as secondary information in the current weather section.";case"forecast.extra_attribute":return"Select an extra attribute to display below each forecast.";case"forecast_interactions":return"Action to perform when the forecast section is interacted with. Default tap action toggles between hourly and daily forecasts.";case"interactions":return"Action to perform when the non-forecast area of the card is interacted with.";case"icons_path":return"Path to custom weather condition icons (e.g., /local/img/weather).";case"forecast.scroll_to_selected":return"Automatically scrolls to the first hourly forecast of the selected date when switching to hourly view, and returns to the first daily entry when switching back.";case"forecast.show_sun_times":return"Displays sunrise and sunset times in the hourly forecast, and uses specific icons to visualize clear night conditions.";case"forecast.use_color_thresholds":return"Replaces solid temperature lines with a gradient based on actual values when using forecast chart mode.";case"forecast.hourly_group_size":return"Aggregate hourly forecast data into groups to reduce the number of forecast entries shown.";case"forecast.hourly_slots":return"Limit the number of hourly forecast entries to show.";case"forecast.daily_slots":return"Limit the number of daily forecast entries to show.";case"current.temperature_precision":return"The number of decimal places to show for current temperature values.";case"forecast.temperature_precision":return"The number of decimal places to show for forecast temperature values.";case"name":return"Overrides the friendly name of the entity.";case"show_condition_effects":return"Select which weather conditions initiate visual effects and animations on the card.";default:return}},this.localize=t=>{let e;if(this._config?.entity&&t.startsWith("ui.card.weather.attributes")){let i=this.hass.states[this._config.entity];i&&(e=this.hass.formatEntityAttributeName(i,t.replace("ui.card.weather.attributes.","")))}return e||(e=this.hass.localize(t)),e}}}k([ew({attribute:!1})],ha.prototype,"hass",void 0),k([eM()],ha.prototype,"_config",void 0),ha=k([t8("weather-forecast-card-editor")],ha);let ho=t=>{let e={...t};for(let i of Object.keys(t)){if(!i.startsWith("forecast.")&&!i.startsWith("forecast_action.")&&!i.startsWith("current."))continue;let r=i.split(".");if(r.length<2)continue;let[s,a]=r;s&&a&&(e[s]&&"object"==typeof e[s]||(e[s]={}),e[s][a]=t[i],delete e[i])}return e},hn=t=>{let e=hl(t);return e.forecast_mode=e.show_current&&e.show_forecast?"show_both":e.show_current?"show_current":"show_forecast",!0===e.show_condition_effects&&(e.show_condition_effects=[...iB]),!0===e["current.show_attributes"]&&(e["current.show_attributes"]=[...iH]),e},hl=t=>{let e={};for(let i in t){let r=t[i];if("forecast"===i&&r&&"object"==typeof r&&!Array.isArray(r)){for(let t in r)e[`forecast.${t}`]=r[t];continue}if("current"===i&&r&&"object"==typeof r&&!Array.isArray(r)){for(let t in r)e[`current.${t}`]=r[t];continue}if("forecast_action"===i&&r&&"object"==typeof r&&!Array.isArray(r)){for(let t in r)e[`forecast_action.${t}`]=r[t];continue}e[i]=r}return e};customElements.define("weather-forecast-card",hr),window.customCards=window.customCards||[],window.customCards.push({type:"weather-forecast-card",name:"Weather Forecast Card",description:"Weather forecast card for Home Assistant"}),console.info(`%cWEATHER-FORECAST-CARD %c${hs.version}`,"color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray");