let t,e;function i(t,e,i,s){Object.defineProperty(t,e,{get:i,set:s,enumerable:!0,configurable:!0})}var s,r,a,o,n,l,h,c,d,u,f,p,g,m,_,b,y=globalThis,v={},x={},w=y.parcelRequirefe65;null==w&&((w=function(t){if(t in v)return v[t].exports;if(t in x){var e=x[t];delete x[t];var i={id:t,exports:{}};return v[t]=i,e.call(i.exports,i,i.exports),i.exports}var s=Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){x[t]=e},y.parcelRequirefe65=w);var M=w.register;function k(t,e,i,s){var r,a=arguments.length,o=a<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)(r=t[n])&&(o=(a<3?r(o):a>3?r(e,i,o):r(e,i))||o);return a>3&&o&&Object.defineProperty(e,i,o),o}M("1hpPT",function(t,e){i(t.exports,"default",()=>l);var s=w("dI4CB"),r=e&&!e.nodeType&&e,a=r&&t&&!t.nodeType&&t,o=a&&a.exports===r?s.default.Buffer:void 0,n=o?o.allocUnsafe:void 0,l=function(t,e){if(e)return t.slice();var i=t.length,s=n?n(i):new t.constructor(i);return t.copy(s),s}}),M("dI4CB",function(t,e){i(t.exports,"default",()=>a);var s=w("eR331"),r="object"==typeof self&&self&&self.Object===Object&&self,a=s.default||r||Function("return this")()}),M("eR331",function(t,e){i(t.exports,"default",()=>s);var s="object"==typeof y&&y&&y.Object===Object&&y}),M("ihvuy",function(t,e){i(t.exports,"default",()=>l);var s=w("dI4CB"),r=w("iOIik"),a=e&&!e.nodeType&&e,o=a&&t&&!t.nodeType&&t,n=o&&o.exports===a?s.default.Buffer:void 0,l=(n?n.isBuffer:void 0)||r.default}),M("iOIik",function(t,e){i(t.exports,"default",()=>s);var s=function(){return!1}}),M("1woAA",function(t,e){i(t.exports,"default",()=>n);var s=w("eR331"),r=e&&!e.nodeType&&e,a=r&&t&&!t.nodeType&&t,o=a&&a.exports===r&&s.default.process,n=function(){try{var t=a&&a.require&&a.require("util").types;if(t)return t;return o&&o.binding&&o.binding("util")}catch(t){}}()}),"function"==typeof SuppressedError&&SuppressedError;var S=function(t,e){return t===e||t!=t&&e!=e},$=function(t,e){for(var i=t.length;i--;)if(S(t[i][0],e))return i;return -1},A=Array.prototype.splice;function P(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}P.prototype.clear=function(){this.__data__=[],this.size=0},P.prototype.delete=function(t){var e=this.__data__,i=$(e,t);return!(i<0)&&(i==e.length-1?e.pop():A.call(e,i,1),--this.size,!0)},P.prototype.get=function(t){var e=this.__data__,i=$(e,t);return i<0?void 0:e[i][1]},P.prototype.has=function(t){return $(this.__data__,t)>-1},P.prototype.set=function(t,e){var i=this.__data__,s=$(i,t);return s<0?(++this.size,i.push([t,e])):i[s][1]=e,this};var C=w("dI4CB"),E=C.default.Symbol,O=Object.prototype,D=O.hasOwnProperty,T=O.toString,L=E?E.toStringTag:void 0,z=function(t){var e=D.call(t,L),i=t[L];try{t[L]=void 0;var s=!0}catch(t){}var r=T.call(t);return s&&(e?t[L]=i:delete t[L]),r},F=Object.prototype.toString,R=E?E.toStringTag:void 0,I=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":R&&R in Object(t)?z(t):F.call(t)},j=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},V=function(t){if(!j(t))return!1;var e=I(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},C=w("dI4CB"),W=C.default["__core-js_shared__"],N=(o=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",H=Function.prototype.toString,B=function(t){if(null!=t){try{return H.call(t)}catch(t){}try{return t+""}catch(t){}}return""},U=/^\[object .+?Constructor\]$/,q=Object.prototype,X=Function.prototype.toString,Y=q.hasOwnProperty,K=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=function(t){return!!j(t)&&(!N||!(N in t))&&(V(t)?K:U).test(B(t))},G=function(t,e){var i=null==t?void 0:t[e];return J(i)?i:void 0},C=w("dI4CB"),Z=G(C.default,"Map"),Q=G(Object,"create"),tt=Object.prototype.hasOwnProperty,te=Object.prototype.hasOwnProperty;function ti(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}ti.prototype.clear=function(){this.__data__=Q?Q(null):{},this.size=0},ti.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=!!e,e},ti.prototype.get=function(t){var e=this.__data__;if(Q){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return tt.call(e,t)?e[t]:void 0},ti.prototype.has=function(t){var e=this.__data__;return Q?void 0!==e[t]:te.call(e,t)},ti.prototype.set=function(t,e){var i=this.__data__;return this.size+=+!this.has(t),i[t]=Q&&void 0===e?"__lodash_hash_undefined__":e,this};var ts=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},tr=function(t,e){var i=t.__data__;return ts(e)?i["string"==typeof e?"string":"hash"]:i.map};function ta(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function to(t){var e=this.__data__=new P(t);this.size=e.size}ta.prototype.clear=function(){this.size=0,this.__data__={hash:new ti,map:new(Z||P),string:new ti}},ta.prototype.delete=function(t){var e=tr(this,t).delete(t);return this.size-=!!e,e},ta.prototype.get=function(t){return tr(this,t).get(t)},ta.prototype.has=function(t){return tr(this,t).has(t)},ta.prototype.set=function(t,e){var i=tr(this,t),s=i.size;return i.set(t,e),this.size+=+(i.size!=s),this},to.prototype.clear=function(){this.__data__=new P,this.size=0},to.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},to.prototype.get=function(t){return this.__data__.get(t)},to.prototype.has=function(t){return this.__data__.has(t)},to.prototype.set=function(t,e){var i=this.__data__;if(i instanceof P){var s=i.__data__;if(!Z||s.length<199)return s.push([t,e]),this.size=++i.size,this;i=this.__data__=new ta(s)}return i.set(t,e),this.size=i.size,this};var tn=function(){try{var t=G(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),tl=function(t,e,i){"__proto__"==e&&tn?tn(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i},th=function(t,e,i){(void 0===i||S(t[e],i))&&(void 0!==i||e in t)||tl(t,e,i)},tc=function(t,e,i){for(var s=-1,r=Object(t),a=i(t),o=a.length;o--;){var n=a[++s];if(!1===e(r[n],n,r))break}return t},td=w("1hpPT"),C=w("dI4CB"),tu=C.default.Uint8Array,tf=function(t){var e=new t.constructor(t.byteLength);return new tu(e).set(new tu(t)),e},tp=function(t,e){var i=e?tf(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)},tg=function(t,e){var i=-1,s=t.length;for(e||(e=Array(s));++i<s;)e[i]=t[i];return e},tm=Object.create,t_=function(){function t(){}return function(e){if(!j(e))return{};if(tm)return tm(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}(),tb=(n=Object.getPrototypeOf,l=Object,function(t){return n(l(t))}),ty=Object.prototype,tv=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ty)},tx=function(t){return null!=t&&"object"==typeof t},tw=function(t){return tx(t)&&"[object Arguments]"==I(t)},tM=Object.prototype,tk=tM.hasOwnProperty,tS=tM.propertyIsEnumerable,t$=tw(function(){return arguments}())?tw:function(t){return tx(t)&&tk.call(t,"callee")&&!tS.call(t,"callee")},tA=Array.isArray,tP=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=0x1fffffffffffff},tC=function(t){return null!=t&&tP(t.length)&&!V(t)},tE=w("ihvuy"),tO=Object.prototype,tD=Function.prototype.toString,tT=tO.hasOwnProperty,tL=tD.call(Object),tz=function(t){if(!tx(t)||"[object Object]"!=I(t))return!1;var e=tb(t);if(null===e)return!0;var i=tT.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&tD.call(i)==tL},tF={};tF["[object Float32Array]"]=tF["[object Float64Array]"]=tF["[object Int8Array]"]=tF["[object Int16Array]"]=tF["[object Int32Array]"]=tF["[object Uint8Array]"]=tF["[object Uint8ClampedArray]"]=tF["[object Uint16Array]"]=tF["[object Uint32Array]"]=!0,tF["[object Arguments]"]=tF["[object Array]"]=tF["[object ArrayBuffer]"]=tF["[object Boolean]"]=tF["[object DataView]"]=tF["[object Date]"]=tF["[object Error]"]=tF["[object Function]"]=tF["[object Map]"]=tF["[object Number]"]=tF["[object Object]"]=tF["[object RegExp]"]=tF["[object Set]"]=tF["[object String]"]=tF["[object WeakMap]"]=!1;var tR=w("1woAA"),tI=tR.default&&tR.default.isTypedArray,tj=tI?function(t){return tI(t)}:function(t){return tx(t)&&tP(t.length)&&!!tF[I(t)]},tV=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},tW=Object.prototype.hasOwnProperty,tN=function(t,e,i){var s=t[e];tW.call(t,e)&&S(s,i)&&(void 0!==i||e in t)||tl(t,e,i)},tH=function(t,e,i,s){var r=!i;i||(i={});for(var a=-1,o=e.length;++a<o;){var n=e[a],l=s?s(i[n],t[n],n,i,t):void 0;void 0===l&&(l=t[n]),r?tl(i,n,l):tN(i,n,l)}return i},tB=function(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s},tE=w("ihvuy"),tU=/^(?:0|[1-9]\d*)$/,tq=function(t,e){var i=typeof t;return!!(e=null==e?0x1fffffffffffff:e)&&("number"==i||"symbol"!=i&&tU.test(t))&&t>-1&&t%1==0&&t<e},tX=Object.prototype.hasOwnProperty,tY=function(t,e){var i=tA(t),s=!i&&t$(t),r=!i&&!s&&(0,tE.default)(t),a=!i&&!s&&!r&&tj(t),o=i||s||r||a,n=o?tB(t.length,String):[],l=n.length;for(var h in t)(e||tX.call(t,h))&&!(o&&("length"==h||r&&("offset"==h||"parent"==h)||a&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||tq(h,l)))&&n.push(h);return n},tK=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e},tJ=Object.prototype.hasOwnProperty,tG=function(t){if(!j(t))return tK(t);var e=tv(t),i=[];for(var s in t)"constructor"==s&&(e||!tJ.call(t,s))||i.push(s);return i},tZ=function(t){return tC(t)?tY(t,!0):tG(t)},tQ=function(t,e,i,s,r,a,o){var n=tV(t,i),l=tV(e,i),h=o.get(l);if(h)return void th(t,i,h);var c=a?a(n,l,i+"",t,e,o):void 0,d=void 0===c;if(d){var u=tA(l),f=!u&&(0,tE.default)(l),p=!u&&!f&&tj(l);(c=l,u||f||p)?tA(n)?c=n:tx(n)&&tC(n)?c=tg(n):f?(d=!1,c=(0,td.default)(l,!0)):p?(d=!1,c=tp(l,!0)):c=[]:tz(l)||t$(l)?(c=n,t$(n))?c=tH(n,tZ(n)):(!j(n)||V(n))&&(c="function"!=typeof l.constructor||tv(l)?{}:t_(tb(l))):d=!1}d&&(o.set(l,c),r(c,l,s,a,o),o.delete(l)),th(t,i,c)},t0=function t(e,i,s,r,a){e!==i&&tc(i,function(o,n){if(a||(a=new to),j(o))tQ(e,i,n,s,t,r,a);else{var l=r?r(tV(e,n),o,n+"",e,i,a):void 0;void 0===l&&(l=o),th(e,n,l)}},tZ)},t1=function(t){return t},t2=function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)},t5=Math.max,t4=Date.now,t3=(h=tn?function(t,e){return tn(t,"toString",{configurable:!0,enumerable:!1,value:function(){return e},writable:!0})}:t1,c=0,d=0,function(){var t=t4(),e=16-(t-d);if(d=t,e>0){if(++c>=800)return arguments[0]}else c=0;return h.apply(void 0,arguments)}),t6=function(t,e,i){if(!j(i))return!1;var s=typeof e;return("number"==s?!!(tC(i)&&tq(e,i.length)):"string"==s&&e in i)&&S(i[e],t)};var t9=(u=function(t,e,i){t0(t,e,i)},t3((s=function(t,e){var i=-1,s=e.length,r=s>1?e[s-1]:void 0,a=s>2?e[2]:void 0;for(r=u.length>3&&"function"==typeof r?(s--,r):void 0,a&&t6(e[0],e[1],a)&&(r=s<3?void 0:r,s=1),t=Object(t);++i<s;){var o=e[i];o&&u(t,o,i,r)}return t},a=t5(void 0===(a=r)?s.length-1:a,0),function(){for(var t=arguments,e=-1,i=t5(t.length-a,0),r=Array(i);++e<i;)r[e]=t[a+e];e=-1;for(var o=Array(a+1);++e<a;)o[e]=t[e];return o[a]=t1(r),t2(s,this,o)}),s+""));let t8=t=>(e,i)=>{void 0!==i?i.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)},t7=globalThis,et=t7.ShadowRoot&&(void 0===t7.ShadyCSS||t7.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ee=Symbol(),ei=new WeakMap;class es{constructor(t,e,i){if(this._$cssResult$=!0,i!==ee)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(et&&void 0===t){let i=void 0!==e&&1===e.length;i&&(t=ei.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&ei.set(e,t))}return t}toString(){return this.cssText}}let er=t=>new es("string"==typeof t?t:t+"",void 0,ee),ea=(t,...e)=>new es(1===t.length?t[0]:e.reduce((e,i,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]),t,ee),eo=et?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(let i of t.cssRules)e+=i.cssText;return er(e)})(t):t,{is:en,defineProperty:el,getOwnPropertyDescriptor:eh,getOwnPropertyNames:ec,getOwnPropertySymbols:ed,getPrototypeOf:eu}=Object,ef=globalThis,ep=ef.trustedTypes,eg=ep?ep.emptyScript:"",em=ef.reactiveElementPolyfillSupport,e_={toAttribute(t,e){switch(e){case Boolean:t=t?eg:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},eb=(t,e)=>!en(t,e),ey={attribute:!0,type:String,converter:e_,reflect:!1,useDefault:!1,hasChanged:eb};Symbol.metadata??=Symbol("metadata"),ef.litPropertyMetadata??=new WeakMap;class ev extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=ey){if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){let i=Symbol(),s=this.getPropertyDescriptor(t,i,e);void 0!==s&&el(this.prototype,t,s)}}static getPropertyDescriptor(t,e,i){let{get:s,set:r}=eh(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get:s,set(e){let a=s?.call(this);r?.call(this,e),this.requestUpdate(t,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??ey}static _$Ei(){if(this.hasOwnProperty("elementProperties"))return;let t=eu(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty("finalized"))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty("properties")){let t=this.properties;for(let e of[...ec(t),...ed(t)])this.createProperty(e,t[e])}let t=this[Symbol.metadata];if(null!==t){let e=litPropertyMetadata.get(t);if(void 0!==e)for(let[t,i]of e)this.elementProperties.set(t,i)}for(let[t,e]of(this._$Eh=new Map,this.elementProperties)){let i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let e=[];if(Array.isArray(t))for(let i of new Set(t.flat(1/0).reverse()))e.unshift(eo(i));else void 0!==t&&e.push(eo(t));return e}static _$Eu(t,e){let i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){let t=new Map;for(let e of this.constructor.elementProperties.keys())this.hasOwnProperty(e)&&(t.set(e,this[e]),delete this[e]);t.size>0&&(this._$Ep=t)}createRenderRoot(){let t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{if(et)t.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(let i of e){let e=document.createElement("style"),s=t7.litNonce;void 0!==s&&e.setAttribute("nonce",s),e.textContent=i.cssText,t.appendChild(e)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$ET(t,e){let i=this.constructor.elementProperties.get(t),s=this.constructor._$Eu(t,i);if(void 0!==s&&!0===i.reflect){let r=(void 0!==i.converter?.toAttribute?i.converter:e_).toAttribute(e,i.type);this._$Em=t,null==r?this.removeAttribute(s):this.setAttribute(s,r),this._$Em=null}}_$AK(t,e){let i=this.constructor,s=i._$Eh.get(t);if(void 0!==s&&this._$Em!==s){let t=i.getPropertyOptions(s),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:e_;this._$Em=s;let a=r.fromAttribute(e,t.type);this[s]=a??this._$Ej?.get(s)??a,this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){let s=this.constructor,r=this[t];if(!(((i??=s.getPropertyOptions(t)).hasChanged??eb)(r,e)||i.useDefault&&i.reflect&&r===this._$Ej?.get(t)&&!this.hasAttribute(s._$Eu(t,i))))return;this.C(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,e,{useDefault:i,reflect:s,wrapped:r},a){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,a??e??this[t]),!0!==r||void 0!==a)||(this._$AL.has(t)||(this.hasUpdated||i||(e=void 0),this._$AL.set(t,e)),!0===s&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}let t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}let t=this.constructor.elementProperties;if(t.size>0)for(let[e,i]of t){let{wrapped:t}=i,s=this[e];!0!==t||this._$AL.has(e)||void 0===s||this.C(e,void 0,i,s)}}let t=!1,e=this._$AL;try{(t=this.shouldUpdate(e))?(this.willUpdate(e),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(e)):this._$EM()}catch(e){throw t=!1,this._$EM(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}ev.elementStyles=[],ev.shadowRootOptions={mode:"open"},ev.elementProperties=new Map,ev.finalized=new Map,em?.({ReactiveElement:ev}),(ef.reactiveElementVersions??=[]).push("2.1.1");let ex={attribute:!0,type:String,converter:e_,reflect:!1,hasChanged:eb};function ew(t){return(e,i)=>{let s;return"object"==typeof i?((t=ex,e,i)=>{let{kind:s,metadata:r}=i,a=globalThis.litPropertyMetadata.get(r);if(void 0===a&&globalThis.litPropertyMetadata.set(r,a=new Map),"setter"===s&&((t=Object.create(t)).wrapped=!0),a.set(i.name,t),"accessor"===s){let{name:s}=i;return{set(i){let r=e.get.call(this);e.set.call(this,i),this.requestUpdate(s,r,t)},init(e){return void 0!==e&&this.C(s,void 0,t,e),e}}}if("setter"===s){let{name:s}=i;return function(i){let r=this[s];e.call(this,i),this.requestUpdate(s,r,t)}}throw Error("Unsupported decorator location: "+s)})(t,e,i):(s=e.hasOwnProperty(i),e.constructor.createProperty(i,t),s?Object.getOwnPropertyDescriptor(e,i):void 0)}}function eM(t){return ew({...t,state:!0,attribute:!1})}let ek=globalThis,eS=ek.trustedTypes,e$=eS?eS.createPolicy("lit-html",{createHTML:t=>t}):void 0,eA="$lit$",eP=`lit$${Math.random().toFixed(9).slice(2)}$`,eC="?"+eP,eE=`<${eC}>`,eO=document,eD=()=>eO.createComment(""),eT=t=>null===t||"object"!=typeof t&&"function"!=typeof t,eL=Array.isArray,ez="[ 	\n\f\r]",eF=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,eR=/-->/g,eI=/>/g,ej=RegExp(`>|${ez}(?:([^\\s"'>=/]+)(${ez}*=${ez}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),eV=/'/g,eW=/"/g,eN=/^(?:script|style|textarea|title)$/i,eH=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),eB=eH(1),eU=eH(2),eq=(eH(3),Symbol.for("lit-noChange")),eX=Symbol.for("lit-nothing"),eY=new WeakMap,eK=eO.createTreeWalker(eO,129);function eJ(t,e){if(!eL(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==e$?e$.createHTML(e):e}class eG{constructor({strings:t,_$litType$:e},i){let s;this.parts=[];let r=0,a=0,o=t.length-1,n=this.parts,[l,h]=((t,e)=>{let i=t.length-1,s=[],r,a=2===e?"<svg>":3===e?"<math>":"",o=eF;for(let e=0;e<i;e++){let i=t[e],n,l,h=-1,c=0;for(;c<i.length&&(o.lastIndex=c,null!==(l=o.exec(i)));)c=o.lastIndex,o===eF?"!--"===l[1]?o=eR:void 0!==l[1]?o=eI:void 0!==l[2]?(eN.test(l[2])&&(r=RegExp("</"+l[2],"g")),o=ej):void 0!==l[3]&&(o=ej):o===ej?">"===l[0]?(o=r??eF,h=-1):void 0===l[1]?h=-2:(h=o.lastIndex-l[2].length,n=l[1],o=void 0===l[3]?ej:'"'===l[3]?eW:eV):o===eW||o===eV?o=ej:o===eR||o===eI?o=eF:(o=ej,r=void 0);let d=o===ej&&t[e+1].startsWith("/>")?" ":"";a+=o===eF?i+eE:h>=0?(s.push(n),i.slice(0,h)+eA+i.slice(h)+eP+d):i+eP+(-2===h?e:d)}return[eJ(t,a+(t[i]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),s]})(t,e);if(this.el=eG.createElement(l,i),eK.currentNode=this.el.content,2===e||3===e){let t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(s=eK.nextNode())&&n.length<o;){if(1===s.nodeType){if(s.hasAttributes())for(let t of s.getAttributeNames())if(t.endsWith(eA)){let e=h[a++],i=s.getAttribute(t).split(eP),o=/([.?@])?(.*)/.exec(e);n.push({type:1,index:r,name:o[2],strings:i,ctor:"."===o[1]?e2:"?"===o[1]?e5:"@"===o[1]?e4:e1}),s.removeAttribute(t)}else t.startsWith(eP)&&(n.push({type:6,index:r}),s.removeAttribute(t));if(eN.test(s.tagName)){let t=s.textContent.split(eP),e=t.length-1;if(e>0){s.textContent=eS?eS.emptyScript:"";for(let i=0;i<e;i++)s.append(t[i],eD()),eK.nextNode(),n.push({type:2,index:++r});s.append(t[e],eD())}}}else if(8===s.nodeType)if(s.data===eC)n.push({type:2,index:r});else{let t=-1;for(;-1!==(t=s.data.indexOf(eP,t+1));)n.push({type:7,index:r}),t+=eP.length-1}r++}}static createElement(t,e){let i=eO.createElement("template");return i.innerHTML=t,i}}function eZ(t,e,i=t,s){if(e===eq)return e;let r=void 0!==s?i._$Co?.[s]:i._$Cl,a=eT(e)?void 0:e._$litDirective$;return r?.constructor!==a&&(r?._$AO?.(!1),void 0===a?r=void 0:(r=new a(t))._$AT(t,i,s),void 0!==s?(i._$Co??=[])[s]=r:i._$Cl=r),void 0!==r&&(e=eZ(t,r._$AS(t,e.values),r,s)),e}class eQ{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){let{el:{content:e},parts:i}=this._$AD,s=(t?.creationScope??eO).importNode(e,!0);eK.currentNode=s;let r=eK.nextNode(),a=0,o=0,n=i[0];for(;void 0!==n;){if(a===n.index){let e;2===n.type?e=new e0(r,r.nextSibling,this,t):1===n.type?e=new n.ctor(r,n.name,n.strings,this,t):6===n.type&&(e=new e3(r,this,t)),this._$AV.push(e),n=i[++o]}a!==n?.index&&(r=eK.nextNode(),a++)}return eK.currentNode=eO,s}p(t){let e=0;for(let i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class e0{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,s){this.type=2,this._$AH=eX,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){let i;eT(t=eZ(this,t,e))?t===eX||null==t||""===t?(this._$AH!==eX&&this._$AR(),this._$AH=eX):t!==this._$AH&&t!==eq&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):eL(i=t)||"function"==typeof i?.[Symbol.iterator]?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==eX&&eT(this._$AH)?this._$AA.nextSibling.data=t:this.T(eO.createTextNode(t)),this._$AH=t}$(t){let{values:e,_$litType$:i}=t,s="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=eG.createElement(eJ(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===s)this._$AH.p(e);else{let t=new eQ(s,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=eY.get(t.strings);return void 0===e&&eY.set(t.strings,e=new eG(t)),e}k(t){eL(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,i,s=0;for(let r of t)s===e.length?e.push(i=new e0(this.O(eD()),this.O(eD()),this,this.options)):i=e[s],i._$AI(r),s++;s<e.length&&(this._$AR(i&&i._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t!==this._$AB;){let e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class e1{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,s,r){this.type=1,this._$AH=eX,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=eX}_$AI(t,e=this,i,s){let r=this.strings,a=!1;if(void 0===r)(a=!eT(t=eZ(this,t,e,0))||t!==this._$AH&&t!==eq)&&(this._$AH=t);else{let s,o,n=t;for(t=r[0],s=0;s<r.length-1;s++)(o=eZ(this,n[i+s],e,s))===eq&&(o=this._$AH[s]),a||=!eT(o)||o!==this._$AH[s],o===eX?t=eX:t!==eX&&(t+=(o??"")+r[s+1]),this._$AH[s]=o}a&&!s&&this.j(t)}j(t){t===eX?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class e2 extends e1{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===eX?void 0:t}}class e5 extends e1{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==eX)}}class e4 extends e1{constructor(t,e,i,s,r){super(t,e,i,s,r),this.type=5}_$AI(t,e=this){if((t=eZ(this,t,e,0)??eX)===eq)return;let i=this._$AH,s=t===eX&&i!==eX||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,r=t!==eX&&(i===eX||s);s&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class e3{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){eZ(this,t)}}let e6=ek.litHtmlPolyfillSupport;e6?.(eG,e0),(ek.litHtmlVersions??=[]).push("3.3.1");let e9=globalThis;class e8 extends ev{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){let e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,i)=>{let s=i?.renderBefore??e,r=s._$litPart$;if(void 0===r){let t=i?.renderBefore??null;s._$litPart$=r=new e0(e.insertBefore(eD(),t),t,void 0,i??{})}return r._$AI(t),r})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return eq}}e8._$litElement$=!0,e8.finalized=!0,e9.litElementHydrateSupport?.({LitElement:e8});let e7=e9.litElementPolyfillSupport;e7?.({LitElement:e8}),(e9.litElementVersions??=[]).push("4.2.1");var it={};it=":host{--wfc-wind-low:var(--weather-forecast-card-wind-low-color,var(--success-color,#43a047));--wfc-wind-medium:var(--weather-forecast-card-wind-medium-color,var(--warning-color,#ffa600));--wfc-wind-high:var(--weather-forecast-card-wind-high-color,var(--error-color,#db4437));--wfc-temp-cold:var(--weather-forecast-card-temp-cold-color,#2196f3);--wfc-temp-freezing:var(--weather-forecast-card-temp-freezing-color,#4fb3ff);--wfc-temp-chilly:var(--weather-forecast-card-temp-chilly-color,#ffeb3b);--wfc-temp-mild:var(--weather-forecast-card-temp-mild-color,#4caf50);--wfc-temp-warm:var(--weather-forecast-card-temp-warm-color,#ff9800);--wfc-temp-hot:var(--weather-forecast-card-temp-hot-color,#f44336);--wfc-chart-temp-low-line-color:var(--weather-forecast-card-chart-temp-low-line-color,var(--wfc-temp-cold));--wfc-chart-temp-high-line-color:var(--weather-forecast-card-chart-temp-high-line-color,var(--wfc-temp-warm));--wfc-chart-label-color:var(--weather-forecast-card-chart-label-color,var(--primary-text-color,#000));--wfc-chart-temp-high-label-color:var(--weather-forecast-card-chart-temp-high-label-color,var(--wfc-chart-label-color));--wfc-chart-temp-low-label-color:var(--weather-forecast-card-chart-temp-low-label-color,var(--secondary-text-color,#9b9b9b));--wfc-chart-precipitation-label-color:var(--weather-forecast-card-chart-precipitation-label-color,var(--wfc-chart-label-color));--wfc-chart-grid-color:var(--weather-forecast-card-chart-grid-color,color-mix(in srgb,var(--primary-text-color,#000)15%,transparent));--wfc-precipitation-bar-color:var(--weather-forecast-card-precipitation-bar-color,color-mix(in srgb,var(--blue-color,#2196f3)40%,transparent));--wfc-sunrise-color:var(--weather-forecast-card-sunrise-color,var(--orange-color,#ff9800));--wfc-sunset-color:var(--weather-forecast-card-sunset-color,var(--purple-color,#926bc7));--wfc-day-indicator-color:var(--weather-forecast-card-day-indicator-color,#056bb8);--wfc-day-indicator-text-color:var(--weather-forecast-card-day-indicator-text-color,#fff);--forecast-item-width:50px;--forecast-item-gap:0px;--forecast-precipitation-bar-max-height:calc(var(--ha-font-size-s,12px) + 2px);--fade-width:15px;--forecast-conditions-icon-size:var(--weather-forecast-card-forecast-conditions-icon-size,28px);--current-conditions-icon-size:var(--weather-forecast-card-current-conditions-icon-size,64px);--indicator-width:20px}ha-card{box-sizing:border-box;width:100%;min-width:0;padding:var(--card-padding,16px);display:block;position:relative}.wfc-container{box-sizing:border-box;z-index:1;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));gap:var(--ha-space-4,16px);flex-direction:column;width:100%;max-width:100%;display:flex;position:relative;container:wfc-container/inline-size}.wfc-current-weather-container{pointer-events:auto}.wfc-current-weather{gap:var(--ha-space-4,16px);user-select:none;cursor:pointer;flex-flow:column;width:100%;min-width:0;display:flex}.wfc-current-conditions{flex-direction:row;align-items:center;width:100%;min-width:0;display:flex}.wfc-name,.wfc-name-state,.wfc-current-state{white-space:nowrap;text-overflow:ellipsis;min-width:0;overflow:hidden}.wfc-name-state{flex:1}.wfc-current-temperature-high-low{white-space:nowrap}.wfc-weather-condition-icon-slot.wfc-current-icon{width:var(--current-conditions-icon-size);height:var(--current-conditions-icon-size);margin-right:16px}.wfc-weather-condition-icon-slot.wfc-current-icon svg{width:100%;height:100%}.wfc-current-temperatures{flex-direction:column;align-items:flex-end;display:flex}.wfc-current-state,.wfc-current-temperature{font-size:var(--ha-font-size-3xl);line-height:var(--ha-line-height-condensed);white-space:nowrap}.wfc-current-attributes{gap:var(--ha-space-1,4px);flex-direction:column;width:100%;min-width:0;display:flex}.wfc-current-attribute{justify-content:space-between;align-items:center;gap:var(--ha-space-1,4px);font-size:var(--ha-font-size-m,14px);line-height:var(--ha-line-height-condensed);color:var(--primary-text-color,#212121);white-space:nowrap;flex-direction:row;display:flex}.wfc-current-attribute-icon{color:var(--state-icon-color,#616161);padding-left:var(--ha-space-2,8px)}.wfc-current-attribute-value,.wfc-current-attribute-name{white-space:nowrap;overflow:hidden}.wfc-current-attribute-name{text-overflow:ellipsis;padding-left:var(--ha-space-4,16px);flex:1}.wfc-forecast-container{pointer-events:auto}.wfc-forecast-container.is-scrollable{--mask:linear-gradient(to right,#0000 0,#000 var(--fade-width),#000 calc(100% - var(--fade-width)),#0000 100%);-webkit-mask:var(--mask);mask:var(--mask)}.wfc-scroll-container{scroll-snap-type:x mandatory;scroll-behavior:smooth;scrollbar-width:none;-ms-overflow-style:none;cursor:grab;user-select:none;touch-action:pan-x;overscroll-behavior-x:contain;-webkit-overflow-scrolling:touch;width:100%;min-width:0;max-width:100%;overflow:auto clip}.wfc-scroll-container.is-dragging{cursor:grabbing!important}.wfc-scroll-container.no-snap{scroll-snap-type:none!important;scroll-behavior:auto!important}.wfc-scroll-container::-webkit-scrollbar{display:none}.wfc-forecast{justify-content:flex-start;column-gap:var(--forecast-item-gap);flex-direction:row;display:flex;position:relative}.wfc-forecast-slot{min-width:var(--forecast-item-width);max-width:var(--forecast-item-width);align-items:center;gap:var(--ha-space-1,4px);scroll-snap-align:start;flex-direction:column;display:flex;position:relative}.wfc-label{font-size:var(--ha-font-size-m,14px);color:var(--secondary-text-color,#9b9b9b)}.wfc-secondary{font-size:var(--ha-font-size-m,14px);line-height:var(--ha-line-height-condensed);color:var(--secondary-text-color,#9b9b9b)}.wfc-day-indicator-container{z-index:4;pointer-events:none;min-width:var(--forecast-item-width);max-width:var(--forecast-item-width);margin-right:calc((var(--forecast-item-width) + var(--forecast-item-gap))*-1);justify-content:center;align-items:start;display:flex;position:sticky;left:0}.wfc-day-indicator{background-color:var(--wfc-day-indicator-color);color:var(--wfc-day-indicator-text-color);min-width:var(--indicator-width);text-align:center;border-radius:12px;height:20px;padding:0 8px;line-height:20px;display:block}.wfc-forecast-slot-time.wfc-sunrise{color:var(--wfc-sunrise-color)}.wfc-forecast-slot-time.wfc-sunset{color:var(--wfc-sunset-color)}.wfc-forecast-slot-time{color:var(--secondary-text-color,#9b9b9b);text-align:center;justify-content:center;align-items:center;height:20px;line-height:20px;display:flex}.wfc-forecast-slot-temperature{white-space:nowrap;flex-wrap:nowrap;justify-content:center;align-items:center;min-height:20px;display:flex}.wfc-forecast-temperature-low,.wfc-forecast-temperature-high{font-size:var(--ha-font-size-l,16px);line-height:var(--ha-line-height-condensed,1.2);color:var(--primary-text-color,#212121)}.wfc-forecast-temperature-low{color:var(--secondary-text-color,#9b9b9b)}.wfc-forecast-temperature-low.wfc-small,.wfc-forecast-temperature-high.wfc-small{font-size:var(--ha-font-size-m,14px);line-height:var(--ha-line-height-condensed,1.2)}.wfc-forecast-temperature-low.wfc-small{font-size:var(--ha-font-size-m,14px)}.wfc-forecast-temperature-separator{color:var(--secondary-text-color,#9b9b9b);margin:0 1px}.wfc-weather-condition-icon-slot{width:var(--forecast-conditions-icon-size);height:var(--forecast-conditions-icon-size);pointer-events:none;cursor:grab;padding:2px 0}.wfc-weather-condition-icon-slot .rain{fill:var(--weather-icon-rain-color,#30b3ff)}.wfc-weather-condition-icon-slot .sun{fill:var(--weather-icon-sun-color,#fdd93c)}.wfc-weather-condition-icon-slot .moon{fill:var(--weather-icon-moon-color,#fcf497)}.wfc-weather-condition-icon-slot .cloud-back{fill:var(--weather-icon-cloud-back-color,#d4d4d4)}.wfc-weather-condition-icon-slot .cloud-front{fill:var(--weather-icon-cloud-front-color,#f9f9f9)}.wfc-weather-condition-icon-slot .snow{fill:var(--weather-icon-snow-color,#f9f9f9);stroke:var(--weather-icon-snow-stroke-color,#d4d4d4);stroke-width:1px;paint-order:stroke}.wfc-forecast-slot-info{align-items:center;gap:var(--ha-space-1,4px);flex-direction:column;min-width:40px;display:flex}.wfc-forecast-precip-amount-container{pointer-events:none;justify-content:center;align-items:flex-end;height:15px;display:flex;position:relative}.wfc-forecast-precip-amount-container.wfc-not-available{visibility:hidden}.wfc-forecast-precip-amount-bar{pointer-events:none;width:30px;height:var(--forecast-precipitation-bar-height-pct);background:var(--wfc-precipitation-bar-color);z-index:1;border-radius:4px;flex-direction:column;justify-content:flex-end;display:flex;position:absolute;overflow:hidden}.wfc-forecast-precip-amount{pointer-events:none;z-index:2;font-size:var(--ha-font-size-s,12px);line-height:var(--forecast-precipitation-bar-max-height);color:var(--blue-color,#2196f3);font-weight:500;position:relative}.wfc-forecast-precip-probability{font-size:var(--ha-font-size-s,12px)}.wfc-forecast-chart{height:130px;width:var(--wfc-forecast-chart-width,auto)}.wfc-forecast-chart-footer,.wfc-forecast-chart-header{justify-content:flex-start;column-gap:var(--forecast-item-gap);min-width:var(--wfc-forecast-chart-width,auto);flex-direction:row;display:flex;width:100%!important}wfc-wind-indicator,wfc-current-weather,wfc-current-weather-attributes,wfc-forecast-header-items,wfc-weather-condition-icon-provider{display:contents}@container wfc-container (width<=375px){.wfc-current-state,.wfc-current-temperature{font-size:var(--ha-font-size-xl)}}";let ie=ea`
  ${er(it)}
`;function ii(){return(ii=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}(f=_||(_={})).language="language",f.system="system",f.comma_decimal="comma_decimal",f.decimal_comma="decimal_comma",f.space_comma="space_comma",f.none="none",(p=b||(b={})).language="language",p.system="system",p.am_pm="12",p.twenty_four="24";var is=function(t){switch(t.number_format){case _.comma_decimal:return["en-US","en"];case _.decimal_comma:return["de","es","it"];case _.space_comma:return["fr","sv","cs"];case _.system:return;default:return t.language}},ir=function(t,e,i){var s,r=e?is(e):void 0;if(Number.isNaN=Number.isNaN||function t(e){return"number"==typeof e&&t(e)},(null==e?void 0:e.number_format)!==_.none&&!Number.isNaN(Number(t))&&Intl)try{return new Intl.NumberFormat(r,ia(t,i)).format(Number(t))}catch(e){return console.error(e),new Intl.NumberFormat(void 0,ia(t,i)).format(Number(t))}return"string"==typeof t?t:(void 0===(s=null==i?void 0:i.maximumFractionDigits)&&(s=2),Math.round(t*Math.pow(10,s))/Math.pow(10,s)).toString()+("currency"===(null==i?void 0:i.style)?" "+i.currency:"")},ia=function(t,e){var i=ii({maximumFractionDigits:2},e);if("string"!=typeof t)return i;if(!e||!e.minimumFractionDigits&&!e.maximumFractionDigits){var s=t.indexOf(".")>-1?t.split(".")[1].length:0;i.minimumFractionDigits=s,i.maximumFractionDigits=s}return i},io=["closed","locked","off"],il=function(t,e,i,s){s=s||{},i=null==i?{}:i;var r=new Event(e,{bubbles:void 0===s.bubbles||s.bubbles,cancelable:!!s.cancelable,composed:void 0===s.composed||s.composed});return r.detail=i,t.dispatchEvent(r),r},ih=function(t){il(window,"haptic",t)},ic=function(t,e,i){void 0===i&&(i=!1),i?history.replaceState(null,"",e):history.pushState(null,"",e),il(window,"location-changed",{replace:i})},id=function(t,e,i){void 0===i&&(i=!0);var s,r=e.substr(0,e.indexOf("."));switch(r){case"lock":s=i?"unlock":"lock";break;case"cover":s=i?"open_cover":"close_cover";break;default:s=i?"turn_on":"turn_off"}return t.callService("group"===r?"homeassistant":r,s,{entity_id:e})},iu=function(t,e){var i=io.includes(t.states[e].state);return id(t,e,i)},ip=function(t,e,i,s){if(s||(s={action:"more-info"}),!s.confirmation||s.confirmation.exemptions&&s.confirmation.exemptions.some(function(t){return t.user===e.user.id})||(ih("warning"),confirm(s.confirmation.text||"Are you sure you want to "+s.action+"?")))switch(s.action){case"more-info":(i.entity||i.camera_image)&&il(t,"hass-more-info",{entityId:i.entity?i.entity:i.camera_image});break;case"navigate":s.navigation_path&&ic(0,s.navigation_path);break;case"url":s.url_path&&window.open(s.url_path);break;case"toggle":i.entity&&(iu(e,i.entity),ih("success"));break;case"call-service":if(!s.service)return void ih("failure");var r=s.service.split(".",2);e.callService(r[0],r[1],s.service_data,s.target),ih("success");break;case"fire-dom-event":il(t,"ll-custom",s)}},ig=function(t,e,i,s){var r;"double_tap"===s&&i.double_tap_action?r=i.double_tap_action:"hold"===s&&i.hold_action?r=i.hold_action:"tap"===s&&i.tap_action&&(r=i.tap_action),ip(t,e,i,r)};function im(t){return void 0!==t&&"none"!==t.action}var i_={};!function(){var t=Math.PI,e=Math.sin,i=Math.cos,s=Math.tan,r=Math.asin,a=Math.atan2,o=Math.acos,n=t/180;function l(t){return new Date((t+.5-2440588)*864e5)}function h(t){return t.valueOf()/864e5-.5+2440588-2451545}var c=23.4397*n;function d(t,r){return a(e(t)*i(c)-s(r)*e(c),i(t))}function u(t,s){return r(e(s)*i(c)+i(s)*e(c)*e(t))}function f(t,r,o){return a(e(t),i(t)*e(r)-s(o)*i(r))}function p(t,s,a){return r(e(s)*e(a)+i(s)*i(a)*i(t))}function g(t,e){return n*(280.16+360.9856235*t)-e}function m(t){return n*(357.5291+.98560028*t)}function _(i){var s=n*(1.9148*e(i)+.02*e(2*i)+3e-4*e(3*i));return i+s+102.9372*n+t}function b(t){var e=_(m(t));return{dec:u(e,0),ra:d(e,0)}}var y={};y.getPosition=function(t,e,i){var s=n*e,r=h(t),a=b(r),o=g(r,-(n*i))-a.ra;return{azimuth:f(o,s,a.dec),altitude:p(o,s,a.dec)}};var v=y.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];function x(e,i,s){return 9e-4+(e+i)/(2*t)+s}function w(t,i,s){return 2451545+t+.0053*e(i)-.0069*e(2*s)}function M(t){var s=n*(134.963+13.064993*t),r=n*(218.316+13.176396*t)+6.289*n*e(s),a=5.128*n*e(n*(93.272+13.22935*t)),o=385001-20905*i(s);return{ra:d(r,a),dec:u(r,a),dist:o}}function k(t,e){return new Date(t.valueOf()+864e5*e/24)}y.addTime=function(t,e,i){v.push([t,e,i])},y.getTimes=function(s,r,a,c){var d,f,p,g,b,y=-(n*a),M=n*r,k=-2.076*Math.sqrt(c=c||0)/60,S=Math.round(h(s)-9e-4-y/(2*t)),$=x(0,y,S),A=m($),P=_(A),C=u(P,0),E=w($,A,P),O={solarNoon:l(E),nadir:l(E-.5)};for(d=0,f=v.length;d<f;d+=1)b=E-((g=function(t,s,r,a,n,l,h){return w(x(o((e(t)-e(r)*e(a))/(i(r)*i(a))),s,n),l,h)}(((p=v[d])[0]+k)*n,y,M,C,S,A,P))-E),O[p[1]]=l(b),O[p[2]]=l(g);return O},y.getMoonPosition=function(t,r,o){var l,c=n*r,d=h(t),u=M(d),m=g(d,-(n*o))-u.ra,_=p(m,c,u.dec),b=a(e(m),s(c)*i(u.dec)-e(u.dec)*i(m));return _+=((l=_)<0&&(l=0),2967e-7/Math.tan(l+.00312536/(l+.08901179))),{azimuth:f(m,c,u.dec),altitude:_,distance:u.dist,parallacticAngle:b}},y.getMoonIllumination=function(t){var s=h(t||new Date),r=b(s),n=M(s),l=o(e(r.dec)*e(n.dec)+i(r.dec)*i(n.dec)*i(r.ra-n.ra)),c=a(149598e3*e(l),n.dist-149598e3*i(l)),d=a(i(r.dec)*e(r.ra-n.ra),e(r.dec)*i(n.dec)-i(r.dec)*e(n.dec)*i(r.ra-n.ra));return{fraction:(1+i(c))/2,phase:.5+.5*c*(d<0?-1:1)/Math.PI,angle:d}},y.getMoonTimes=function(t,e,i,s){var r=new Date(t);s?r.setUTCHours(0,0,0,0):r.setHours(0,0,0,0);for(var a,o,l,h,c,d,u,f,p,g,m,_,b,v=.133*n,x=y.getMoonPosition(r,e,i).altitude-v,w=1;w<=24&&(a=y.getMoonPosition(k(r,w),e,i).altitude-v,c=(x+(o=y.getMoonPosition(k(r,w+1),e,i).altitude-v))/2-a,u=-(d=(o-x)/2)/(2*c),f=(c*u+d)*u+a,g=0,(p=d*d-4*c*a)>=0&&(m=u-(b=Math.sqrt(p)/(2*Math.abs(c))),_=u+b,1>=Math.abs(m)&&g++,1>=Math.abs(_)&&g++,m<-1&&(m=_)),1===g?x<0?l=w+m:h=w+m:2===g&&(l=w+(f<0?_:m),h=w+(f<0?m:_)),!l||!h);w+=2)x=o;var M={};return l&&(M.rise=k(r,l)),h&&(M.set=k(r,h)),l||h||(M[f>0?"alwaysUp":"alwaysDown"]=!0),M},i_=y}();var ib=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function iy(t,e){if(t.length!==e.length)return!1;for(var i,s,r=0;r<t.length;r++)if(!((i=t[r])===(s=e[r])||ib(i)&&ib(s))&&1)return!1;return!0}function iv(t,e){void 0===e&&(e=iy);var i=null;function s(){for(var s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];if(i&&i.lastThis===this&&e(s,i.lastArgs))return i.lastResult;var a=t.apply(this,s);return i={lastResult:a,lastArgs:s,lastThis:this},a}return s.clear=function(){i=null},s}let ix=(t,e)=>iS(e).toLocaleDateString(ik(t),{weekday:"short"}),iw=t=>{let e=new Date(t);return e.setHours(0,0,0,0),e.getTime()},iM=iv(t=>{let e=t?.locale;if(e?.time_format===b.language||e?.time_format===b.system){let t=e.time_format===b.language?e.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(t).includes("10")}return e?.time_format===b.am_pm}),ik=t=>t?.locale?.language||navigator.language||"en",iS=t=>"string"==typeof t?new Date(t):t,i$=(t,e)=>{let{latitude:i,longitude:s}=t?.config||{};if(!i||!s)return null;let r=iS(e),a=i_.getTimes(r,i,s);return{sunrise:a.sunrise,sunset:a.sunset,isNightTime:r<a.sunrise||r>a.sunset}},iA=t=>0===t.length?0:t.reduce((t,e)=>t+e,0)/t.length,iP={silent:{level:-1},fatal:{level:0},error:{level:0},warn:{level:1},log:{level:2},info:{level:3},success:{level:3},fail:{level:3},ready:{level:3},start:{level:3},box:{level:3},debug:{level:4},trace:{level:5},verbose:{level:1/0}};function iC(t){if(null===t||"object"!=typeof t)return!1;let e=Object.getPrototypeOf(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.iterator in t)&&(!(Symbol.toStringTag in t)||"[object Module]"===Object.prototype.toString.call(t))}let iE=!1,iO=[];class iD{options;_lastLog;_mockFn;constructor(t={}){let e=t.types||iP;for(let i in this.options=((...t)=>t.reduce((t,e)=>(function t(e,i,s=".",r){if(!iC(i))return t(e,{},s,r);let a=Object.assign({},i);for(let i in e){if("__proto__"===i||"constructor"===i)continue;let o=e[i];null!=o&&(r&&r(a,i,o,s)||(Array.isArray(o)&&Array.isArray(a[i])?a[i]=[...o,...a[i]]:iC(o)&&iC(a[i])?a[i]=t(o,a[i],(s?`${s}.`:"")+i.toString(),r):a[i]=o))}return a})(t,e,"",void 0),{}))({...t,defaults:{...t.defaults},level:iT(t.level,e),reporters:[...t.reporters||[]]},{types:iP,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}}),e){let t={type:i,...this.options.defaults,...e[i]};this[i]=this._wrapLogFn(t),this[i].raw=this._wrapLogFn(t,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(t){this.options.level=iT(t,this.options.types,this.options.level)}prompt(t,e){if(!this.options.prompt)throw Error("prompt is not supported!");return this.options.prompt(t,e)}create(t){let e=new iD({...this.options,...t});return this._mockFn&&e.mockTypes(this._mockFn),e}withDefaults(t){return this.create({...this.options,defaults:{...this.options.defaults,...t}})}withTag(t){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+t:t})}addReporter(t){return this.options.reporters.push(t),this}removeReporter(t){if(t){let e=this.options.reporters.indexOf(t);if(-1!==e)return this.options.reporters.splice(e,1)}else this.options.reporters.splice(0);return this}setReporters(t){return this.options.reporters=Array.isArray(t)?t:[t],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(let t in this.options.types)console["__"+t]||(console["__"+t]=console[t]),console[t]=this[t].raw}restoreConsole(){for(let t in this.options.types)console["__"+t]&&(console[t]=console["__"+t],delete console["__"+t])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(t,e){t&&(t.__write||(t.__write=t.write),t.write=t=>{this[e].raw(String(t).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(t){t&&t.__write&&(t.write=t.__write,delete t.__write)}pauseLogs(){iE=!0}resumeLogs(){for(let t of(iE=!1,iO.splice(0)))t[0]._logFn(t[1],t[2])}mockTypes(t){let e=t||this.options.mockFn;if(this._mockFn=e,"function"==typeof e)for(let t in this.options.types)this[t]=e(t,this.options.types[t])||this[t],this[t].raw=this[t]}_wrapLogFn(t,e){return(...i)=>iE?void iO.push([this,t,i,e]):this._logFn(t,i,e)}_logFn(t,e,i){var s,r;if((t.level||0)>this.level)return!1;let a={date:new Date,args:[],...t,level:iT(t.level,this.options.types)};i||1!==e.length||+(r=s=e[0],"[object Object]"!==Object.prototype.toString.call(r)||!s.message&&!s.args||!!s.stack)?a.args=[...e]:Object.assign(a,e[0]),a.message&&(a.args.unshift(a.message),delete a.message),a.additional&&(Array.isArray(a.additional)||(a.additional=a.additional.split("\n")),a.args.push("\n"+a.additional.join("\n")),delete a.additional),a.type="string"==typeof a.type?a.type.toLowerCase():"log",a.tag="string"==typeof a.tag?a.tag:"";let o=(t=!1)=>{let e=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&e>0){let t=[...this._lastLog.object.args];e>1&&t.push(`(repeated ${e} times)`),this._log({...this._lastLog.object,args:t}),this._lastLog.count=1}t&&(this._lastLog.object=a,this._log(a))};clearTimeout(this._lastLog.timeout);let n=this._lastLog.time&&a.date?a.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=a.date,n<this.options.throttle)try{let t=JSON.stringify([a.type,a.tag,a.args]),e=this._lastLog.serialized===t;if(this._lastLog.serialized=t,e&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(o,this.options.throttle);return}}catch{}o(!0)}_log(t){for(let e of this.options.reporters)e.log(t,{options:this.options})}}function iT(t,e={},i=3){return void 0===t?i:"number"==typeof t?t:e[t]&&void 0!==e[t].level?e[t].level:i}iD.prototype.add=iD.prototype.addReporter,iD.prototype.remove=iD.prototype.removeReporter,iD.prototype.clear=iD.prototype.removeReporter,iD.prototype.withScope=iD.prototype.withTag,iD.prototype.mock=iD.prototype.mockTypes,iD.prototype.pause=iD.prototype.pauseLogs,iD.prototype.resume=iD.prototype.resumeLogs;class iL{options;defaultColor;levelColorMap;typeColorMap;constructor(t){this.options={...t},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(t){return t<1?console.__error||console.error:1===t?console.__warn||console.warn:console.__log||console.log}log(t){let e=this._getLogFn(t.level),i="log"===t.type?"":t.type,s=t.tag||"",r=this.typeColorMap[t.type]||this.levelColorMap[t.level]||this.defaultColor,a=`
      background: ${r};
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `,o=`%c${[s,i].filter(Boolean).join(":")}`;"string"==typeof t.args[0]?e(`${o}%c ${t.args[0]}`,a,"",...t.args.slice(1)):e(o,a,...t.args)}}function iz(t={}){return function(t={}){return new iD(t)}({reporters:t.reporters||[new iL({})],prompt:(t,e={})=>"confirm"===e.type?Promise.resolve(confirm(t)):Promise.resolve(prompt(t)),...t})}iz();let iF=iz({level:3}).withTag("weather-forecast-card"),iR=t=>"object"==typeof t&&null!==t&&"code"in t&&"invalid_entity_id"===t.code,iI=t=>(...e)=>({_$litDirective$:t,values:e});class ij{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}let iV="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.maxTouchPoints>0;class iW extends HTMLElement{constructor(){super(),this.holdTime=500,this.held=!1,this.ripple=document.createElement("mwc-ripple")}connectedCallback(){Object.assign(this.style,{position:"absolute",width:iV?"100px":"50px",height:iV?"100px":"50px",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:"999"}),this.appendChild(this.ripple),this.ripple.primary=!0,["touchcancel","mouseout","mouseup","touchmove","mousewheel","wheel","scroll"].forEach(t=>{document.addEventListener(t,()=>{clearTimeout(this.timer),this.stopAnimation(),this.timer=void 0},{passive:!0})})}bind(t,e){if(t.actionHandler)return;t.actionHandler=!0,t.addEventListener("contextmenu",t=>{let e=t||window.event;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1});let i=t=>{let e,i;this.held=!1,t.touches?(e=t.touches[0].pageX,i=t.touches[0].pageY):(e=t.pageX,i=t.pageY),this.timer=window.setTimeout(()=>{this.startAnimation(e,i),this.held=!0},this.holdTime)},s=i=>{i.preventDefault(),e.stopPropagation&&i.stopPropagation(),["touchend","touchcancel"].includes(i.type)&&void 0===this.timer||(clearTimeout(this.timer),this.stopAnimation(),this.timer=void 0,this.held?il(t,"action",{action:"hold"},{bubbles:!e.stopPropagation}):e.hasDoubleClick?"click"===i.type&&i.detail<2||!this.dblClickTimeout?this.dblClickTimeout=window.setTimeout(()=>{this.dblClickTimeout=void 0,il(t,"action",{action:"tap"},{bubbles:!e.stopPropagation})},250):(clearTimeout(this.dblClickTimeout),this.dblClickTimeout=void 0,il(t,"action",{action:"double_tap"},{bubbles:!e.stopPropagation})):il(t,"action",{action:"tap"},{bubbles:!e.stopPropagation}))};t.addEventListener("touchstart",i,{passive:!0}),t.addEventListener("touchend",s),t.addEventListener("touchcancel",s),t.addEventListener("mousedown",i,{passive:!0}),t.addEventListener("click",s),t.addEventListener("keyup",t=>{13===t.keyCode&&s(t)})}startAnimation(t,e){Object.assign(this.style,{left:`${t}px`,top:`${e}px`,display:null}),this.ripple.disabled=!1,this.ripple.active=!0,this.ripple.unbounded=!0}stopAnimation(){this.ripple.active=!1,this.ripple.disabled=!0,this.style.display="none"}}customElements.define("action-handler-wfc",iW);let iN=iI(class extends ij{update(t,[e]){var i;let s;return i=t.element,(s=(()=>{let t=document.body;if(t.querySelector("action-handler-wfc"))return t.querySelector("action-handler-wfc");let e=document.createElement("action-handler-wfc");return t.appendChild(e),e})())&&s.bind(i,e),eq}render(t){}}),iH=["humidity","pressure","wind_speed","wind_gust_speed","visibility","ozone","uv_index","dew_point","apparent_temperature","cloud_coverage"],iB=["rain","snow","lightning","sky","moon","sun"];var iU=((g={}).Chart="chart",g.Simple="simple",g);let iq=iI(class extends ij{constructor(t){if(super(t),1!==t.type||"class"!==t.name||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(void 0===this.st){for(let i in this.st=new Set,void 0!==t.strings&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(t=>""!==t))),e)e[i]&&!this.nt?.has(i)&&this.st.add(i);return this.render(e)}let i=t.element.classList;for(let t of this.st)t in e||(i.remove(t),this.st.delete(t));for(let t in e){let s=!!e[t];s===this.st.has(t)||this.nt?.has(t)||(s?(i.add(t),this.st.add(t)):(i.remove(t),this.st.delete(t)))}return eq}});var iX=((m={}).Temperature="temperature_unit",m.Pressure="pressure_unit",m.WindSpeed="wind_speed_unit",m.Precipitation="precipitation_unit",m.Visibility="visibility_unit",m);let iY=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],iK=(t,e,i)=>{let s=t.config,r=s.unit_system.length||"";switch(i){case"visibility":return e.attributes.visibility_unit||r;case"precipitation":return e.attributes.precipitation_unit||("km"===r?"mm":"in");case"pressure":return e.attributes.pressure_unit||("km"===r?"hPa":"inHg");case"apparent_temperature":case"dew_point":case"temperature":case"templow":return e.attributes.temperature_unit||s.unit_system.temperature;case"wind_speed":case"wind_gust_speed":return e.attributes.wind_speed_unit||`${r}/h`;case"ozone":return"DU";case"cloud_coverage":case"humidity":case"precipitation_probability":return"%";default:return(i in s.unit_system?s.unit_system[i]:"")||""}},iJ=t=>{if(t?.forecast&&t.forecast.length>2)return(t=>{if(t&&t?.length&&t?.length>2){let e=new Date(t[1].datetime);return new Date(t[2].datetime).getTime()-e.getTime()<288e5}})(t.forecast)?{forecast:t.forecast,type:"hourly"}:(t=>{if(t&&t?.length&&t?.length>2){let e=new Date(t[1].datetime);return new Date(t[2].datetime).getTime()-e.getTime()<864e5}})(t.forecast)?{forecast:t.forecast,type:"twice_daily"}:{forecast:t.forecast,type:"daily"}},iG=(t,e,i)=>void 0===i?e?.type!==void 0&&e?.forecast&&e?.forecast?.length>2?{forecast:e.forecast,type:e?.type}:iJ(t):"legacy"===i?iJ(t):i===e?.type&&e?.forecast&&e?.forecast?.length>2?{forecast:e.forecast,type:i}:void 0,iZ=(t,e,i,s)=>t.connection.subscribeMessage(s,{type:"weather/subscribe_forecast",forecast_type:i,entity_id:e}),iQ=iv((t,e)=>{let i="hourly"===e?8:20;return"in"===t?parseFloat((i/25.4).toFixed(1)):i}),i0=(t,e,i)=>{if(void 0===i.wind_speed)return;let s=iK(t,e,"wind_speed");return i1(i.wind_speed,s)},i1=(t,e)=>t*(({"km/h":1/3.6,kmh:1/3.6,mph:.44704,kn:.514444,kt:.514444,knot:.514444,knots:.514444,"m/s":1,ms:1})[e]||1),i2=t=>{if(0===t.length)return 0;let e=0,i=0;t.forEach(t=>{let s=t*Math.PI/180;e+=Math.sin(s),i+=Math.cos(s)});let s=180*Math.atan2(e/t.length,i/t.length)/Math.PI;return s<0&&(s+=360),Math.round(s)},i5=t=>{let e=["exceptional","hail","lightning-rainy","lightning","snowy-rainy","pouring","snowy","rainy","windy-variant","windy","fog","cloudy","partlycloudy","clear-night","sunny"];return t.sort((t,i)=>{let s=e.indexOf(t.condition||"exceptional"),r=e.indexOf(i.condition||"exceptional");return -1===s&&(s=0),-1===r&&(r=0),s-r}),t[0]?.condition||"exceptional"};class i4{constructor(t,e){this._mouseDown=!1,this._scrolling=!1,this._scrolled=!1,this._state={startX:0,startLeft:0,lastX:0,velocity:0,momentumId:0},this._onMouseDown=t=>{this._container&&(this._mouseDown=!0,this._scrolled=!1,this._scrolling=!1,this._state.startX=t.pageX-this._container.offsetLeft,this._state.startLeft=this._container.scrollLeft,this._state.lastX=t.pageX,this._state.velocity=0,cancelAnimationFrame(this._state.momentumId),window.addEventListener("mousemove",this._onMouseMove),window.addEventListener("mouseup",this._onMouseUp,{once:!0}),this._host.requestUpdate())},this._onMouseMove=t=>{if(!this._mouseDown||!this._container)return;let e=t.pageX-this._container.offsetLeft-this._state.startX;if(this._state.velocity=t.pageX-this._state.lastX,this._state.lastX=t.pageX,!this._scrolled&&Math.abs(e)>3&&(this._scrolled=!0,this._scrolling=!0,this._container.classList.add("is-dragging","no-snap")),this._scrolled){let t=this._container,i=this._state.startLeft-e;requestAnimationFrame(()=>{t&&(t.scrollLeft=i)})}},this._onMouseUp=()=>{if(this._cleanup(),this._container){if(this._container.classList.remove("is-dragging"),!this._scrolled)return void this._container.classList.remove("no-snap");Math.abs(this._state.velocity)>1?this._runMomentum():this._finalize()}this._host.requestUpdate()},this._runMomentum=()=>{let t=this._container;!t||.5>Math.abs(this._state.velocity)?this._finalize():(t.scrollLeft-=this._state.velocity,this._state.velocity*=.95,this._state.momentumId=requestAnimationFrame(this._runMomentum))},this._finalize=()=>{let t=this._container;if(!t||!this._childSelector)return void this._completeFinalize();let e=t.querySelector(this._childSelector);if(!e)return void this._completeFinalize();let i=e.getBoundingClientRect().width;if(!i||!Number.isFinite(i))return void this._completeFinalize();let s=t.scrollLeft,r=Math.round(s/i)*i,a=performance.now(),o=t=>{let e=this._container;if(!e)return void this._completeFinalize();let i=Math.min((t-a)/500,1);e.scrollLeft=s+i*(2-i)*(r-s),i<1?this._state.momentumId=requestAnimationFrame(o):this._completeFinalize()};this._state.momentumId=requestAnimationFrame(o)},this._completeFinalize=()=>{this._scrolling=!1,this._container?.classList.remove("no-snap"),clearTimeout(this._finalizeId),this._finalizeId=window.setTimeout(()=>{this._scrolled=!1,this._host.requestUpdate()},50)},this._host=t,this._selector=e.selector,this._childSelector=e.childSelector,t.addController(this)}hostUpdated(){this._container||this._attach()}hostDisconnected(){this._detach()}isScrolling(){return this._scrolled||this._scrolling}_attach(){this._container=this._host.renderRoot?.querySelector(this._selector),this._container?.addEventListener("mousedown",this._onMouseDown)}_detach(){this._cleanup(),this._container&&(this._container.classList.remove("is-dragging","no-snap"),this._container.removeEventListener("mousedown",this._onMouseDown),this._container=void 0)}_cleanup(){this._mouseDown=!1,window.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("mouseup",this._onMouseUp),cancelAnimationFrame(this._state.momentumId),clearTimeout(this._finalizeId)}}let i3="important",i6=" !"+i3,i9=iI(class extends ij{constructor(t){if(super(t),1!==t.type||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,i)=>{let s=t[i];return null==s?e:e+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`},"")}update(t,[e]){let{style:i}=t.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(e)),this.render(e);for(let t of this.ft)null==e[t]&&(this.ft.delete(t),t.includes("-")?i.removeProperty(t):i[t]=null);for(let t in e){let s=e[t];if(null!=s){this.ft.add(t);let e="string"==typeof s&&s.endsWith(i6);t.includes("-")||e?i.setProperty(t,e?s.slice(0,-11):s,e?i3:""):i[t]=s}}return eq}});function i8(t){return t+.5|0}let i7=(t,e,i)=>Math.max(Math.min(t,i),e);function st(t){return i7(i8(2.55*t),0,255)}function se(t){return i7(i8(255*t),0,255)}function si(t){return i7(i8(t/2.55)/100,0,1)}function ss(t){return i7(i8(100*t),0,100)}let sr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},sa=[..."0123456789ABCDEF"],so=t=>sa[15&t],sn=t=>sa[(240&t)>>4]+sa[15&t],sl=t=>(240&t)>>4==(15&t),sh=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function sc(t,e,i){let s=e*Math.min(i,1-i),r=(e,r=(e+t/30)%12)=>i-s*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function sd(t,e,i){let s=(s,r=(s+t/60)%6)=>i-i*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function su(t,e,i){let s,r=sc(t,1,.5);for(e+i>1&&(s=1/(e+i),e*=s,i*=s),s=0;s<3;s++)r[s]*=1-e-i,r[s]+=e;return r}function sf(t){let e,i,s,r=t.r/255,a=t.g/255,o=t.b/255,n=Math.max(r,a,o),l=Math.min(r,a,o),h=(n+l)/2;n!==l&&(s=n-l,i=h>.5?s/(2-n-l):s/(n+l),e=60*(e=r===n?(a-o)/s+6*(a<o):a===n?(o-r)/s+2:(r-a)/s+4)+.5);return[0|e,i||0,h]}function sp(t,e,i,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,s)).map(se)}function sg(t){return(t%360+360)%360}let sm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},s_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},sb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,sy=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,sv=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function sx(t,e,i){if(t){let s=sf(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*i,0===e?360:1)),t.r=(s=sp(sc,s,void 0,void 0))[0],t.g=s[1],t.b=s[2]}}function sw(t,e){return t?Object.assign(e||{},t):t}function sM(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=se(t[3]))):(e=sw(t,{r:0,g:0,b:0,a:1})).a=se(e.a),e}class sk{constructor(e){let i;if(e instanceof sk)return e;let s=typeof e;if("object"===s)i=sM(e);else{var r,a;let o;"string"===s&&(a=e.length,"#"===e[0]&&(4===a||5===a?r={r:255&17*sr[e[1]],g:255&17*sr[e[2]],b:255&17*sr[e[3]],a:5===a?17*sr[e[4]]:255}:(7===a||9===a)&&(r={r:sr[e[1]]<<4|sr[e[2]],g:sr[e[3]]<<4|sr[e[4]],b:sr[e[5]]<<4|sr[e[6]],a:9===a?sr[e[7]]<<4|sr[e[8]]:255})),i=r||(t||((t=function(){let t,e,i,s,r,a={},o=Object.keys(s_),n=Object.keys(sm);for(t=0;t<o.length;t++){for(e=0,s=r=o[t];e<n.length;e++)i=n[e],r=r.replace(i,sm[i]);i=parseInt(s_[s],16),a[r]=[i>>16&255,i>>8&255,255&i]}return a}()).transparent=[0,0,0,0]),(o=t[e.toLowerCase()])&&{r:o[0],g:o[1],b:o[2],a:4===o.length?o[3]:255})||("r"===e.charAt(0)?function(t){let e,i,s,r=sb.exec(t),a=255;if(r){if(r[7]!==e){let t=+r[7];a=r[8]?st(t):i7(255*t,0,255)}return e=+r[1],i=+r[3],s=+r[5],e=255&(r[2]?st(e):i7(e,0,255)),{r:e,g:i=255&(r[4]?st(i):i7(i,0,255)),b:s=255&(r[6]?st(s):i7(s,0,255)),a:a}}}(e):function(t){let e,i=sh.exec(t),s=255;if(!i)return;i[5]!==e&&(s=i[6]?st(+i[5]):se(+i[5]));let r=sg(+i[2]),a=i[3]/100,o=i[4]/100;return{r:(e="hwb"===i[1]?sp(su,r,a,o):"hsv"===i[1]?sp(sd,r,a,o):sp(sc,r,a,o))[0],g:e[1],b:e[2],a:s}}(e)))}this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=sw(this._rgb);return t&&(t.a=si(t.a)),t}set rgb(t){this._rgb=sM(t)}rgbString(){var t;return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${si(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0}hexString(){var t,e;let i,s;return this._valid?(e=sl((i=t=this._rgb).r)&&sl(i.g)&&sl(i.b)&&sl(i.a)?so:sn,t?"#"+e(t.r)+e(t.g)+e(t.b)+(s=t.a,s<255?e(s):""):void 0):void 0}hslString(){return this._valid?function(t){if(!t)return;let e=sf(t),i=e[0],s=ss(e[1]),r=ss(e[2]);return t.a<255?`hsla(${i}, ${s}%, ${r}%, ${si(t.a)})`:`hsl(${i}, ${s}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){let i,s=this.rgb,r=t.rgb,a=e===i?.5:e,o=2*a-1,n=s.a-r.a,l=((o*n==-1?o:(o+n)/(1+o*n))+1)/2;i=1-l,s.r=255&l*s.r+i*r.r+.5,s.g=255&l*s.g+i*r.g+.5,s.b=255&l*s.b+i*r.b+.5,s.a=a*s.a+(1-a)*r.a,this.rgb=s}return this}interpolate(t,e){var i,s;let r,a,o;return t&&(this._rgb=(i=this._rgb,s=t._rgb,r=sv(si(i.r)),a=sv(si(i.g)),o=sv(si(i.b)),{r:se(sy(r+e*(sv(si(s.r))-r))),g:se(sy(a+e*(sv(si(s.g))-a))),b:se(sy(o+e*(sv(si(s.b))-o))),a:i.a+e*(s.a-i.a)})),this}clone(){return new sk(this.rgb)}alpha(t){return this._rgb.a=se(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=i8(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return sx(this._rgb,2,t),this}darken(t){return sx(this._rgb,2,-t),this}saturate(t){return sx(this._rgb,1,t),this}desaturate(t){return sx(this._rgb,1,-t),this}rotate(t){var e,i;return e=this._rgb,(i=sf(e))[0]=sg(i[0]+t),e.r=(i=sp(sc,i,void 0,void 0))[0],e.g=i[1],e.b=i[2],this}}let sS=(e=0,()=>e++);function s$(t){return null==t}function sA(t){if(Array.isArray&&Array.isArray(t))return!0;let e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function sP(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function sC(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function sE(t,e){return sC(t)?t:e}function sO(t,e){return void 0===t?e:t}let sD=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function sT(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function sL(t,e,i,s){let r,a,o;if(sA(t))if(a=t.length,s)for(r=a-1;r>=0;r--)e.call(i,t[r],r);else for(r=0;r<a;r++)e.call(i,t[r],r);else if(sP(t))for(r=0,a=(o=Object.keys(t)).length;r<a;r++)e.call(i,t[o[r]],o[r])}function sz(t,e){let i,s,r,a;if(!t||!e||t.length!==e.length)return!1;for(i=0,s=t.length;i<s;++i)if(r=t[i],a=e[i],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function sF(t){if(sA(t))return t.map(sF);if(sP(t)){let e=Object.create(null),i=Object.keys(t),s=i.length,r=0;for(;r<s;++r)e[i[r]]=sF(t[i[r]]);return e}return t}function sR(t){return -1===["__proto__","prototype","constructor"].indexOf(t)}function sI(t,e,i,s){if(!sR(t))return;let r=e[t],a=i[t];sP(r)&&sP(a)?sj(r,a,s):e[t]=sF(a)}function sj(t,e,i){let s,r=sA(e)?e:[e],a=r.length;if(!sP(t))return t;let o=(i=i||{}).merger||sI;for(let e=0;e<a;++e){if(!sP(s=r[e]))continue;let a=Object.keys(s);for(let e=0,r=a.length;e<r;++e)o(a[e],t,s,i)}return t}function sV(t,e){return sj(t,e,{merger:sW})}function sW(t,e,i){if(!sR(t))return;let s=e[t],r=i[t];sP(s)&&sP(r)?sV(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=sF(r))}let sN={"":t=>t,x:t=>t.x,y:t=>t.y};function sH(t,e){let i;return(sN[e]||(sN[e]=(i=function(t){let e=t.split("."),i=[],s="";for(let t of e)(s+=t).endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}(e),t=>{for(let e of i){if(""===e)break;t=t&&t[e]}return t})))(t)}function sB(t){return t.charAt(0).toUpperCase()+t.slice(1)}let sU=t=>void 0!==t,sq=t=>"function"==typeof t,sX=(t,e)=>{if(t.size!==e.size)return!1;for(let i of t)if(!e.has(i))return!1;return!0},sY=Math.PI,sK=2*sY,sJ=sK+sY,sG=1/0,sZ=sY/180,sQ=sY/2,s0=sY/4,s1=2*sY/3,s2=Math.log10,s5=Math.sign;function s4(t,e,i){return Math.abs(t-e)<i}function s3(t){let e=Math.round(t),i=Math.pow(10,Math.floor(s2(t=s4(t,e,t/1e3)?e:t))),s=t/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function s6(t){return"symbol"!=typeof t&&("object"!=typeof t||null===t||!!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t))&&!isNaN(parseFloat(t))&&isFinite(t)}function s9(t,e,i){let s,r,a;for(s=0,r=t.length;s<r;s++)isNaN(a=t[s][i])||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function s8(t){return sY/180*t}function s7(t){if(!sC(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function rt(t,e){let i=e.x-t.x,s=e.y-t.y,r=Math.sqrt(i*i+s*s),a=Math.atan2(s,i);return a<-.5*sY&&(a+=sK),{angle:a,distance:r}}function re(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ri(t,e){return(t-e+sJ)%sK-sY}function rs(t){return(t%sK+sK)%sK}function rr(t,e,i,s){let r=rs(t),a=rs(e),o=rs(i),n=rs(a-r),l=rs(o-r),h=rs(r-a),c=rs(r-o);return r===a||r===o||s&&a===o||n>l&&h<c}function ra(t,e,i){return Math.max(e,Math.min(i,t))}function ro(t,e,i,s=1e-6){return t>=Math.min(e,i)-s&&t<=Math.max(e,i)+s}function rn(t,e,i){let s;i=i||(i=>t[i]<e);let r=t.length-1,a=0;for(;r-a>1;)i(s=a+r>>1)?a=s:r=s;return{lo:a,hi:r}}let rl=(t,e,i,s)=>rn(t,i,s?s=>{let r=t[s][e];return r<i||r===i&&t[s+1][e]===i}:s=>t[s][e]<i),rh=(t,e,i)=>rn(t,i,s=>t[s][e]>=i),rc=["push","pop","shift","splice","unshift"];function rd(t,e){let i=t._chartjs;if(!i)return;let s=i.listeners,r=s.indexOf(e);-1!==r&&s.splice(r,1),s.length>0||(rc.forEach(e=>{delete t[e]}),delete t._chartjs)}function ru(t){let e=new Set(t);return e.size===t.length?t:Array.from(e)}let rf="u"<typeof window?function(t){return t()}:window.requestAnimationFrame;function rp(t,e){let i=[],s=!1;return function(...r){i=r,s||(s=!0,rf.call(window,()=>{s=!1,t.apply(e,i)}))}}let rg=t=>"start"===t?"left":"end"===t?"right":"center",rm=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2;function r_(t,e,i){let s=e.length,r=0,a=s;if(t._sorted){let{iScale:o,vScale:n,_parsed:l}=t,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,c=o.axis,{min:d,max:u,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(r=Math.min(rl(l,c,d).lo,i?s:rl(e,c,o.getPixelForValue(d)).lo),h){let t=l.slice(0,r+1).reverse().findIndex(t=>!s$(t[n.axis]));r-=Math.max(0,t)}r=ra(r,0,s-1)}if(p){let t=Math.max(rl(l,o.axis,u,!0).hi+1,i?0:rl(e,c,o.getPixelForValue(u),!0).hi+1);if(h){let e=l.slice(t-1).findIndex(t=>!s$(t[n.axis]));t+=Math.max(0,e)}a=ra(t,r,s)-r}else a=s-r}return{start:r,count:a}}function rb(t){let{xScale:e,yScale:i,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!s)return t._scaleRanges=r,!0;let a=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,r),a}let ry=t=>0===t||1===t,rv=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*sK/i)),rx=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*sK/i)+1,rw={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*sQ)+1,easeOutSine:t=>Math.sin(t*sQ),easeInOutSine:t=>-.5*(Math.cos(sY*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ry(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(-Math.pow(2,-10*(2*t-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ry(t)?t:rv(t,.075,.3),easeOutElastic:t=>ry(t)?t:rx(t,.075,.3),easeInOutElastic:t=>ry(t)?t:t<.5?.5*rv(2*t,.1125,.45):.5+.5*rx(2*t-1,.1125,.45),easeInBack:t=>t*t*(2.70158*t-1.70158),easeOutBack:t=>(t-=1)*t*(2.70158*t+1.70158)+1,easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-rw.easeOutBounce(1-t),easeOutBounce:t=>t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375,easeInOutBounce:t=>t<.5?.5*rw.easeInBounce(2*t):.5*rw.easeOutBounce(2*t-1)+.5};function rM(t){if(t&&"object"==typeof t){let e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function rk(t){return rM(t)?t:new sk(t)}function rS(t){return rM(t)?t:new sk(t).saturate(.5).darken(.1).hexString()}let r$=["x","y","borderWidth","radius","tension"],rA=["color","borderColor","backgroundColor"],rP=new Map;function rC(t,e,i){var s;let r,a;return(r=e+JSON.stringify(s=(s=i)||{}),!(a=rP.get(r))&&(a=new Intl.NumberFormat(e,s),rP.set(r,a)),a).format(t)}let rE={values:t=>sA(t)?t:""+t,numeric(t,e,i){let s;if(0===t)return"0";let r=this.chart.options.locale,a=t;if(i.length>1){var o,n;let e,r=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(r<1e-4||r>1e15)&&(s="scientific"),o=t,Math.abs(e=(n=i).length>3?n[2].value-n[1].value:n[1].value-n[0].value)>=1&&o!==Math.floor(o)&&(e=o-Math.floor(o)),a=e}let l=s2(Math.abs(a)),h=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),c={notation:s,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(c,this.options.ticks.format),rC(t,r,c)},logarithmic(t,e,i){return 0===t?"0":[1,2,3,5,10,15].includes(i[e].significand||t/Math.pow(10,Math.floor(s2(t))))||e>.8*i.length?rE.numeric.call(this,t,e,i):""}},rO=Object.create(null),rD=Object.create(null);function rT(t,e){if(!e)return t;let i=e.split(".");for(let e=0,s=i.length;e<s;++e){let s=i[e];t=t[s]||(t[s]=Object.create(null))}return t}function rL(t,e,i){return"string"==typeof e?sj(rT(t,e),i):sj(rT(t,""),e)}var rz=new class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>rS(e.backgroundColor),this.hoverBorderColor=(t,e)=>rS(e.borderColor),this.hoverColor=(t,e)=>rS(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return rL(this,t,e)}get(t){return rT(this,t)}describe(t,e){return rL(rD,t,e)}override(t,e){return rL(rO,t,e)}route(t,e,i,s){let r=rT(this,t),a=rT(this,i),o="_"+e;Object.defineProperties(r,{[o]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){let t=this[o],e=a[s];return sP(t)?Object.assign({},e,t):sO(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach(t=>t(this))}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:rA},numbers:{type:"number",properties:r$}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rE.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function rF(t,e,i,s,r){let a=e[r];return a||(a=e[r]=t.measureText(r).width,i.push(r)),a>s&&(s=a),s}function rR(t,e,i){let s=t.currentDevicePixelRatio,r=0!==i?Math.max(i/2,.5):0;return Math.round((e-r)*s)/s+r}function rI(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function rj(t,e,i,s){rV(t,e,i,s,null)}function rV(t,e,i,s,r){let a,o,n,l,h,c,d,u,f=e.pointStyle,p=e.rotation,g=e.radius,m=(p||0)*sZ;if(f&&"object"==typeof f&&("[object HTMLImageElement]"===(a=f.toString())||"[object HTMLCanvasElement]"===a)){t.save(),t.translate(i,s),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!isNaN(g)&&!(g<=0)){switch(t.beginPath(),f){default:r?t.ellipse(i,s,r/2,g,0,0,sK):t.arc(i,s,g,0,sK),t.closePath();break;case"triangle":c=r?r/2:g,t.moveTo(i+Math.sin(m)*c,s-Math.cos(m)*g),m+=s1,t.lineTo(i+Math.sin(m)*c,s-Math.cos(m)*g),m+=s1,t.lineTo(i+Math.sin(m)*c,s-Math.cos(m)*g),t.closePath();break;case"rectRounded":h=.516*g,o=Math.cos(m+s0)*(l=g-h),d=Math.cos(m+s0)*(r?r/2-h:l),n=Math.sin(m+s0)*l,u=Math.sin(m+s0)*(r?r/2-h:l),t.arc(i-d,s-n,h,m-sY,m-sQ),t.arc(i+u,s-o,h,m-sQ,m),t.arc(i+d,s+n,h,m,m+sQ),t.arc(i-u,s+o,h,m+sQ,m+sY),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,c=r?r/2:l,t.rect(i-c,s-l,2*c,2*l);break}m+=s0;case"rectRot":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,n=Math.sin(m)*g,u=Math.sin(m)*(r?r/2:g),t.moveTo(i-d,s-n),t.lineTo(i+u,s-o),t.lineTo(i+d,s+n),t.lineTo(i-u,s+o),t.closePath();break;case"crossRot":m+=s0;case"cross":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,n=Math.sin(m)*g,u=Math.sin(m)*(r?r/2:g),t.moveTo(i-d,s-n),t.lineTo(i+d,s+n),t.moveTo(i+u,s-o),t.lineTo(i-u,s+o);break;case"star":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,n=Math.sin(m)*g,u=Math.sin(m)*(r?r/2:g),t.moveTo(i-d,s-n),t.lineTo(i+d,s+n),t.moveTo(i+u,s-o),t.lineTo(i-u,s+o),m+=s0,d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,n=Math.sin(m)*g,u=Math.sin(m)*(r?r/2:g),t.moveTo(i-d,s-n),t.lineTo(i+d,s+n),t.moveTo(i+u,s-o),t.lineTo(i-u,s+o);break;case"line":o=r?r/2:Math.cos(m)*g,n=Math.sin(m)*g,t.moveTo(i-o,s-n),t.lineTo(i+o,s+n);break;case"dash":t.moveTo(i,s),t.lineTo(i+Math.cos(m)*(r?r/2:g),s+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function rW(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function rN(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function rH(t){t.restore()}function rB(t,e,i,s,r){if(!e)return t.lineTo(i.x,i.y);if("middle"===r){let s=(e.x+i.x)/2;t.lineTo(s,e.y),t.lineTo(s,i.y)}else"after"===r!=!!s?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function rU(t,e,i,s){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function rq(t,e,i,s,r,a={}){let o,n,l=sA(e)?e:[e],h=a.strokeWidth>0&&""!==a.strokeColor;for(t.save(),t.font=r.string,a.translation&&t.translate(a.translation[0],a.translation[1]),s$(a.rotation)||t.rotate(a.rotation),a.color&&(t.fillStyle=a.color),a.textAlign&&(t.textAlign=a.textAlign),a.textBaseline&&(t.textBaseline=a.textBaseline),o=0;o<l.length;++o)n=l[o],a.backdrop&&function(t,e){let i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}(t,a.backdrop),h&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),s$(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(n,i,s,a.maxWidth)),t.fillText(n,i,s,a.maxWidth),function(t,e,i,s,r){if(r.strikethrough||r.underline){let a=t.measureText(s),o=e-a.actualBoundingBoxLeft,n=e+a.actualBoundingBoxRight,l=i-a.actualBoundingBoxAscent,h=i+a.actualBoundingBoxDescent,c=r.strikethrough?(l+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,c),t.lineTo(n,c),t.stroke()}}(t,i,s,n,a),s+=Number(r.lineHeight);t.restore()}function rX(t,e){let{x:i,y:s,w:r,h:a,radius:o}=e;t.arc(i+o.topLeft,s+o.topLeft,o.topLeft,1.5*sY,sY,!0),t.lineTo(i,s+a-o.bottomLeft),t.arc(i+o.bottomLeft,s+a-o.bottomLeft,o.bottomLeft,sY,sQ,!0),t.lineTo(i+r-o.bottomRight,s+a),t.arc(i+r-o.bottomRight,s+a-o.bottomRight,o.bottomRight,sQ,0,!0),t.lineTo(i+r,s+o.topRight),t.arc(i+r-o.topRight,s+o.topRight,o.topRight,0,-sQ,!0),t.lineTo(i+o.topLeft,s)}let rY=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,rK=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,rJ=t=>+t||0;function rG(t,e){let i={},s=sP(e),r=s?Object.keys(e):e,a=sP(t)?s?i=>sO(t[i],t[e[i]]):e=>t[e]:()=>t;for(let t of r)i[t]=rJ(a(t));return i}function rZ(t){return rG(t,{top:"y",right:"x",bottom:"y",left:"x"})}function rQ(t){return rG(t,["topLeft","topRight","bottomLeft","bottomRight"])}function r0(t){let e=rZ(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function r1(t,e){t=t||{},e=e||rz.font;let i=sO(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let s=sO(t.style,e.style);s&&!(""+s).match(rK)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);let r={family:sO(t.family,e.family),lineHeight:function(t,e){let i=(""+t).match(rY);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}(sO(t.lineHeight,e.lineHeight),i),size:i,style:s,weight:sO(t.weight,e.weight),string:""};return r.string=!r||s$(r.size)||s$(r.family)?null:(r.style?r.style+" ":"")+(r.weight?r.weight+" ":"")+r.size+"px "+r.family,r}function r2(t,e,i,s){let r,a,o,n=!0;for(r=0,a=t.length;r<a;++r)if(void 0!==(o=t[r])&&(void 0!==e&&"function"==typeof o&&(o=o(e),n=!1),void 0!==i&&sA(o)&&(o=o[i%o.length],n=!1),void 0!==o))return s&&!n&&(s.cacheable=!1),o}function r5(t,e){return Object.assign(Object.create(t),e)}function r4(t,e=[""],i,s,r=()=>t[0]){let a=i||t;return void 0===s&&(s=as("_fallback",t)),new Proxy({[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:s,_getTarget:r,override:i=>r4([i,...t],e,a,s)},{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,s)=>r7(i,s,()=>(function(t,e,i,s){let r;for(let a of e)if(void 0!==(r=as(r9(a,t),i)))return r8(t,r)?ae(i,s,t,r):r})(s,e,t,i)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>ar(t).includes(e),ownKeys:t=>ar(t),set(t,e,i){let s=t._storage||(t._storage=r());return t[e]=s[e]=i,delete t._keys,!0}})}function r3(t,e,i,s){return new Proxy({_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:r6(t,s),setContext:e=>r3(t,e,i,s),override:r=>r3(t.override(r),e,i,s)},{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>r7(t,e,()=>(function(t,e,i){let{_proxy:s,_context:r,_subProxy:a,_descriptors:o}=t,n=s[e];return sq(n)&&o.isScriptable(e)&&(n=function(t,e,i,s){let{_proxy:r,_context:a,_subProxy:o,_stack:n}=i;if(n.has(t))throw Error("Recursion detected: "+Array.from(n).join("->")+"->"+t);n.add(t);let l=e(a,o||s);return n.delete(t),r8(t,l)&&(l=ae(r._scopes,r,t,l)),l}(e,n,t,i)),sA(n)&&n.length&&(n=function(t,e,i,s){let{_proxy:r,_context:a,_subProxy:o,_descriptors:n}=i;if(void 0!==a.index&&s(t))return e[a.index%e.length];if(sP(e[0])){let i=e,s=r._scopes.filter(t=>t!==i);for(let l of(e=[],i)){let i=ae(s,r,t,l);e.push(r3(i,a,o&&o[t],n))}}return e}(e,n,t,o.isIndexable)),r8(e,n)&&(n=r3(n,r,a&&a[e],o)),n})(t,e,i)),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,s)=>(t[i]=s,delete e[i],!0)})}function r6(t,e={scriptable:!0,indexable:!0}){let{_scriptable:i=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:i,indexable:s,isScriptable:sq(i)?i:()=>i,isIndexable:sq(s)?s:()=>s}}let r9=(t,e)=>t?t+sB(e):e,r8=(t,e)=>sP(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function r7(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];let s=i();return t[e]=s,s}let at=(t,e)=>!0===t?e:"string"==typeof t?sH(e,t):void 0;function ae(t,e,i,s){var r;let a=e._rootScopes,o=(r=e._fallback,sq(r)?r(i,s):r),n=[...t,...a],l=new Set;l.add(s);let h=ai(l,n,i,o||i,s);return null!==h&&(void 0===o||o===i||null!==(h=ai(l,n,o,h,s)))&&r4(Array.from(l),[""],a,o,()=>{var t,r,a;let o,n;return t=e,r=i,a=s,r in(o=t._getTarget())||(o[r]={}),sA(n=o[r])&&sP(a)?a:n||{}})}function ai(t,e,i,s,r){for(;i;)i=function(t,e,i,s,r){for(let o of e){let e=at(i,o);if(e){var a;t.add(e);let o=(a=e._fallback,sq(a)?a(i,r):a);if(void 0!==o&&o!==i&&o!==s)return o}else if(!1===e&&void 0!==s&&i!==s)return null}return!1}(t,e,i,s,r);return i}function as(t,e){for(let i of e){if(!i)continue;let e=i[t];if(void 0!==e)return e}}function ar(t){let e=t._keys;return e||(e=t._keys=function(t){let e=new Set;for(let i of t)for(let t of Object.keys(i).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function aa(t,e,i,s){let r,a,o,{iScale:n}=t,{key:l="r"}=this._parsing,h=Array(s);for(r=0;r<s;++r)o=e[a=r+i],h[r]={r:n.parse(sH(o,l),a)};return h}let ao=Number.EPSILON||1e-14,an=(t,e)=>e<t.length&&!t[e].skip&&t[e],al=t=>"x"===t?"y":"x";function ah(t,e,i){return Math.max(Math.min(t,i),e)}function ac(){return"u">typeof window&&"u">typeof document}function ad(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function au(t,e,i){let s;return"string"==typeof t?(s=parseInt(t,10),-1!==t.indexOf("%")&&(s=s/100*e.parentNode[i])):s=t,s}let af=t=>t.ownerDocument.defaultView.getComputedStyle(t,null),ap=["top","right","bottom","left"];function ag(t,e,i){let s={};i=i?"-"+i:"";for(let r=0;r<4;r++){let a=ap[r];s[a]=parseFloat(t[e+"-"+a+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function am(t,e){if("native"in t)return t;let{canvas:i,currentDevicePixelRatio:s}=e,r=af(i),a="border-box"===r.boxSizing,o=ag(r,"padding"),n=ag(r,"border","width"),{x:l,y:h,box:c}=function(t,e){let i,s,r,a=t.touches,o=a&&a.length?a[0]:t,{offsetX:n,offsetY:l}=o,h=!1;if(r=t.target,(n>0||l>0)&&(!r||!r.shadowRoot))i=n,s=l;else{let t=e.getBoundingClientRect();i=o.clientX-t.left,s=o.clientY-t.top,h=!0}return{x:i,y:s,box:h}}(t,i),d=o.left+(c&&n.left),u=o.top+(c&&n.top),{width:f,height:p}=e;return a&&(f-=o.width+n.width,p-=o.height+n.height),{x:Math.round((l-d)/f*i.width/s),y:Math.round((h-u)/p*i.height/s)}}let a_=t=>Math.round(10*t)/10;function ab(t,e,i){let s=e||1,r=a_(t.height*s),a=a_(t.width*s);t.height=a_(t.height),t.width=a_(t.width);let o=t.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==s||o.height!==r||o.width!==a)&&(t.currentDevicePixelRatio=s,o.height=r,o.width=a,t.ctx.setTransform(s,0,0,s,0,0),!0)}let ay=function(){let t=!1;try{let e={get passive(){return t=!0,!1}};ac()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function av(t,e){let i=af(t).getPropertyValue(e),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function ax(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function aw(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:"middle"===s?i<.5?t.y:e.y:"after"===s?i<1?t.y:e.y:i>0?e.y:t.y}}function aM(t,e,i,s){let r={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},o=ax(t,r,i),n=ax(r,a,i),l=ax(a,e,i),h=ax(o,n,i),c=ax(n,l,i);return ax(h,c,i)}function ak(t){return"angle"===t?{between:rr,compare:ri,normalize:rs}:{between:ro,compare:(t,e)=>t-e,normalize:t=>t}}function aS({start:t,end:e,count:i,loop:s,style:r}){return{start:t%i,end:e%i,loop:s&&(e-t+1)%i==0,style:r}}function a$(t,e,i){let s,r,a;if(!i)return[t];let{property:o,start:n,end:l}=i,h=e.length,{compare:c,between:d,normalize:u}=ak(o),{start:f,end:p,loop:g,style:m}=function(t,e,i){let s,{property:r,start:a,end:o}=i,{between:n,normalize:l}=ak(r),h=e.length,{start:c,end:d,loop:u}=t;if(u){for(c+=h,d+=h,s=0;s<h&&n(l(e[c%h][r]),a,o);++s)c--,d--;c%=h,d%=h}return d<c&&(d+=h),{start:c,end:d,loop:u,style:t.style}}(t,e,i),_=[],b=!1,y=null,v=()=>b||d(n,a,s)&&0!==c(n,a),x=()=>!b||0===c(l,s)||d(l,a,s);for(let t=f,i=f;t<=p;++t)(r=e[t%h]).skip||(s=u(r[o]))!==a&&(b=d(s,n,l),null===y&&v()&&(y=0===c(s,n)?t:i),null!==y&&x()&&(_.push(aS({start:y,end:t,loop:g,count:h,style:m})),y=null),i=t,a=s);return null!==y&&_.push(aS({start:y,end:p,loop:g,count:h,style:m})),_}function aA(t,e){let i=[],s=t.segments;for(let r=0;r<s.length;r++){let a=a$(s[r],t.points,e);a.length&&i.push(...a)}return i}function aP(t,e,i,s){return s&&s.setContext&&i?function(t,e,i,s){let r=t._chart.getContext(),a=aC(t.options),{_datasetIndex:o,options:{spanGaps:n}}=t,l=i.length,h=[],c=a,d=e[0].start,u=d;function f(t,e,s,r){let a=n?-1:1;if(t!==e){for(t+=l;i[t%l].skip;)t-=a;for(;i[e%l].skip;)e+=a;t%l!=e%l&&(h.push({start:t%l,end:e%l,loop:s,style:r}),c=r,d=e%l)}}for(let t of e){let e,a=i[(d=n?d:t.start)%l];for(u=d+1;u<=t.end;u++){let n=i[u%l];(function(t,e){if(!e)return!1;let i=[],s=function(t,e){return rM(e)?(i.includes(e)||i.push(e),i.indexOf(e)):e};return JSON.stringify(t,s)!==JSON.stringify(e,s)})(e=aC(s.setContext(r5(r,{type:"segment",p0:a,p1:n,p0DataIndex:(u-1)%l,p1DataIndex:u%l,datasetIndex:o}))),c)&&f(d,u-1,t.loop,c),a=n,c=e}d<u-1&&f(d,u-1,t.loop,c)}return h}(t,e,i,s):e}function aC(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function aE(t,e,i){return t.options.clip?t[i]:e[i]}function aO(t,e){let i=e._clip;if(i.disabled)return!1;let s=function(t,e){let{xScale:i,yScale:s}=t;return i&&s?{left:aE(i,e,"left"),right:aE(i,e,"right"),top:aE(s,e,"top"),bottom:aE(s,e,"bottom")}:e}(e,t.chartArea);return{left:!1===i.left?0:s.left-(!0===i.left?0:i.left),right:!1===i.right?t.width:s.right+(!0===i.right?0:i.right),top:!1===i.top?0:s.top-(!0===i.top?0:i.top),bottom:!1===i.bottom?t.height:s.bottom+(!0===i.bottom?0:i.bottom)}}var aD=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){let r=e.listeners[s],a=e.duration;r.forEach(s=>s({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(i-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=rf.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{let r;if(!i.running||!i.items.length)return;let a=i.items,o=a.length-1,n=!1;for(;o>=0;--o)(r=a[o])._active?(r._total>i.duration&&(i.duration=r._total),r.tick(t),n=!0):(a[o]=a[a.length-1],a.pop());n&&(s.draw(),this._notify(s,i,t,"progress")),a.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=a.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!!e&&!!e.running&&!!e.items.length}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};let aT="transparent",aL={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){let s=rk(t||aT),r=s.valid&&rk(e||aT);return r&&r.valid?r.mix(s,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class az{constructor(t,e,i,s){let r=e[i];s=r2([t.to,s,r,t.from]);let a=r2([t.from,r,s]);this._active=!0,this._fn=t.fn||aL[t.type||typeof a],this._easing=rw[t.easing]||rw.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let s=this._target[this._prop],r=i-this._start,a=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=r2([t.to,e,s,t.from]),this._from=r2([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e,i=t-this._start,s=this._duration,r=this._prop,a=this._from,o=this._loop,n=this._to;if(this._active=a!==n&&(o||i<s),!this._active){this._target[r]=n,this._notify(!0);return}if(i<0){this._target[r]=a;return}e=i/s%2,e=o&&e>1?2-e:e,e=this._easing(Math.min(1,Math.max(0,e))),this._target[r]=this._fn(a,n,e)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}class aF{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!sP(t))return;let e=Object.keys(rz.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{let r=t[s];if(!sP(r))return;let a={};for(let t of e)a[t]=r[t];(sA(r.properties)&&r.properties||[s]).forEach(t=>{t!==s&&i.has(t)||i.set(t,a)})})}_animateOptions(t,e){let i=e.options,s=function(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}(t,i);if(!s)return[];let r=this._createAnimations(s,i);return i.$shared&&(function(t,e){let i=[],s=Object.keys(e);for(let e=0;e<s.length;e++){let r=t[s[e]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)})(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){let i,s=this._properties,r=[],a=t.$animations||(t.$animations={}),o=Object.keys(e),n=Date.now();for(i=o.length-1;i>=0;--i){let l=o[i];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(t,e));continue}let h=e[l],c=a[l],d=s.get(l);if(c)if(d&&c.active()){c.update(d,h,n);continue}else c.cancel();if(!d||!d.duration){t[l]=h;continue}a[l]=c=new az(d,t,l,h),r.push(c)}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);let i=this._createAnimations(t,e);if(i.length)return aD.add(this._chart,i),!0}}function aR(t,e){let i=t&&t.options||{},s=i.reverse,r=void 0===i.min?e:0,a=void 0===i.max?e:0;return{start:s?a:r,end:s?r:a}}function aI(t,e){let i,s,r=[],a=t._getSortedDatasetMetas(e);for(i=0,s=a.length;i<s;++i)r.push(a[i].index);return r}function aj(t,e,i,s={}){let r,a,o,n,l=t.keys,h="single"===s.mode;if(null===e)return;let c=!1;for(r=0,a=l.length;r<a;++r){if((o=+l[r])===i){if(c=!0,s.all)continue;break}sC(n=t.values[o])&&(h||0===e||s5(e)===s5(n))&&(e+=n)}return c||s.all?e:0}function aV(t,e){let i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function aW(t,e,i,s){for(let r of e.getMatchingVisibleMetas(s).reverse()){let e=t[r.index];if(i&&e>0||!i&&e<0)return r.index}return null}function aN(t,e){let i,{chart:s,_cachedMeta:r}=t,a=s._stacks||(s._stacks={}),{iScale:o,vScale:n,index:l}=r,h=o.axis,c=n.axis,d=`${o.id}.${n.id}.${r.stack||r.type}`,u=e.length;for(let t=0;t<u;++t){let s=e[t],{[h]:o,[c]:u}=s;(i=(s._stacks||(s._stacks={}))[c]=function(t,e,i){let s=t[e]||(t[e]={});return s[i]||(s[i]={})}(a,d,o))[l]=u,i._top=aW(i,n,!0,r.type),i._bottom=aW(i,n,!1,r.type),(i._visualValues||(i._visualValues={}))[l]=u}}function aH(t,e){let i=t.scales;return Object.keys(i).filter(t=>i[t].axis===e).shift()}function aB(t,e){let i=t.controller.index,s=t.vScale&&t.vScale.axis;if(s)for(let r of e=e||t._parsed){let t=r._stacks;if(!t||void 0===t[s]||void 0===t[s][i])return;delete t[s][i],void 0!==t[s]._visualValues&&void 0!==t[s]._visualValues[i]&&delete t[s]._visualValues[i]}}let aU=t=>"reset"===t||"none"===t,aq=(t,e)=>e?t:Object.assign({},t);class aX{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=aV(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&aB(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(t,e,i,s)=>"x"===t?e:"r"===t?s:i,r=e.xAxisID=sO(i.xAxisID,aH(t,"x")),a=e.yAxisID=sO(i.yAxisID,aH(t,"y")),o=e.rAxisID=sO(i.rAxisID,aH(t,"r")),n=e.indexAxis,l=e.iAxisID=s(n,r,a,o),h=e.vAxisID=s(n,a,r,o);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&rd(this._data,this),t._stacked&&aB(t)}_dataCheck(){let t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(sP(e)){let t=this._cachedMeta;this._data=function(t,e){let i,s,r,{iScale:a,vScale:o}=e,n="x"===a.axis?"x":"y",l="x"===o.axis?"x":"y",h=Object.keys(t),c=Array(h.length);for(i=0,s=h.length;i<s;++i)r=h[i],c[i]={[n]:r,[l]:t[r]};return c}(e,t)}else if(i!==e){if(i){rd(i,this);let t=this._cachedMeta;aB(t),t._parsed=[]}e&&Object.isExtensible(e)&&(e._chartjs?e._chartjs.listeners.push(this):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),rc.forEach(t=>{let i="_onData"+sB(t),s=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...t){let r=s.apply(this,t);return e._chartjs.listeners.forEach(e=>{"function"==typeof e[i]&&e[i](...t)}),r}})}))),this._syncList=[],this._data=e}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let e=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let r=e._stacked;e._stacked=aV(e.vScale,e),e.stack!==i.stack&&(s=!0,aB(e),e.stack=i.stack),this._resyncElements(t),(s||r!==e._stacked)&&(aN(this,e._parsed),e._stacked=aV(e.vScale,e))}configure(){let t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){let i,s,r,{_cachedMeta:a,_data:o}=this,{iScale:n,_stacked:l}=a,h=n.axis,c=0===t&&e===o.length||a._sorted,d=t>0&&a._parsed[t-1];if(!1===this._parsing)a._parsed=o,a._sorted=!0,r=o;else{r=sA(o[t])?this.parseArrayData(a,o,t,e):sP(o[t])?this.parseObjectData(a,o,t,e):this.parsePrimitiveData(a,o,t,e);let n=()=>null===s[h]||d&&s[h]<d[h];for(i=0;i<e;++i)a._parsed[i+t]=s=r[i],c&&(n()&&(c=!1),d=s);a._sorted=c}l&&aN(this,r)}parsePrimitiveData(t,e,i,s){let r,a,{iScale:o,vScale:n}=t,l=o.axis,h=n.axis,c=o.getLabels(),d=o===n,u=Array(s);for(r=0;r<s;++r)a=r+i,u[r]={[l]:d||o.parse(c[a],a),[h]:n.parse(e[a],a)};return u}parseArrayData(t,e,i,s){let r,a,o,{xScale:n,yScale:l}=t,h=Array(s);for(r=0;r<s;++r)o=e[a=r+i],h[r]={x:n.parse(o[0],a),y:l.parse(o[1],a)};return h}parseObjectData(t,e,i,s){let r,a,o,{xScale:n,yScale:l}=t,{xAxisKey:h="x",yAxisKey:c="y"}=this._parsing,d=Array(s);for(r=0;r<s;++r)o=e[a=r+i],d[r]={x:n.parse(sH(o,h),a),y:l.parse(sH(o,c),a)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){let s=this.chart,r=this._cachedMeta,a=e[t.axis];return aj({keys:aI(s,!0),values:e._stacks[t.axis]._visualValues},a,r.index,{mode:i})}updateRangeFromParsed(t,e,i,s){let r=i[e.axis],a=null===r?NaN:r,o=s&&i._stacks[e.axis];s&&o&&(s.values=o,a=aj(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){let i,s,r,a=this._cachedMeta,o=a._parsed,n=a._sorted&&t===a.iScale,l=o.length,h=this._getOtherScale(t),c=(r=this.chart,e&&!a.hidden&&a._stacked&&{keys:aI(r,!0),values:null}),d={min:1/0,max:-1/0},{min:u,max:f}=function(t){let{min:e,max:i,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:-1/0,max:r?i:1/0}}(h);function p(){let e=(s=o[i])[h.axis];return!sC(s[t.axis])||u>e||f<e}for(i=0;i<l&&(p()||(this.updateRangeFromParsed(d,t,s,c),!n));++i);if(n){for(i=l-1;i>=0;--i)if(!p()){this.updateRangeFromParsed(d,t,s,c);break}}return d}getAllParsedValues(t){let e,i,s,r=this._cachedMeta._parsed,a=[];for(e=0,i=r.length;e<i;++e)sC(s=r[e][t.axis])&&a.push(s);return a}getMaxOverflow(){return!1}getLabelAndValue(t){let e=this._cachedMeta,i=e.iScale,s=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){var e;let i,s,r,a,o=this._cachedMeta;this.update(t||"default"),sP(e=sO(this.options.clip,function(t,e,i){if(!1===i)return!1;let s=aR(t,i),r=aR(e,i);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}(o.xScale,o.yScale,this.getMaxOverflow())))?(i=e.top,s=e.right,r=e.bottom,a=e.left):i=s=r=a=e,o._clip={top:i,right:s,bottom:r,left:a,disabled:!1===e}}update(t){}draw(){let t,e=this._ctx,i=this.chart,s=this._cachedMeta,r=s.data||[],a=i.chartArea,o=[],n=this._drawStart||0,l=this._drawCount||r.length-n,h=this.options.drawActiveElementsOnTop;for(s.dataset&&s.dataset.draw(e,a,n,l),t=n;t<n+l;++t){let i=r[t];i.hidden||(i.active&&h?o.push(i):i.draw(e,a))}for(t=0;t<o.length;++t)o[t].draw(e,a)}getStyle(t,e){let i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){var s;let r,a=this.getDataset();if(t>=0&&t<this._cachedMeta.data.length){let e=this._cachedMeta.data[t];(r=e.$context||(e.$context=r5(this.getContext(),{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"}))).parsed=this.getParsed(t),r.raw=a.data[t],r.index=r.dataIndex=t}else(r=this.$context||(this.$context=r5(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:s=this.index,index:s,mode:"default",type:"dataset"}))).dataset=a,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){let s="active"===e,r=this._cachedDataOpts,a=t+"-"+e,o=r[a],n=this.enableOptionSharing&&sU(i);if(o)return aq(o,n);let l=this.chart.config,h=l.datasetElementScopeKeys(this._type,t),c=s?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),h),u=Object.keys(rz.elements[t]),f=()=>this.getContext(i,s,e),p=l.resolveNamedOptions(d,u,f,c);return p.$shared&&(p.$shared=n,r[a]=Object.freeze(aq(p,n))),p}_resolveAnimations(t,e,i){let s,r=this.chart,a=this._cachedDataOpts,o=`animation-${e}`,n=a[o];if(n)return n;if(!1!==r.options.animation){let r=this.chart.config,a=r.datasetAnimationScopeKeys(this._type,e),o=r.getOptionScopes(this.getDataset(),a);s=r.createResolver(o,this.getContext(t,i,e))}let l=new aF(r,s&&s.animations);return s&&s._cacheable&&(a[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||aU(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){let i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,r=this.getSharedOptions(i),a=this.includeOptions(e,r)||r!==s;return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:a}}updateElement(t,e,i,s){aU(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!aU(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;let r=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let e=this._data,i=this._cachedMeta.data;for(let[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];let s=i.length,r=e.length,a=Math.min(r,s);a&&this.parse(0,a),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,e,i=!0){let s,r=this._cachedMeta,a=r.data,o=t+e,n=t=>{for(t.length+=e,s=t.length-1;s>=o;s--)t[s]=t[s-e]};for(n(a),s=t;s<o;++s)a[s]=new this.dataElementType;this._parsing&&n(r._parsed),this.parse(t,e),i&&this.updateElements(a,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(t,e);i._stacked&&aB(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function aY(t,e,i,s){if(sA(t)){let r,a,o,n,l,h;r=i.parse(t[0],s),o=Math.min(r,a=i.parse(t[1],s)),n=Math.max(r,a),l=o,h=n,Math.abs(o)>Math.abs(n)&&(l=n,h=o),e[i.axis]=h,e._custom={barStart:l,barEnd:h,start:r,end:a,min:o,max:n}}else e[i.axis]=i.parse(t,s);return e}function aK(t,e,i,s){let r,a,o,n,l=t.iScale,h=t.vScale,c=l.getLabels(),d=l===h,u=[];for(r=i,a=i+s;r<a;++r)n=e[r],(o={})[l.axis]=d||l.parse(c[r],r),u.push(aY(n,o,h,r));return u}function aJ(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function aG(t,e,i,s){var r,a,o;return s?aZ((r=t,a=e,o=i,t=r===a?o:r===o?a:r),i,e):aZ(t,e,i)}function aZ(t,e,i){return"start"===t?e:"end"===t?i:t}class aQ extends aX{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){let r=super.parsePrimitiveData(t,e,i,s);for(let t=0;t<r.length;t++)r[t]._custom=this.resolveDataElementOptions(t+i).radius;return r}parseArrayData(t,e,i,s){let r=super.parseArrayData(t,e,i,s);for(let t=0;t<r.length;t++){let s=e[i+t];r[t]._custom=sO(s[2],this.resolveDataElementOptions(t+i).radius)}return r}parseObjectData(t,e,i,s){let r=super.parseObjectData(t,e,i,s);for(let t=0;t<r.length;t++){let s=e[i+t];r[t]._custom=sO(s&&s.r&&+s.r,this.resolveDataElementOptions(t+i).radius)}return r}getMaxOverflow(){let t=this._cachedMeta.data,e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,a=this.getParsed(t),o=s.getLabelForValue(a.x),n=r.getLabelForValue(a.y),l=a._custom;return{label:i[t]||"",value:"("+o+", "+n+(l?", "+l:"")+")"}}update(t){let e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){let r="reset"===s,{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:n,includeOptions:l}=this._getSharedOptions(e,s),h=a.axis,c=o.axis;for(let d=e;d<e+i;d++){let e=t[d],i=!r&&this.getParsed(d),u={},f=u[h]=r?a.getPixelForDecimal(.5):a.getPixelForValue(i[h]),p=u[c]=r?o.getBasePixel():o.getPixelForValue(i[c]);u.skip=isNaN(f)||isNaN(p),l&&(u.options=n||this.resolveDataElementOptions(d,e.active?"active":s),r&&(u.options.radius=0)),this.updateElement(e,d,u,s)}}resolveDataElementOptions(t,e){let i=this.getParsed(t),s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let r=s.radius;return"active"!==e&&(s.radius=0),s.radius+=sO(i&&i._custom,r),s}}class a0 extends aX{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data,{labels:{pointStyle:i,textAlign:s,color:r,useBorderRadius:a,borderRadius:o}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((e,n)=>{let l=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:l.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(n),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:s,pointStyle:i,borderRadius:a&&(o||l.borderRadius),index:n}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){let i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let r,a,o=t=>+i[t];if(sP(i[t])){let{key:t="value"}=this._parsing;o=e=>+sH(i[e],t)}for(r=t,a=t+e;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return s8(this.options.rotation-90)}_getCircumference(){return s8(this.options.circumference)}_getRotationExtents(){let t=sK,e=-sK;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),a=s._getCircumference();t=Math.min(t,r),e=Math.max(e,r+a)}return{rotation:t,circumference:e-t}}update(t){let e,{chartArea:i}=this.chart,s=this._cachedMeta,r=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-a)/2,0),n=Math.min((e=this.options.cutout,"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:e/o),1),l=this._getRingWeight(this.index),{circumference:h,rotation:c}=this._getRotationExtents(),{ratioX:d,ratioY:u,offsetX:f,offsetY:p}=function(t,e,i){let s=1,r=1,a=0,o=0;if(e<sK){let n=t+e,l=Math.cos(t),h=Math.sin(t),c=Math.cos(n),d=Math.sin(n),u=(e,s,r)=>rr(e,t,n,!0)?1:Math.max(s,s*i,r,r*i),f=(e,s,r)=>rr(e,t,n,!0)?-1:Math.min(s,s*i,r,r*i),p=u(0,l,c),g=u(sQ,h,d),m=f(sY,l,c),_=f(sY+sQ,h,d);s=(p-m)/2,r=(g-_)/2,a=-(p+m)/2,o=-(g+_)/2}return{ratioX:s,ratioY:r,offsetX:a,offsetY:o}}(c,h,n),g=Math.max(Math.min((i.width-a)/d,(i.height-a)/u)/2,0),m=sD(this.options.radius,g),_=Math.max(m*n,0),b=(m-_)/this._getVisibleDatasetWeightTotal();this.offsetX=f*m,this.offsetY=p*m,s.total=this.calculateTotal(),this.outerRadius=m-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*l,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){let i=this.options,s=this._cachedMeta,r=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===s._parsed[t]||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/sK)}updateElements(t,e,i,s){let r,a="reset"===s,o=this.chart,n=o.chartArea,l=o.options.animation,h=(n.left+n.right)/2,c=(n.top+n.bottom)/2,d=a&&l.animateScale,u=d?0:this.innerRadius,f=d?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(e,s),m=this._getRotation();for(r=0;r<e;++r)m+=this._circumference(r,a);for(r=e;r<e+i;++r){let e=this._circumference(r,a),i=t[r],o={x:h+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:f,innerRadius:u};g&&(o.options=p||this.resolveDataElementOptions(r,i.active?"active":s)),m+=e,this.updateElement(i,r,o,s)}}calculateTotal(){let t,e=this._cachedMeta,i=e.data,s=0;for(t=0;t<i.length;t++){let r=e._parsed[t];null!==r&&!isNaN(r)&&this.chart.getDataVisibility(t)&&!i[t].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){let e=this._cachedMeta.total;return e>0&&!isNaN(t)?Math.abs(t)/e*sK:0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=rC(e._parsed[t],i.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let e,i,s,r,a,o=0,n=this.chart;if(!t){for(e=0,i=n.data.datasets.length;e<i;++e)if(n.isDatasetVisible(e)){t=(s=n.getDatasetMeta(e)).data,r=s.controller;break}}if(!t)return 0;for(e=0,i=t.length;e<i;++e)"inner"!==(a=r.resolveDataElementOptions(e)).borderAlign&&(o=Math.max(o,a.borderWidth||0,a.hoverBorderWidth||0));return o}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){let t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(sO(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class a1 extends aX{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((e,r)=>{let a=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:s,lineWidth:a.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=rC(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:r}}parseObjectData(t,e,i,s){return aa.bind(this)(t,e,i,s)}update(t){let e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){let t=this._cachedMeta,e={min:1/0,max:-1/0};return t.data.forEach((t,i)=>{let s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<e.min&&(e.min=s),s>e.max&&(e.max=s))}),e}_updateRadius(){let t=this.chart,e=t.chartArea,i=t.options,s=Math.max(Math.min(e.right-e.left,e.bottom-e.top)/2,0),r=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-r)/t.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,s){let r,a="reset"===s,o=this.chart,n=o.options.animation,l=this._cachedMeta.rScale,h=l.xCenter,c=l.yCenter,d=l.getIndexAngle(0)-.5*sY,u=d,f=360/this.countVisibleElements();for(r=0;r<e;++r)u+=this._computeAngle(r,s,f);for(r=e;r<e+i;r++){let e=t[r],i=u,p=u+this._computeAngle(r,s,f),g=o.getDataVisibility(r)?l.getDistanceFromCenterForValue(this.getParsed(r).r):0;u=p,a&&(n.animateScale&&(g=0),n.animateRotate&&(i=p=d));let m={x:h,y:c,innerRadius:0,outerRadius:g,startAngle:i,endAngle:p,options:this.resolveDataElementOptions(r,e.active?"active":s)};this.updateElement(e,r,m,s)}}countVisibleElements(){let t=this._cachedMeta,e=0;return t.data.forEach((t,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?s8(this.resolveDataElementOptions(t,e).angle||i):0}}class a2 extends aX{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return aa.bind(this)(t,e,i,s)}update(t){let e=this._cachedMeta,i=e.dataset,s=e.data||[],r=e.iScale.getLabels();if(i.points=s,"resize"!==t){let e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);let a={_loop:!0,_fullLoop:r.length===s.length,options:e};this.updateElement(i,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){let r=this._cachedMeta.rScale,a="reset"===s;for(let o=e;o<e+i;o++){let e=t[o],i=this.resolveDataElementOptions(o,e.active?"active":s),n=r.getPointPositionForValue(o,this.getParsed(o).r),l=a?r.xCenter:n.x,h=a?r.yCenter:n.y,c={x:l,y:h,angle:n.angle,skip:isNaN(l)||isNaN(h),options:i};this.updateElement(e,o,c,s)}}}class a5 extends aX{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,a=this.getParsed(t),o=s.getLabelForValue(a.x),n=r.getLabelForValue(a.y);return{label:i[t]||"",value:"("+o+", "+n+")"}}update(t){let e=this._cachedMeta,{data:i=[]}=e,s=this.chart._animationsDisabled,{start:r,count:a}=r_(e,i,s);if(this._drawStart=r,this._drawCount=a,rb(e)&&(r=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:r,_dataset:a}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=i;let o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(r,void 0,{animated:!s,options:o},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,r,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,s){let r="reset"===s,{iScale:a,vScale:o,_stacked:n,_dataset:l}=this._cachedMeta,h=this.resolveDataElementOptions(e,s),c=this.getSharedOptions(h),d=this.includeOptions(s,c),u=a.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=s6(p)?p:1/0,_=this.chart._animationsDisabled||r||"none"===s,b=e>0&&this.getParsed(e-1);for(let h=e;h<e+i;++h){let e=t[h],i=this.getParsed(h),p=_?e:{},y=s$(i[f]),v=p[u]=a.getPixelForValue(i[u],h),x=p[f]=r||y?o.getBasePixel():o.getPixelForValue(n?this.applyStack(o,i,n):i[f],h);p.skip=isNaN(v)||isNaN(x)||y,p.stop=h>0&&Math.abs(i[u]-b[u])>m,g&&(p.parsed=i,p.raw=l.data[h]),d&&(p.options=c||this.resolveDataElementOptions(h,e.active?"active":s)),_||this.updateElement(e,h,p,s),b=i}this.updateSharedOptions(c,s,h)}getMaxOverflow(){let t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}let i=t.dataset,s=i.options&&i.options.borderWidth||0;return e.length?Math.max(s,e[0].size(this.resolveDataElementOptions(0)),e[e.length-1].size(this.resolveDataElementOptions(e.length-1)))/2:s}}function a4(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}class a3{static override(t){Object.assign(a3.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return a4()}parse(){return a4()}format(){return a4()}add(){return a4()}diff(){return a4()}startOf(){return a4()}endOf(){return a4()}}function a6(t,e,i,s,r){let a=t.getSortedVisibleDatasetMetas(),o=i[e];for(let t=0,i=a.length;t<i;++t){let{index:i,data:n}=a[t],{lo:l,hi:h}=function(t,e,i,s){let{controller:r,data:a,_sorted:o}=t,n=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(n&&e===n.axis&&"r"!==e&&o&&a.length){let o=n._reversePixels?rh:rl;if(s){if(r._sharedOptions){let t=a[0],s="function"==typeof t.getRange&&t.getRange(e);if(s){let t=o(a,e,i-s),r=o(a,e,i+s);return{lo:t.lo,hi:r.hi}}}}else{let s=o(a,e,i);if(l){let{vScale:e}=r._cachedMeta,{_parsed:i}=t,a=i.slice(0,s.lo+1).reverse().findIndex(t=>!s$(t[e.axis]));s.lo-=Math.max(0,a);let o=i.slice(s.hi).findIndex(t=>!s$(t[e.axis]));s.hi+=Math.max(0,o)}return s}}return{lo:0,hi:a.length-1}}(a[t],e,o,r);for(let t=l;t<=h;++t){let e=n[t];e.skip||s(e,i,t)}}}function a9(t,e,i,s,r){let a=[];return(r||t.isPointInArea(e))&&a6(t,i,e,function(i,o,n){(r||rW(i,t.chartArea,0))&&i.inRange(e.x,e.y,s)&&a.push({element:i,datasetIndex:o,index:n})},!0),a}function a8(t,e,i,s,r,a){let o,n,l,h,c,d;return a||t.isPointInArea(e)?"r"!==i||s?(o=[],n=-1!==i.indexOf("x"),l=-1!==i.indexOf("y"),h=function(t,e){return Math.sqrt(Math.pow(n?Math.abs(t.x-e.x):0,2)+Math.pow(l?Math.abs(t.y-e.y):0,2))},c=1/0,a6(t,i,e,function(i,n,l){let d=i.inRange(e.x,e.y,r);if(s&&!d)return;let u=i.getCenterPoint(r);if(!(a||t.isPointInArea(u))&&!d)return;let f=h(e,u);f<c?(o=[{element:i,datasetIndex:n,index:l}],c=f):f===c&&o.push({element:i,datasetIndex:n,index:l})}),o):(d=[],a6(t,i,e,function(t,i,s){let{startAngle:a,endAngle:o}=t.getProps(["startAngle","endAngle"],r),{angle:n}=rt(t,{x:e.x,y:e.y});rr(n,a,o)&&d.push({element:t,datasetIndex:i,index:s})}),d):[]}function a7(t,e,i,s,r){let a=[],o="x"===i?"inXRange":"inYRange",n=!1;return(a6(t,i,e,(t,s,l)=>{t[o]&&t[o](e[i],r)&&(a.push({element:t,datasetIndex:s,index:l}),n=n||t.inRange(e.x,e.y,r))}),s&&!n)?[]:a}var ot={modes:{index(t,e,i,s){let r=am(e,t),a=i.axis||"x",o=i.includeInvisible||!1,n=i.intersect?a9(t,r,a,s,o):a8(t,r,a,!1,s,o),l=[];return n.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{let e=n[0].index,i=t.data[e];i&&!i.skip&&l.push({element:i,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,i,s){let r=am(e,t),a=i.axis||"xy",o=i.includeInvisible||!1,n=i.intersect?a9(t,r,a,s,o):a8(t,r,a,!1,s,o);if(n.length>0){let e=n[0].datasetIndex,i=t.getDatasetMeta(e).data;n=[];for(let t=0;t<i.length;++t)n.push({element:i[t],datasetIndex:e,index:t})}return n},point(t,e,i,s){let r=am(e,t);return a9(t,r,i.axis||"xy",s,i.includeInvisible||!1)},nearest(t,e,i,s){let r=am(e,t),a=i.axis||"xy",o=i.includeInvisible||!1;return a8(t,r,a,i.intersect,s,o)},x(t,e,i,s){let r=am(e,t);return a7(t,r,"x",i.intersect,s)},y(t,e,i,s){let r=am(e,t);return a7(t,r,"y",i.intersect,s)}}};let oe=["left","top","right","bottom"];function oi(t,e){return t.filter(t=>t.pos===e)}function os(t,e){return t.filter(t=>-1===oe.indexOf(t.pos)&&t.box.axis===e)}function or(t,e){return t.sort((t,i)=>{let s=e?i:t,r=e?t:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function oa(t,e,i,s){return Math.max(t[i],e[i])+Math.max(t[s],e[s])}function oo(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function on(t,e,i,s){let r,a,o,n,l,h,c=[];for(r=0,a=t.length,l=0;r<a;++r){(n=(o=t[r]).box).update(o.width||e.w,o.height||e.h,function(t,e){let i=e.maxPadding;return function(t){let s={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{s[t]=Math.max(e[t],i[t])}),s}(t?["left","right"]:["top","bottom"])}(o.horizontal,e));let{same:a,other:d}=function(t,e,i,s){let{pos:r,box:a}=i,o=t.maxPadding;if(!sP(r)){i.size&&(t[r]-=i.size);let e=s[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?a.height:a.width),i.size=e.size/e.count,t[r]+=i.size}a.getPadding&&oo(o,a.getPadding());let n=Math.max(0,e.outerWidth-oa(o,t,"left","right")),l=Math.max(0,e.outerHeight-oa(o,t,"top","bottom")),h=n!==t.w,c=l!==t.h;return t.w=n,t.h=l,i.horizontal?{same:h,other:c}:{same:c,other:h}}(e,i,o,s);l|=a&&c.length,h=h||d,n.fullSize||c.push(o)}return l&&on(c,e,i,s)||h}function ol(t,e,i,s,r){t.top=i,t.left=e,t.right=e+s,t.bottom=i+r,t.width=s,t.height=r}function oh(t,e,i,s){let r=i.padding,{x:a,y:o}=e;for(let n of t){let t=n.box,l=s[n.stack]||{count:1,placed:0,weight:1},h=n.stackWeight/l.weight||1;if(n.horizontal){let s=e.w*h,a=l.size||t.height;sU(l.start)&&(o=l.start),t.fullSize?ol(t,r.left,o,i.outerWidth-r.right-r.left,a):ol(t,e.left+l.placed,o,s,a),l.start=o,l.placed+=s,o=t.bottom}else{let s=e.h*h,o=l.size||t.width;sU(l.start)&&(a=l.start),t.fullSize?ol(t,a,r.top,o,i.outerHeight-r.bottom-r.top):ol(t,a,e.top+l.placed,o,s),l.start=a,l.placed+=s,a=t.right}}e.x=a,e.y=o}var oc={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){let i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,s){let r,a,o,n,l,h,c,d;if(!t)return;let u=r0(t.options.layout.padding),f=Math.max(e-u.width,0),p=Math.max(i-u.height,0),g=(a=or((r=function(t){let e,i,s,r,a,o,n=[];for(e=0,i=(t||[]).length;e<i;++e)s=t[e],({position:r,options:{stack:a,stackWeight:o=1}}=s),n.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&r+a,stackWeight:o});return n}(t.boxes)).filter(t=>t.box.fullSize),!0),o=or(oi(r,"left"),!0),n=or(oi(r,"right")),l=or(oi(r,"top"),!0),h=or(oi(r,"bottom")),c=os(r,"x"),d=os(r,"y"),{fullSize:a,leftAndTop:o.concat(l),rightAndBottom:n.concat(d).concat(h).concat(c),chartArea:oi(r,"chartArea"),vertical:o.concat(n).concat(d),horizontal:l.concat(h).concat(c)}),m=g.vertical,_=g.horizontal;sL(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});let b=Object.freeze({outerWidth:e,outerHeight:i,padding:u,availableWidth:f,availableHeight:p,vBoxMaxWidth:f/2/(m.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1),hBoxMaxHeight:p/2}),y=Object.assign({},u);oo(y,r0(s));let v=Object.assign({maxPadding:y,w:f,h:p,x:u.left,y:u.top},u),x=function(t,e){let i,s,r,a=function(t){let e={};for(let i of t){let{stack:t,pos:s,stackWeight:r}=i;if(!t||!oe.includes(s))continue;let a=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return e}(t),{vBoxMaxWidth:o,hBoxMaxHeight:n}=e;for(i=0,s=t.length;i<s;++i){let{fullSize:s}=(r=t[i]).box,l=a[r.stack],h=l&&r.stackWeight/l.weight;r.horizontal?(r.width=h?h*o:s&&e.availableWidth,r.height=n):(r.width=o,r.height=h?h*n:s&&e.availableHeight)}return a}(m.concat(_),b);on(g.fullSize,v,b,x),on(m,v,b,x),on(_,v,b,x)&&on(m,v,b,x);let w=v.maxPadding;function M(t){let e=Math.max(w[t]-v[t],0);return v[t]+=e,e}v.y+=M("top"),v.x+=M("left"),M("right"),M("bottom"),oh(g.leftAndTop,v,b,x),v.x+=v.w,v.y+=v.h,oh(g.rightAndBottom,v,b,x),t.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},sL(g.chartArea,e=>{let i=e.box;Object.assign(i,t.chartArea),i.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class od{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class ou extends od{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}let of="$chartjs",op={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},og=t=>null===t||""===t,om=!!ay&&{passive:!0};function o_(t,e){for(let i of t)if(i===e||i.contains(e))return!0}function ob(t,e,i){let s=t.canvas,r=new MutationObserver(t=>{let e=!1;for(let i of t)e=(e=e||o_(i.addedNodes,s))&&!o_(i.removedNodes,s);e&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}function oy(t,e,i){let s=t.canvas,r=new MutationObserver(t=>{let e=!1;for(let i of t)e=(e=e||o_(i.removedNodes,s))&&!o_(i.addedNodes,s);e&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}let ov=new Map,ox=0;function ow(){let t=window.devicePixelRatio;t!==ox&&(ox=t,ov.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function oM(t,e,i){let s=t.canvas,r=s&&ad(s);if(!r)return;let a=rp((t,e)=>{let s=r.clientWidth;i(t,e),s<r.clientWidth&&i()},window),o=new ResizeObserver(t=>{let e=t[0],i=e.contentRect.width,s=e.contentRect.height;(0!==i||0!==s)&&a(i,s)});return o.observe(r),ov.size||window.addEventListener("resize",ow),ov.set(t,a),o}function ok(t,e,i){i&&i.disconnect(),"resize"===e&&(ov.delete(t),ov.size||window.removeEventListener("resize",ow))}function oS(t,e,i){let s=t.canvas,r=rp(e=>{null!==t.ctx&&i(function(t,e){let i=op[t.type]||t.type,{x:s,y:r}=am(t,e);return{type:i,chart:e,native:t,x:void 0!==s?s:null,y:void 0!==r?r:null}}(e,t))},t);return s&&s.addEventListener(e,r,om),r}class o$ extends od{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(!function(t,e){let i=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[of]={initial:{height:s,width:r,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",og(r)){let e=av(t,"width");void 0!==e&&(t.width=e)}if(og(s))if(""===t.style.height)t.height=t.width/(e||2);else{let e=av(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[of])return!1;let i=e[of].initial;["height","width"].forEach(t=>{let s=i[t];s$(s)?e.removeAttribute(t):e.setAttribute(t,s)});let s=i.style||{};return Object.keys(s).forEach(t=>{e.style[t]=s[t]}),e.width=e.width,delete e[of],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let s=t.$proxies||(t.$proxies={}),r={attach:ob,detach:oy,resize:oM}[e]||oS;s[e]=r(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),s=i[e];s&&((({attach:ok,detach:ok,resize:ok})[e]||function(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,om)})(t,e,s),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return function(t,e,i,s){let r=af(t),a=ag(r,"margin"),o=au(r.maxWidth,t,"clientWidth")||sG,n=au(r.maxHeight,t,"clientHeight")||sG,l=function(t,e,i){let s,r;if(void 0===e||void 0===i){let a=t&&ad(t);if(a){let t=a.getBoundingClientRect(),o=af(a),n=ag(o,"border","width"),l=ag(o,"padding");e=t.width-l.width-n.width,i=t.height-l.height-n.height,s=au(o.maxWidth,a,"clientWidth"),r=au(o.maxHeight,a,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:s||sG,maxHeight:r||sG}}(t,e,i),{width:h,height:c}=l;if("content-box"===r.boxSizing){let t=ag(r,"border","width"),e=ag(r,"padding");h-=e.width+t.width,c-=e.height+t.height}return h=Math.max(0,h-a.width),c=Math.max(0,s?h/s:c-a.height),h=a_(Math.min(h,o,l.maxWidth)),c=a_(Math.min(c,n,l.maxHeight)),h&&!c&&(c=a_(h/2)),(void 0!==e||void 0!==i)&&s&&l.height&&c>l.height&&(h=a_(Math.floor((c=l.height)*s))),{width:h,height:c}}(t,e,i,s)}isAttached(t){let e=t&&ad(t);return!!(e&&e.isConnected)}}class oA{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return s6(this.x)&&s6(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let s={};return t.forEach(t=>{s[t]=i[t]&&i[t].active()?i[t]._to:this[t]}),s}}function oP(t,e,i,s,r){let a,o,n,l=sO(s,0),h=Math.min(sO(r,t.length),t.length),c=0;for(i=Math.ceil(i),r&&(i=(a=r-s)/Math.floor(a/i)),n=l;n<0;)n=Math.round(l+ ++c*i);for(o=Math.max(l,0);o<h;o++)o===n&&(e.push(t[o]),n=Math.round(l+ ++c*i))}let oC=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i,oE=(t,e)=>Math.min(e||t,t);function oO(t,e){let i=[],s=t.length/e,r=t.length,a=0;for(;a<r;a+=s)i.push(t[Math.floor(a)]);return i}function oD(t){return t.drawTicks?t.tickLength:0}function oT(t,e){if(!t.display)return 0;let i=r1(t.font,e),s=r0(t.padding);return(sA(t.text)?t.text.length:1)*i.lineHeight+s.height}class oL extends oA{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=sE(t,1/0),e=sE(e,-1/0),i=sE(i,1/0),s=sE(s,-1/0),{min:sE(t,i),max:sE(e,s),minDefined:sC(t),maxDefined:sC(e)}}getMinMax(t){let e,{min:i,max:s,minDefined:r,maxDefined:a}=this.getUserBounds();if(r&&a)return{min:i,max:s};let o=this.getMatchingVisibleMetas();for(let n=0,l=o.length;n<l;++n)e=o[n].controller.getMinMax(this,t),r||(i=Math.min(i,e.min)),a||(s=Math.max(s,e.max));return i=a&&i>s?s:i,s=r&&i>s?i:s,{min:sE(i,sE(s,i)),max:sE(s,sE(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){sT(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:s,grace:r,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,i){let{min:s,max:r}=t,a=sD(e,(r-s)/2),o=(t,e)=>i&&0===t?0:t+e;return{min:o(s,-Math.abs(a)),max:o(r,a)}}(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let n=o<this.ticks.length;this._convertTicksToLabels(n?oO(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=function(t,e){var i;let s,r,a=t.options.ticks,o=(s=(i=t).options.offset,r=i._tickSize(),Math.floor(Math.min(i._length/r+ +!s,i._maxLength/r))),n=Math.min(a.maxTicksLimit||o,o),l=a.major.enabled?function(t){let e,i,s=[];for(e=0,i=t.length;e<i;e++)t[e].major&&s.push(e);return s}(e):[],h=l.length,c=l[0],d=l[h-1],u=[];if(h>n)return function(t,e,i,s){let r,a=0,o=i[0];for(r=0,s=Math.ceil(s);r<t.length;r++)r===o&&(e.push(t[r]),o=i[++a*s])}(e,u,l,h/n),u;let f=function(t,e,i){let s=function(t){let e,i,s=t.length;if(s<2)return!1;for(i=t[0],e=1;e<s;++e)if(t[e]-t[e-1]!==i)return!1;return i}(t),r=e.length/i;if(!s)return Math.max(r,1);let a=function(t){let e,i=[],s=Math.sqrt(t);for(e=1;e<s;e++)t%e==0&&(i.push(e),i.push(t/e));return s===(0|s)&&i.push(s),i.sort((t,e)=>t-e).pop(),i}(s);for(let t=0,e=a.length-1;t<e;t++){let e=a[t];if(e>r)return e}return Math.max(r,1)}(l,e,n);if(h>0){let t,i,s=h>1?Math.round((d-c)/(h-1)):null;for(oP(e,u,f,s$(s)?0:c-s,c),t=0,i=h-1;t<i;t++)oP(e,u,f,l[t],l[t+1]);return oP(e,u,f,d,s$(s)?e.length:d+s),u}return oP(e,u,f),u}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),n&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){sT(this.options.afterUpdate,[this])}beforeSetDimensions(){sT(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){sT(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),sT(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){sT(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e,i,s,r=this.options.ticks;for(e=0,i=t.length;e<i;e++)(s=t[e]).label=sT(r.callback,[s.value,e,t],this)}afterTickToLabelConversion(){sT(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){sT(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t,e,i,s=this.options,r=s.ticks,a=oE(this.ticks.length,s.ticks.maxTicksLimit),o=r.minRotation||0,n=r.maxRotation,l=o;if(!this._isVisible()||!r.display||o>=n||a<=1||!this.isHorizontal()){this.labelRotation=o;return}let h=this._getLabelSizes(),c=h.widest.width,d=h.highest.height,u=ra(this.chart.width-c,0,this.maxWidth);c+6>(t=s.offset?this.maxWidth/a:u/(a-1))&&(t=u/(a-(s.offset?.5:1)),e=this.maxHeight-oD(s.grid)-r.padding-oT(s.title,this.chart.options.font),i=Math.sqrt(c*c+d*d),l=Math.max(o,Math.min(n,l=180/sY*Math.min(Math.asin(ra((h.highest.height+6)/t,-1,1)),Math.asin(ra(e/i,-1,1))-Math.asin(ra(d/i,-1,1)))))),this.labelRotation=l}afterCalculateLabelRotation(){sT(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){sT(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:r}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){let a=oT(s,e.options.font);if(o?(t.width=this.maxWidth,t.height=oD(r)+a):(t.height=this.maxHeight,t.width=oD(r)+a),i.display&&this.ticks.length){let{first:e,last:s,widest:r,highest:a}=this._getLabelSizes(),n=2*i.padding,l=s8(this.labelRotation),h=Math.cos(l),c=Math.sin(l);if(o){let e=i.mirror?0:c*r.width+h*a.height;t.height=Math.min(this.maxHeight,t.height+e+n)}else{let e=i.mirror?0:h*r.width+c*a.height;t.width=Math.min(this.maxWidth,t.width+e+n)}this._calculatePadding(e,s,c,h)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){let{ticks:{align:r,padding:a},position:o}=this.options,n=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){let o=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),c=0,d=0;n?l?(c=s*t.width,d=i*e.height):(c=i*t.height,d=s*e.width):"start"===r?d=e.width:"end"===r?c=t.width:"inner"!==r&&(c=t.width/2,d=e.width/2),this.paddingLeft=Math.max((c-o+a)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-h+a)*this.width/(this.width-h),0)}else{let i=e.height/2,s=t.height/2;"start"===r?(i=0,s=t.height):"end"===r&&(i=e.height,s=0),this.paddingTop=i+a,this.paddingBottom=s+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){sT(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)s$(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=oO(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){let s,r,a,o,n,l,h,c,d,u,f,{ctx:p,_longestTextCache:g}=this,m=[],_=[],b=Math.floor(e/oE(e,i)),y=0,v=0;for(s=0;s<e;s+=b){if(o=t[s].label,p.font=l=(n=this._resolveTickFontOptions(s)).string,h=g[l]=g[l]||{data:{},gc:[]},c=n.lineHeight,d=u=0,s$(o)||sA(o)){if(sA(o))for(r=0,a=o.length;r<a;++r)s$(f=o[r])||sA(f)||(d=rF(p,h.data,h.gc,d,f),u+=c)}else d=rF(p,h.data,h.gc,d,o),u=c;m.push(d),_.push(u),y=Math.max(d,y),v=Math.max(u,v)}sL(g,t=>{let i,s=t.gc,r=s.length/2;if(r>e){for(i=0;i<r;++i)delete t.data[s[i]];s.splice(0,r)}});let x=m.indexOf(y),w=_.indexOf(v),M=t=>({width:m[t]||0,height:_[t]||0});return{first:M(0),last:M(e-1),widest:M(x),highest:M(w),widths:m,heights:_}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return ra(this._alignToPixels?rR(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){var e;let i=this.ticks||[];if(t>=0&&t<i.length){let e=i[t];return e.$context||(e.$context=r5(this.getContext(),{tick:e,index:t,type:"tick"}))}return this.$context||(this.$context=(e=this.chart.getContext(),r5(e,{scale:this,type:"scale"})))}_tickSize(){let t=this.options.ticks,e=s8(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),a=t.autoSkipPadding||0,o=r?r.widest.width+a:0,n=r?r.highest.height+a:0;return this.isHorizontal()?n*i>o*s?o/i:n/s:n*s<o*i?n/i:o/s}_isVisible(){let t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e,i,s,r,a,o,n,l,h,c,d,u,f=this.axis,p=this.chart,g=this.options,{grid:m,position:_,border:b}=g,y=m.offset,v=this.isHorizontal(),x=this.ticks.length+ +!!y,w=oD(m),M=[],k=b.setContext(this.getContext()),S=k.display?k.width:0,$=S/2,A=function(t){return rR(p,t,S)};if("top"===_)e=A(this.bottom),o=this.bottom-w,l=e-$,c=A(t.top)+$,u=t.bottom;else if("bottom"===_)e=A(this.top),c=t.top,u=A(t.bottom)-$,o=e+$,l=this.top+w;else if("left"===_)e=A(this.right),a=this.right-w,n=e-$,h=A(t.left)+$,d=t.right;else if("right"===_)e=A(this.left),h=t.left,d=A(t.right)-$,a=e+$,n=this.left+w;else if("x"===f){if("center"===_)e=A((t.top+t.bottom)/2+.5);else if(sP(_)){let t=Object.keys(_)[0],i=_[t];e=A(this.chart.scales[t].getPixelForValue(i))}c=t.top,u=t.bottom,l=(o=e+$)+w}else if("y"===f){if("center"===_)e=A((t.left+t.right)/2);else if(sP(_)){let t=Object.keys(_)[0],i=_[t];e=A(this.chart.scales[t].getPixelForValue(i))}n=(a=e-$)-w,h=t.left,d=t.right}let P=sO(g.ticks.maxTicksLimit,x),C=Math.max(1,Math.ceil(x/P));for(i=0;i<x;i+=C){let t=this.getContext(i),e=m.setContext(t),f=b.setContext(t),g=e.lineWidth,_=e.color,x=f.dash||[],w=f.dashOffset,k=e.tickWidth,S=e.tickColor,$=e.tickBorderDash||[],A=e.tickBorderDashOffset;void 0!==(s=function(t,e,i){let s,r=t.ticks.length,a=Math.min(e,r-1),o=t._startPixel,n=t._endPixel,l=t.getPixelForTick(a);if(!i||(s=1===r?Math.max(l-o,n-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(a-1))/2,!((l+=a<e?s:-s)<o-1e-6)&&!(l>n+1e-6)))return l}(this,i,y))&&(r=rR(p,s,g),v?a=n=h=d=r:o=l=c=u=r,M.push({tx1:a,ty1:o,tx2:n,ty2:l,x1:h,y1:c,x2:d,y2:u,width:g,color:_,borderDash:x,borderDashOffset:w,tickWidth:k,tickColor:S,tickBorderDash:$,tickBorderDashOffset:A}))}return this._ticksLength=x,this._borderValue=e,M}_computeLabelItems(t){let e,i,s,r,a,o,n,l,h,c,d,u=this.axis,f=this.options,{position:p,ticks:g}=f,m=this.isHorizontal(),_=this.ticks,{align:b,crossAlign:y,padding:v,mirror:x}=g,w=oD(f.grid),M=w+v,k=x?-v:M,S=-s8(this.labelRotation),$=[],A="middle";if("top"===p)a=this.bottom-k,o=this._getXAxisLabelAlignment();else if("bottom"===p)a=this.top+k,o=this._getXAxisLabelAlignment();else if("left"===p){let t=this._getYAxisLabelAlignment(w);o=t.textAlign,r=t.x}else if("right"===p){let t=this._getYAxisLabelAlignment(w);o=t.textAlign,r=t.x}else if("x"===u){if("center"===p)a=(t.top+t.bottom)/2+M;else if(sP(p)){let t=Object.keys(p)[0],e=p[t];a=this.chart.scales[t].getPixelForValue(e)+M}o=this._getXAxisLabelAlignment()}else if("y"===u){if("center"===p)r=(t.left+t.right)/2-M;else if(sP(p)){let t=Object.keys(p)[0],e=p[t];r=this.chart.scales[t].getPixelForValue(e)}o=this._getYAxisLabelAlignment(w).textAlign}"y"===u&&("start"===b?A="top":"end"===b&&(A="bottom"));let P=this._getLabelSizes();for(e=0,i=_.length;e<i;++e){let t;s=_[e].label;let u=g.setContext(this.getContext(e));n=this.getPixelForTick(e)+g.labelOffset,h=(l=this._resolveTickFontOptions(e)).lineHeight;let f=(c=sA(s)?s.length:1)/2,b=u.color,v=u.textStrokeColor,w=u.textStrokeWidth,M=o;if(m?(r=n,"inner"===o&&(M=e===i-1?this.options.reverse?"left":"right":0===e?this.options.reverse?"right":"left":"center"),d="top"===p?"near"===y||0!==S?-c*h+h/2:"center"===y?-P.highest.height/2-f*h+h:-P.highest.height+h/2:"near"===y||0!==S?h/2:"center"===y?P.highest.height/2-f*h:P.highest.height-c*h,x&&(d*=-1),0===S||u.showLabelBackdrop||(r+=h/2*Math.sin(S))):(a=n,d=(1-c)*h/2),u.showLabelBackdrop){let s=r0(u.backdropPadding),r=P.heights[e],a=P.widths[e],n=d-s.top,l=0-s.left;switch(A){case"middle":n-=r/2;break;case"bottom":n-=r}switch(o){case"center":l-=a/2;break;case"right":l-=a;break;case"inner":e===i-1?l-=a:e>0&&(l-=a/2)}t={left:l,top:n,width:a+s.width,height:r+s.height,color:u.backdropColor}}$.push({label:s,font:l,textOffset:d,options:{rotation:S,color:b,strokeColor:v,strokeWidth:w,textAlign:M,textBaseline:A,translation:[r,a],backdrop:t}})}return $}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-s8(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){let e,i,{position:s,ticks:{crossAlign:r,mirror:a,padding:o}}=this.options,n=this._getLabelSizes(),l=t+o,h=n.widest.width;return"left"===s?a?(i=this.right+o,"near"===r?e="left":"center"===r?(e="center",i+=h/2):(e="right",i+=h)):(i=this.right-l,"near"===r?e="right":"center"===r?(e="center",i-=h/2):(e="left",i=this.left)):"right"===s?a?(i=this.left+o,"near"===r?e="right":"center"===r?(e="center",i-=h/2):(e="left",i-=h)):(i=this.left+l,"near"===r?e="left":"center"===r?(e="center",i+=h/2):(e="right",i=this.right)):e="right",{textAlign:e,x:i}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:s,width:r,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,r,a),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let i=this.ticks.findIndex(e=>e.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){let e,i,s=this.options.grid,r=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),o=(t,e,i)=>{i.width&&i.color&&(r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.setLineDash(i.borderDash||[]),r.lineDashOffset=i.borderDashOffset,r.beginPath(),r.moveTo(t.x,t.y),r.lineTo(e.x,e.y),r.stroke(),r.restore())};if(s.display)for(e=0,i=a.length;e<i;++e){let t=a[e];s.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),s.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){let t,e,i,s,{chart:r,ctx:a,options:{border:o,grid:n}}=this,l=o.setContext(this.getContext()),h=o.display?l.width:0;if(!h)return;let c=n.setContext(this.getContext(0)).lineWidth,d=this._borderValue;this.isHorizontal()?(t=rR(r,this.left,h)-h/2,e=rR(r,this.right,c)+c/2,i=s=d):(i=rR(r,this.top,h)-h/2,s=rR(r,this.bottom,c)+c/2,t=e=d),a.save(),a.lineWidth=l.width,a.strokeStyle=l.color,a.beginPath(),a.moveTo(t,i),a.lineTo(e,s),a.stroke(),a.restore()}drawLabels(t){if(!this.options.ticks.display)return;let e=this.ctx,i=this._computeLabelArea();for(let s of(i&&rN(e,i),this.getLabelItems(t))){let t=s.options,i=s.font;rq(e,s.label,0,s.textOffset,i,t)}i&&rH(e)}drawTitle(){let t,e,{ctx:i,options:{position:s,title:r,reverse:a}}=this;if(!r.display)return;let o=r1(r.font),n=r0(r.padding),l=r.align,h=o.lineHeight/2;"bottom"===s||"center"===s||sP(s)?(h+=n.bottom,sA(r.text)&&(h+=o.lineHeight*(r.text.length-1))):h+=n.top;let{titleX:c,titleY:d,maxWidth:u,rotation:f}=function(t,e,i,s){let r,a,o,{top:n,left:l,bottom:h,right:c,chart:d}=t,{chartArea:u,scales:f}=d,p=0,g=h-n,m=c-l;if(t.isHorizontal()){if(a=rm(s,l,c),sP(i)){let t=Object.keys(i)[0],s=i[t];o=f[t].getPixelForValue(s)+g-e}else o="center"===i?(u.bottom+u.top)/2+g-e:oC(t,i,e);r=c-l}else{if(sP(i)){let t=Object.keys(i)[0],s=i[t];a=f[t].getPixelForValue(s)-m+e}else a="center"===i?(u.left+u.right)/2-m+e:oC(t,i,e);o=rm(s,h,n),p="left"===i?-sQ:sQ}return{titleX:a,titleY:o,maxWidth:r,rotation:p}}(this,h,s,l);rq(i,r.text,0,0,o,{color:r.color,maxWidth:u,rotation:f,textAlign:(t=rg(l),(a&&"right"!==s||!a&&"right"===s)&&(t="left"===(e=t)?"right":"right"===e?"left":e),t),textBaseline:"middle",translation:[c,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=sO(t.grid&&t.grid.z,-1),s=sO(t.border&&t.border.z,0);return this._isVisible()&&this.draw===oL.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){let e,i,s=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",a=[];for(e=0,i=s.length;e<i;++e){let i=s[e];i[r]!==this.id||t&&i.type!==t||a.push(i)}return a}_resolveTickFontOptions(t){return r1(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class oz{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){var e,i,s,r,a,o;let n,l,h=Object.getPrototypeOf(t);"id"in(e=h)&&"defaults"in e&&(l=this.register(h));let c=this.items,d=t.id,u=this.scope+"."+d;if(!d)throw Error("class does not have id: "+t);return d in c||(c[d]=t,i=t,s=u,r=l,n=sj(Object.create(null),[r?rz.get(r):{},rz.get(s),i.defaults]),rz.set(s,n),i.defaultRoutes&&(a=s,Object.keys(o=i.defaultRoutes).forEach(t=>{let e=t.split("."),i=e.pop(),s=[a].concat(e).join("."),r=o[t].split("."),n=r.pop(),l=r.join(".");rz.route(s,i,l,n)})),i.descriptors&&rz.describe(s,i.descriptors),this.override&&rz.override(t.id,t.overrides)),u}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in rz[s]&&(delete(0,rz)[s][i],this.override&&delete(0,rO)[i])}}var oF=new class{constructor(){this.controllers=new oz(aX,"datasets",!0),this.elements=new oz(oA,"elements"),this.plugins=new oz(Object,"plugins"),this.scales=new oz(oL,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(e=>{let s=i||this._getRegistryForType(e);i||s.isForType(e)||s===this.plugins&&e.id?this._exec(t,s,e):sL(e,e=>{let s=i||this._getRegistryForType(e);this._exec(t,s,e)})})}_exec(t,e,i){let s=sB(t);sT(i["before"+s],[],i),e[t](i),sT(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let s=e.get(t);if(void 0===s)throw Error('"'+t+'" is not a registered '+i+".");return s}};class oR{constructor(){this._init=void 0}notify(t,e,i,s){if("beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),void 0===this._init)return;let r=s?this._descriptors(t).filter(s):this._descriptors(t),a=this._notify(r,t,e,i);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),a}_notify(t,e,i,s){for(let r of(s=s||{},t)){let t=r.plugin;if(!1===sT(t[i],[e,s,r.options],t)&&s.cancelable)return!1}return!0}invalidate(){s$(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,s=sO(i.options&&i.options.plugins,{}),r=function(t){let e={},i=[],s=Object.keys(oF.plugins.items);for(let t=0;t<s.length;t++)i.push(oF.getPlugin(s[t]));let r=t.plugins||[];for(let t=0;t<r.length;t++){let s=r[t];-1===i.indexOf(s)&&(i.push(s),e[s.id]=!0)}return{plugins:i,localIds:e}}(i);return!1!==s||e?function(t,{plugins:e,localIds:i},s,r){let a=[],o=t.getContext();for(let l of e){var n;let e=l.id,h=(n=s[e],r||!1!==n?!0===n?{}:n:null);null!==h&&a.push({plugin:l,options:function(t,{plugin:e,local:i},s,r){let a=t.pluginScopeKeys(e),o=t.getOptionScopes(s,a);return i&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}(t.config,{plugin:l,local:i[e]},h,o)})}return a}(t,r,s,e):[]}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,s=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function oI(t,e){let i=rz.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function oj(t){if("x"===t||"y"===t||"r"===t)return t}function oV(t,...e){if(oj(t))return t;for(let s of e){var i;let e=s.axis||("top"===(i=s.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.length>1&&oj(t[0].toLowerCase());if(e)return e}throw Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function oW(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function oN(t){let e,i,s,r,a=t.options||(t.options={});a.plugins=sO(a.plugins,{}),e=rO[t.type]||{scales:{}},i=a.scales||{},s=oI(t.type,a),r=Object.create(null),Object.keys(i).forEach(a=>{let o=i[a];if(!sP(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);let n=oV(a,o,function(t,e){if(e.data&&e.data.datasets){let i=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(i.length)return oW(t,"x",i[0])||oW(t,"y",i[0])}return{}}(a,t),rz.scales[o.type]),l=n===s?"_index_":"_value_",h=e.scales||{};r[a]=sV(Object.create(null),[{axis:n},o,h[n],h[l]])}),t.data.datasets.forEach(e=>{let s=e.type||t.type,o=e.indexAxis||oI(s,a),n=(rO[s]||{}).scales||{};Object.keys(n).forEach(t=>{let s,a=(s=t,"_index_"===t?s=o:"_value_"===t&&(s="x"===o?"y":"x"),s),l=e[a+"AxisID"]||a;r[l]=r[l]||Object.create(null),sV(r[l],[{axis:a},i[l],n[t]])})}),Object.keys(r).forEach(t=>{let e=r[t];sV(e,[rz.scales[e.type],rz.scale])}),a.scales=r}function oH(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}let oB=new Map,oU=new Set;function oq(t,e){let i=oB.get(t);return i||(i=e(),oB.set(t,i),oU.add(i)),i}let oX=(t,e,i)=>{let s=sH(e,i);void 0!==s&&t.add(s)};class oY{constructor(t){var e;this._config=((e=(e=t)||{}).data=oH(e.data),oN(e),e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=oH(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),oN(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return oq(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return oq(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return oq(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return oq(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){let{options:s,type:r}=this,a=this._cachedScopes(t,i),o=a.get(e);if(o)return o;let n=new Set;e.forEach(e=>{t&&(n.add(t),e.forEach(e=>oX(n,t,e))),e.forEach(t=>oX(n,s,t)),e.forEach(t=>oX(n,rO[r]||{},t)),e.forEach(t=>oX(n,rz,t)),e.forEach(t=>oX(n,rD,t))});let l=Array.from(n);return 0===l.length&&l.push(Object.create(null)),oU.has(e)&&a.set(e,l),l}chartOptionScopes(){let{options:t,type:e}=this;return[t,rO[e]||{},rz.datasets[e]||{},{type:e},rz,rD]}resolveNamedOptions(t,e,i,s=[""]){let r={$shared:!0},{resolver:a,subPrefixes:o}=oK(this._resolverCache,t,s),n=a;if(function(t,e){let{isScriptable:i,isIndexable:s}=r6(t);for(let r of e){let e=i(r),a=s(r),o=(a||e)&&t[r];if(e&&(sq(o)||oJ(o))||a&&sA(o))return!0}return!1}(a,e)){r.$shared=!1,i=sq(i)?i():i;let e=this.createResolver(t,i,o);n=r3(a,i,e)}for(let t of e)r[t]=n[t];return r}createResolver(t,e,i=[""],s){let{resolver:r}=oK(this._resolverCache,t,i);return sP(e)?r3(r,e,void 0,s):r}}function oK(t,e,i){let s=t.get(e);s||(s=new Map,t.set(e,s));let r=i.join(),a=s.get(r);return a||(a={resolver:r4(e,i),subPrefixes:i.filter(t=>!t.toLowerCase().includes("hover"))},s.set(r,a)),a}let oJ=t=>sP(t)&&Object.getOwnPropertyNames(t).some(e=>sq(t[e])),oG=["top","bottom","left","right","chartArea"];function oZ(t,e){return"top"===t||"bottom"===t||-1===oG.indexOf(t)&&"x"===e}function oQ(t,e){return function(i,s){return i[t]===s[t]?i[e]-s[e]:i[t]-s[t]}}function o0(t){let e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),sT(i&&i.onComplete,[t],e)}function o1(t){let e=t.chart,i=e.options.animation;sT(i&&i.onProgress,[t],e)}function o2(t){return ac()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}let o5={},o4=t=>{let e=o2(t);return Object.values(o5).filter(t=>t.canvas===e).pop()};class o3{static defaults=rz;static instances=o5;static overrides=rO;static registry=oF;static version="4.5.1";static getChart=o4;static register(...t){oF.add(...t),o6()}static unregister(...t){oF.remove(...t),o6()}constructor(t,e){var i,s;let r,a=this.config=new oY(e),o=o2(t),n=o4(o);if(n)throw Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");let l=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||(!ac()||"u">typeof OffscreenCanvas&&o instanceof OffscreenCanvas?ou:o$)),this.platform.updateConfig(a);let h=this.platform.acquireContext(o,l.aspectRatio),c=h&&h.canvas,d=c&&c.height,u=c&&c.width;if(this.id=sS(),this.ctx=h,this.canvas=c,this.width=u,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new oR,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=(i=t=>this.update(t),s=l.resizeDelay||0,function(...t){return s?(clearTimeout(r),r=setTimeout(i,s,t)):i.apply(this,t),s}),this._dataChanges=[],o5[this.id]=this,!h||!c)return void console.error("Failed to create chart: can't acquire context from the given item");aD.listen(this,"complete",o0),aD.listen(this,"progress",o1),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:r}=this;return s$(t)?e&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return oF}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ab(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rI(this.canvas,this.ctx),this}stop(){return aD.stop(this),this}resize(t,e){aD.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,e,r),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),n=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,ab(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),sT(i.onResize,[this,a],this),this.attached&&this._doResize(n)&&this.render())}ensureScalesHaveIDs(){sL(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){let t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((t,e)=>(t[e]=!1,t),{}),r=[];e&&(r=r.concat(Object.keys(e).map(t=>{let i=e[t],s=oV(t,i),r="r"===s,a="x"===s;return{options:i,dposition:r?"chartArea":a?"bottom":"left",dtype:r?"radialLinear":a?"category":"linear"}}))),sL(r,e=>{let r=e.options,a=r.id,o=oV(a,r),n=sO(r.type,e.dtype);(void 0===r.position||oZ(r.position,o)!==oZ(e.dposition))&&(r.position=e.dposition),s[a]=!0;let l=null;a in i&&i[a].type===n?l=i[a]:i[(l=new(oF.getScale(n))({id:a,type:n,ctx:this.ctx,chart:this})).id]=l,l.init(r,t)}),sL(s,(t,e)=>{t||delete i[e]}),sL(i,t=>{oc.configure(this,t,t.options),oc.addBox(this,t)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((t,e)=>t.index-e.index),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(oQ("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,i)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){let t,e,i=[],s=this.data.datasets;for(this._removeUnreferencedMetasets(),t=0,e=s.length;t<e;t++){let e=s[t],r=this.getDatasetMeta(t),a=e.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(t),r=this.getDatasetMeta(t)),r.type=a,r.indexAxis=e.indexAxis||oI(a,this.options),r.order=e.order||0,r.index=t,r.label=""+e.label,r.visible=this.isDatasetVisible(t),r.controller)r.controller.updateIndex(t),r.controller.linkScales();else{let e=oF.getController(a),{datasetElementType:s,dataElementType:o}=rz.datasets[a];Object.assign(e,{dataElementType:oF.getElement(o),datasetElementType:s&&oF.getElement(s)}),r.controller=new e(this,t),i.push(r.controller)}}return this._updateMetasets(),i}_resetElements(){sL(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;let r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let t=0,e=this.data.datasets.length;t<e;t++){let{controller:e}=this.getDatasetMeta(t),i=!s&&-1===r.indexOf(e);e.buildOrUpdateElements(i),a=Math.max(+e.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||sL(r,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(oQ("z","_idx"));let{_active:o,_lastEvent:n}=this;n?this._eventHandler(n,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){sL(this.scales,t=>{oc.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options;sX(new Set(Object.keys(this._listeners)),new Set(t.events))&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this;for(let{method:i,start:s,count:r}of this._getUniformDataChanges()||[]){var e="_removeElements"===i?-r:r;for(let i of Object.keys(t)){let r=+i;if(r>=s){let a=t[i];delete t[i],(e>0||r>s)&&(t[r+e]=a)}}}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,i=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),s=i(0);for(let t=1;t<e;t++)if(!sX(s,i(t)))return;return Array.from(s).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;oc.update(this,this.width,this.height,t);let e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],sL(this.boxes,t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,sq(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(aD.has(this)?this.attached&&!aD.running(this)&&aD.start(this):(this.draw(),o0({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e,i,s=this._sortedMetasets,r=[];for(e=0,i=s.length;e<i;++e){let i=s[e];(!t||i.visible)&&r.push(i)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=aO(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(s&&rN(e,s),t.controller.draw(),s&&rH(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return rW(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){let r=ot.modes[e];return"function"==typeof r?r(this,t,i,s):[]}getDatasetMeta(t){let e=this.data.datasets[t],i=this._metasets,s=i.filter(t=>t&&t._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=r5(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){let s=i?"show":"hide",r=this.getDatasetMeta(t),a=r.controller._resolveAnimations(void 0,s);sU(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(r,{visible:i}),this.update(e=>e.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),aD.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),rI(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete o5[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};sL(this.options.events,t=>i(t,s))}bindResponsiveEvents(){let t;this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,i=this.platform,s=(t,s)=>{i.addEventListener(this,t,s),e[t]=s},r=(t,s)=>{e[t]&&(i.removeEventListener(this,t,s),delete e[t])},a=(t,e)=>{this.canvas&&this.resize(t,e)},o=()=>{r("attach",o),this.attached=!0,this.resize(),s("resize",a),s("detach",t)};t=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),s("attach",o)},i.isAttached(this.canvas)?o():t()}unbindEvents(){sL(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},sL(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){let s,r,a,o=i?"set":"remove";for("dataset"===e&&this.getDatasetMeta(t[0].datasetIndex).controller["_"+o+"DatasetHoverStyle"](),r=0,a=t.length;r<a;++r){let e=(s=t[r])&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[o+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],i=t.map(({datasetIndex:t,index:e})=>{let i=this.getDatasetMeta(t);if(!i)throw Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}});sz(i,e)||(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,i){let s=this.options.hover,r=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),a=r(e,t),o=i?t:r(t,e);a.length&&this.updateHoverStyle(a,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(t,e){let i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;let r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){var s;let{_active:r=[],options:a}=this,o=this._getActiveElements(t,r,i,e),n="mouseup"===t.type||"click"===t.type||"contextmenu"===t.type,l=(s=this._lastEvent,i&&"mouseout"!==t.type?n?s:t:null);i&&(this._lastEvent=null,sT(a.onHover,[t,o,this],this),n&&sT(a.onClick,[t,o,this],this));let h=!sz(o,r);return(h||e)&&(this._active=o,this._updateHoverStyles(o,r,e)),this._lastEvent=l,h}_getActiveElements(t,e,i,s){if("mouseout"===t.type)return[];if(!i)return e;let r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}}function o6(){return sL(o3.instances,t=>t._plugins.invalidate())}function o9(t,e,i,s){return{x:i+t*Math.cos(e),y:s+t*Math.sin(e)}}function o8(t,e,i,s,r,a){var o,n,l,h;let c,d,u,f,{x:p,y:g,startAngle:m,pixelMargin:_,innerRadius:b}=e,y=Math.max(e.outerRadius+s+i-_,0),v=b>0?b+s+i+_:0,x=0,w=r-m;if(s){let t=y>0?y-s:0,e=((b>0?b-s:0)+t)/2;x=(w-(0!==e?w*e/(e+s):w))/2}let M=Math.max(.001,w*y-i/sY)/y,k=(w-M)/2,S=m+k+x,$=r-k-x,{outerStart:A,outerEnd:P,innerStart:C,innerEnd:E}=(o=e,n=v,l=y,h=$-S,c=rG(o.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),u=Math.min(d=(l-n)/2,h*n/2),{outerStart:(f=t=>{let e=(l-Math.min(d,t))*h/2;return ra(t,0,Math.min(d,e))})(c.outerStart),outerEnd:f(c.outerEnd),innerStart:ra(c.innerStart,0,u),innerEnd:ra(c.innerEnd,0,u)}),O=y-A,D=y-P,T=S+A/O,L=$-P/D,z=v+C,F=v+E,R=S+C/z,I=$-E/F;if(t.beginPath(),a){let e=(T+L)/2;if(t.arc(p,g,y,T,e),t.arc(p,g,y,e,L),P>0){let e=o9(D,L,p,g);t.arc(e.x,e.y,P,L,$+sQ)}let i=o9(F,$,p,g);if(t.lineTo(i.x,i.y),E>0){let e=o9(F,I,p,g);t.arc(e.x,e.y,E,$+sQ,I+Math.PI)}let s=($-E/v+(S+C/v))/2;if(t.arc(p,g,v,$-E/v,s,!0),t.arc(p,g,v,s,S+C/v,!0),C>0){let e=o9(z,R,p,g);t.arc(e.x,e.y,C,R+Math.PI,S-sQ)}let r=o9(O,S,p,g);if(t.lineTo(r.x,r.y),A>0){let e=o9(O,T,p,g);t.arc(e.x,e.y,A,S-sQ,T)}}else{t.moveTo(p,g);let e=Math.cos(T)*y+p,i=Math.sin(T)*y+g;t.lineTo(e,i);let s=Math.cos(L)*y+p,r=Math.sin(L)*y+g;t.lineTo(s,r)}t.closePath()}class o7 extends oA{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let{angle:s,distance:r}=rt(this.getProps(["x","y"],i),{x:t,y:e}),{startAngle:a,endAngle:o,innerRadius:n,outerRadius:l,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),c=(this.options.spacing+this.options.borderWidth)/2,d=sO(h,o-a),u=rr(s,a,o)&&a!==o,f=d>=sK||u,p=ro(r,n+c,l+c);return f&&p}getCenterPoint(t){let{x:e,y:i,startAngle:s,endAngle:r,innerRadius:a,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:n,spacing:l}=this.options,h=(s+r)/2,c=(a+o+l+n)/2;return{x:e+Math.cos(h)*c,y:i+Math.sin(h)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,s=(e.offset||0)/4,r=(e.spacing||0)/2,a=e.circular;if(this.pixelMargin=.33*("inner"===e.borderAlign),this.fullCircles=i>sK?Math.floor(i/sK):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();let o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*s,Math.sin(o)*s);let n=s*(1-Math.sin(Math.min(sY,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,i,s,r){let{fullCircles:a,startAngle:o,circumference:n}=e,l=e.endAngle;if(a){o8(t,e,i,s,l,r);for(let e=0;e<a;++e)t.fill();isNaN(n)||(l=o+(n%sK||sK))}o8(t,e,i,s,l,r),t.fill()}(t,this,n,r,a),function(t,e,i,s,r){let{fullCircles:a,startAngle:o,circumference:n,options:l}=e,{borderWidth:h,borderJoinStyle:c,borderDash:d,borderDashOffset:u,borderRadius:f}=l,p="inner"===l.borderAlign;if(!h)return;t.setLineDash(d||[]),t.lineDashOffset=u,p?(t.lineWidth=2*h,t.lineJoin=c||"round"):(t.lineWidth=h,t.lineJoin=c||"bevel");let g=e.endAngle;if(a){o8(t,e,i,s,g,r);for(let e=0;e<a;++e)t.stroke();isNaN(n)||(g=o+(n%sK||sK))}p&&function(t,e,i){let{startAngle:s,pixelMargin:r,x:a,y:o,outerRadius:n,innerRadius:l}=e,h=r/n;t.beginPath(),t.arc(a,o,n,s-h,i+h),l>r?(h=r/l,t.arc(a,o,l,i+h,s-h,!0)):t.arc(a,o,r,i+sQ,s-sQ),t.closePath(),t.clip()}(t,e,g),l.selfJoin&&g-o>=sY&&0===f&&"miter"!==c&&function(t,e,i){let{startAngle:s,x:r,y:a,outerRadius:o,innerRadius:n,options:l}=e,{borderWidth:h,borderJoinStyle:c}=l,d=Math.min(h/o,rs(s-i));if(t.beginPath(),t.arc(r,a,o-h/2,s+d/2,i-d/2),n>0){let e=Math.min(h/n,rs(s-i));t.arc(r,a,n+h/2,i-e/2,s+e/2,!0)}else{let e=Math.min(h/2,o*rs(s-i));if("round"===c)t.arc(r,a,e,i-sY/2,s+sY/2,!0);else if("bevel"===c){let o=2*e*e,n=-o*Math.cos(i+sY/2)+r,l=-o*Math.sin(i+sY/2)+a,h=o*Math.cos(s+sY/2)+r,c=o*Math.sin(s+sY/2)+a;t.lineTo(n,l),t.lineTo(h,c)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,g),a||(o8(t,e,i,s,g,r),t.stroke())}(t,this,n,r,a),t.restore()}}function nt(t,e,i=e){t.lineCap=sO(i.borderCapStyle,e.borderCapStyle),t.setLineDash(sO(i.borderDash,e.borderDash)),t.lineDashOffset=sO(i.borderDashOffset,e.borderDashOffset),t.lineJoin=sO(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=sO(i.borderWidth,e.borderWidth),t.strokeStyle=sO(i.borderColor,e.borderColor)}function ne(t,e,i){t.lineTo(i.x,i.y)}function ni(t,e,i={}){let s=t.length,{start:r=0,end:a=s-1}=i,{start:o,end:n}=e,l=Math.max(r,o),h=Math.min(a,n);return{count:s,start:l,loop:e.loop,ilen:h<l&&!(r<o&&a<o||r>n&&a>n)?s+h-l:h-l}}function ns(t,e,i,s){let r,a,o,{points:n,options:l}=e,{count:h,start:c,loop:d,ilen:u}=ni(n,i,s),f=l.stepped?rB:l.tension||"monotone"===l.cubicInterpolationMode?rU:ne,{move:p=!0,reverse:g}=s||{};for(r=0;r<=u;++r)(a=n[(c+(g?u-r:r))%h]).skip||(p?(t.moveTo(a.x,a.y),p=!1):f(t,o,a,g,l.stepped),o=a);return d&&f(t,o,a=n[(c+(g?u:0))%h],g,l.stepped),!!d}function nr(t,e,i,s){let r,a,o,n,l,h,c=e.points,{count:d,start:u,ilen:f}=ni(c,i,s),{move:p=!0,reverse:g}=s||{},m=0,_=0,b=t=>(u+(g?f-t:t))%d,y=()=>{n!==l&&(t.lineTo(m,l),t.lineTo(m,n),t.lineTo(m,h))};for(p&&(a=c[b(0)],t.moveTo(a.x,a.y)),r=0;r<=f;++r){if((a=c[b(r)]).skip)continue;let e=a.x,i=a.y,s=0|e;s===o?(i<n?n=i:i>l&&(l=i),m=(_*m+e)/++_):(y(),t.lineTo(e,i),o=s,_=0,n=l=i),h=i}y()}function na(t){let e=t.options,i=e.borderDash&&e.borderDash.length;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i?ns:nr}let no="function"==typeof Path2D;class nn extends oA{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){let i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;!function(t,e,i,s,r){let a,o,n,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)!function(t,e="x"){let i,s,r,a=al(e),o=t.length,n=Array(o).fill(0),l=Array(o),h=an(t,0);for(i=0;i<o;++i)if(s=r,r=h,h=an(t,i+1),r){if(h){let t=h[e]-r[e];n[i]=0!==t?(h[a]-r[a])/t:0}l[i]=s?h?s5(n[i-1])!==s5(n[i])?0:(n[i-1]+n[i])/2:n[i-1]:n[i]}!function(t,e,i){let s,r,a,o,n,l=t.length,h=an(t,0);for(let c=0;c<l-1;++c)if(n=h,h=an(t,c+1),n&&h){if(s4(e[c],0,ao)){i[c]=i[c+1]=0;continue}(o=Math.pow(s=i[c]/e[c],2)+Math.pow(r=i[c+1]/e[c],2))<=9||(a=3/Math.sqrt(o),i[c]=s*a*e[c],i[c+1]=r*a*e[c])}}(t,n,l),function(t,e,i="x"){let s,r,a,o=al(i),n=t.length,l=an(t,0);for(let h=0;h<n;++h){if(r=a,a=l,l=an(t,h+1),!a)continue;let n=a[i],c=a[o];r&&(s=(n-r[i])/3,a[`cp1${i}`]=n-s,a[`cp1${o}`]=c-s*e[h]),l&&(s=(l[i]-n)/3,a[`cp2${i}`]=n+s,a[`cp2${o}`]=c+s*e[h])}}(t,l,e)}(t,r);else{let i=s?t[t.length-1]:t[0];for(a=0,o=t.length;a<o;++a)l=function(t,e,i,s){let r=t.skip?e:t,a=i.skip?e:i,o=re(e,r),n=re(a,e),l=o/(o+n),h=n/(o+n);l=isNaN(l)?0:l,h=isNaN(h)?0:h;let c=s*l,d=s*h;return{previous:{x:e.x-c*(a.x-r.x),y:e.y-c*(a.y-r.y)},next:{x:e.x+d*(a.x-r.x),y:e.y+d*(a.y-r.y)}}}(i,n=t[a],t[Math.min(a+1,o-!s)%o],e.tension),n.cp1x=l.previous.x,n.cp1y=l.previous.y,n.cp2x=l.next.x,n.cp2y=l.next.y,i=n}e.capBezierPoints&&function(t,e){let i,s,r,a,o,n=rW(t[0],e);for(i=0,s=t.length;i<s;++i)o=a,a=n,n=i<s-1&&rW(t[i+1],e),a&&(r=t[i],o&&(r.cp1x=ah(r.cp1x,e.left,e.right),r.cp1y=ah(r.cp1y,e.top,e.bottom)),n&&(r.cp2x=ah(r.cp2x,e.left,e.right),r.cp2y=ah(r.cp2y,e.top,e.bottom)))}(t,i)}(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){let i=t.points,s=t.options.spanGaps,r=i.length;if(!r)return[];let a=!!t._loop,{start:o,end:n}=function(t,e,i,s){let r=0,a=e-1;if(i&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,i&&(a+=r);a>r&&t[a%e].skip;)a--;return{start:r,end:a%=e}}(i,r,a,s);if(!0===s)return aP(t,[{start:o,end:n,loop:a}],i,e);let l=n<o?n+r:n,h=!!t._fullLoop&&0===o&&n===r-1;return aP(t,function(t,e,i,s){let r,a=t.length,o=[],n=e,l=t[e];for(r=e+1;r<=i;++r){let i=t[r%a];i.skip||i.stop?l.skip||(s=!1,o.push({start:e%a,end:(r-1)%a,loop:s}),e=n=i.stop?r:null):(n=r,l.skip&&(e=r)),l=i}return null!==n&&o.push({start:e%a,end:n%a,loop:s}),o}(i,o,l,h),i,e)}(this,this.options.segment))}first(){let t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){let t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){let i,s,r=this.options,a=t[e],o=this.points,n=aA(this,{property:e,start:a,end:a});if(!n.length)return;let l=[],h=r.stepped?aw:r.tension||"monotone"===r.cubicInterpolationMode?aM:ax;for(i=0,s=n.length;i<s;++i){let{start:s,end:c}=n[i],d=o[s],u=o[c];if(d===u){l.push(d);continue}let f=Math.abs((a-d[e])/(u[e]-d[e])),p=h(d,u,f,r.stepped);p[e]=t[e],l.push(p)}return 1===l.length?l[0]:l}pathSegment(t,e,i){return na(this)(t,this,e,i)}path(t,e,i){let s=this.segments,r=na(this),a=this._loop;for(let o of(e=e||0,i=i||this.points.length-e,s))a&=r(t,this,o,{start:e,end:e+i-1});return!!a}draw(t,e,i,s){let r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),function(t,e,i,s){if(no&&!e.options.segment){let r;(r=e._path)||(r=e._path=new Path2D,e.path(r,i,s)&&r.closePath()),nt(t,e.options),t.stroke(r)}else!function(t,e,i,s){let{segments:r,options:a}=e,o=na(e);for(let n of r)nt(t,a,n.style),t.beginPath(),o(t,e,n,{start:i,end:i+s-1})&&t.closePath(),t.stroke()}(t,e,i,s)}(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function nl(t,e,i,s){let r=t.options,{[i]:a}=t.getProps([i],s);return Math.abs(e-a)<r.radius+r.hitRadius}class nh extends oA{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){let s=this.options,{x:r,y:a}=this.getProps(["x","y"],i);return Math.pow(t-r,2)+Math.pow(e-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return nl(this,t,"x",e)}inYRange(t,e){return nl(this,t,"y",e)}getCenterPoint(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0,i=(e=Math.max(e,e&&t.hoverRadius||0))&&t.borderWidth||0;return(e+i)*2}draw(t,e){let i=this.options;!this.skip&&!(i.radius<.1)&&rW(this,e,this.size(i)/2)&&(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,rj(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}function nc(t,e){let i,s,r,a,o,{x:n,y:l,base:h,width:c,height:d}=t.getProps(["x","y","base","width","height"],e);return t.horizontal?(o=d/2,i=Math.min(n,h),s=Math.max(n,h),r=l-o,a=l+o):(i=n-(o=c/2),s=n+o,r=Math.min(l,h),a=Math.max(l,h)),{left:i,top:r,right:s,bottom:a}}function nd(t,e,i,s){return t?0:ra(e,i,s)}function nu(t,e,i,s){let r=null===e,a=null===i,o=t&&!(r&&a)&&nc(t,s);return o&&(r||ro(e,o.left,o.right))&&(a||ro(i,o.top,o.bottom))}function nf(t,e){t.rect(e.x,e.y,e.w,e.h)}function np(t,e,i={}){let s=t.x!==i.x?-e:0,r=t.y!==i.y?-e:0,a=(t.x+t.w!==i.x+i.w?e:0)-s,o=(t.y+t.h!==i.y+i.h?e:0)-r;return{x:t.x+s,y:t.y+r,w:t.w+a,h:t.h+o,radius:t.radius}}class ng extends oA{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){var e,i,s;let r,a,o,n,l,h,c,d,{inflateAmount:u,options:{borderColor:f,backgroundColor:p}}=this,{inner:g,outer:m}=(a=(r=nc(this)).right-r.left,o=r.bottom-r.top,e=a/2,i=o/2,n=this.options.borderWidth,l=this.borderSkipped,h=rZ(n),c={t:nd(l.top,h.top,0,i),r:nd(l.right,h.right,0,e),b:nd(l.bottom,h.bottom,0,i),l:nd(l.left,h.left,0,e)},d=function(t,e,i){let{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,a=rQ(r),o=Math.min(e,i),n=t.borderSkipped,l=s||sP(r);return{topLeft:nd(!l||n.top||n.left,a.topLeft,0,o),topRight:nd(!l||n.top||n.right,a.topRight,0,o),bottomLeft:nd(!l||n.bottom||n.left,a.bottomLeft,0,o),bottomRight:nd(!l||n.bottom||n.right,a.bottomRight,0,o)}}(this,a/2,o/2),{outer:{x:r.left,y:r.top,w:a,h:o,radius:d},inner:{x:r.left+c.l,y:r.top+c.t,w:a-c.l-c.r,h:o-c.t-c.b,radius:{topLeft:Math.max(0,d.topLeft-Math.max(c.t,c.l)),topRight:Math.max(0,d.topRight-Math.max(c.t,c.r)),bottomLeft:Math.max(0,d.bottomLeft-Math.max(c.b,c.l)),bottomRight:Math.max(0,d.bottomRight-Math.max(c.b,c.r))}}}),_=(s=m.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?rX:nf;t.save(),(m.w!==g.w||m.h!==g.h)&&(t.beginPath(),_(t,np(m,u,g)),t.clip(),_(t,np(g,-u,m)),t.fillStyle=f,t.fill("evenodd")),t.beginPath(),_(t,np(g,u)),t.fillStyle=p,t.fill(),t.restore()}inRange(t,e,i){return nu(this,t,e,i)}inXRange(t,e){return nu(this,t,null,e)}inYRange(t,e){return nu(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+s)/2:e,y:r?i:(i+s)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}let nm=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],n_=nm.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));new WeakMap;function nb(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function ny(t,e,{horizontal:i,minRotation:s}){let r=s8(s),a=(i?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}class nv extends oL{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return s$(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:s,max:r}=this,a=t=>s=e?s:t,o=t=>r=i?r:t;if(t){let t=s5(s),e=s5(r);t<0&&e<0?o(0):t>0&&e>0&&a(0)}if(s===r){let e=0===r?1:Math.abs(.05*r);o(r+e),t||a(s-e)}this.min=s,this.max=r}getTickLimit(){let t,{maxTicksLimit:e,stepSize:i}=this.options.ticks;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1)>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3):(t=this.computeTickLimit(),e=e||11),e&&(t=Math.min(e,t)),t}computeTickLimit(){return 1/0}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit(),s=function(t,e){var i,s;let r,a,o,n,l,h=[],{bounds:c,step:d,min:u,max:f,precision:p,count:g,maxTicks:m,maxDigits:_,includeBounds:b}=t,y=d||1,v=m-1,{min:x,max:w}=e,M=!s$(u),k=!s$(f),S=!s$(g),$=(w-x)/(_+1),A=s3((w-x)/v/y)*y;if(A<1e-14&&!M&&!k)return[{value:x},{value:w}];(n=Math.ceil(w/A)-Math.floor(x/A))>v&&(A=s3(n*A/v/y)*y),s$(p)||(A=Math.ceil(A*(r=Math.pow(10,p)))/r),"ticks"===c?(a=Math.floor(x/A)*A,o=Math.ceil(w/A)*A):(a=x,o=w),M&&k&&d&&(i=(f-u)/d,s=A/1e3,(l=Math.round(i))-s<=i&&l+s>=i)?(n=Math.round(Math.min((f-u)/A,m)),A=(f-u)/n,a=u,o=f):S?(a=M?u:a,A=((o=k?f:o)-a)/(n=g-1)):n=s4(n=(o-a)/A,Math.round(n),A/1e3)?Math.round(n):Math.ceil(n);let P=Math.max(s7(A),s7(a));a=Math.round(a*(r=Math.pow(10,s$(p)?P:p)))/r,o=Math.round(o*r)/r;let C=0;for(M&&(b&&a!==u?(h.push({value:u}),a<u&&C++,s4(Math.round((a+C*A)*r)/r,u,ny(u,$,t))&&C++):a<u&&C++);C<n;++C){let t=Math.round((a+C*A)*r)/r;if(k&&t>f)break;h.push({value:t})}return k&&b&&o!==f?h.length&&s4(h[h.length-1].value,f,ny(f,$,t))?h[h.length-1].value=f:h.push({value:f}):k&&o!==f||h.push({value:o}),h}({maxTicks:i=Math.max(2,i),bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&s9(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return rC(t,this.chart.options.locale,this.options.ticks.format)}}class nx extends nv{static id="linear";static defaults={ticks:{callback:rE.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=sC(t)?t:0,this.max=sC(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=s8(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001;return Math.ceil(e/Math.min(40,this._resolveTickFontOptions(0).lineHeight/s))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}let nw=t=>Math.floor(s2(t)),nM=(t,e)=>Math.pow(10,nw(t)+e);function nk(t){return 1==t/Math.pow(10,nw(t))}function nS(t,e,i){let s=Math.pow(10,i),r=Math.floor(t/s);return Math.ceil(e/s)-r}class n$ extends oL{static id="logarithmic";static defaults={ticks:{callback:rE.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=nv.prototype.parse.apply(this,[t,e]);if(0===i){this._zero=!0;return}return sC(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=sC(t)?Math.max(0,t):null,this.max=sC(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!sC(this._userMin)&&(this.min=t===nM(this.min,0)?nM(this.min,-1):nM(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,s=this.max,r=e=>i=t?i:e,a=t=>s=e?s:t;i===s&&(i<=0?(r(1),a(10)):(r(nM(i,-1)),a(nM(s,1)))),i<=0&&r(nM(s,-1)),s<=0&&a(nM(i,1)),this.min=i,this.max=s}buildTicks(){let t=this.options,e=function(t,{min:e,max:i}){e=sE(t.min,e);let s=[],r=nw(e),a=function(t,e){let i=nw(e-t);for(;nS(t,e,i)>10;)i++;for(;10>nS(t,e,i);)i--;return Math.min(i,nw(t))}(e,i),o=a<0?Math.pow(10,Math.abs(a)):1,n=Math.pow(10,a),l=r>a?Math.pow(10,r):0,h=Math.round((e-l)*o)/o,c=Math.floor((e-l)/n/10)*n*10,d=Math.floor((h-c)/Math.pow(10,a)),u=sE(t.min,Math.round((l+c+d*Math.pow(10,a))*o)/o);for(;u<i;)s.push({value:u,major:nk(u),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(d=2,o=++a>=0?1:o),u=Math.round((l+c+d*Math.pow(10,a))*o)/o;let f=sE(t.max,u);return s.push({value:f,major:nk(f),significand:d}),s}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&s9(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":rC(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=s2(t),this._valueRange=s2(this.max)-s2(t)}getPixelForValue(t){return((void 0===t||0===t)&&(t=this.min),null===t||isNaN(t))?NaN:this.getPixelForDecimal(t===this.min?0:(s2(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function nA(t){let e=t.ticks;if(e.display&&t.display){let t=r0(e.backdropPadding);return sO(e.font&&e.font.size,rz.font.size)+t.height}return 0}function nP(t,e,i,s,r){return t===s||t===r?{start:e-i/2,end:e+i/2}:t<s||t>r?{start:e-i,end:e}:{start:e,end:e+i}}function nC(t,e,i,s){let{ctx:r}=t;if(i)r.arc(t.xCenter,t.yCenter,e,0,sK);else{let i=t.getPointPosition(0,e);r.moveTo(i.x,i.y);for(let a=1;a<s;a++)i=t.getPointPosition(a,e),r.lineTo(i.x,i.y)}}class nE extends nv{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:rE.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=r0(nA(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=sC(t)&&!isNaN(t)?t:0,this.max=sC(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/nA(this.options))}generateTickLabels(t){nv.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{let i=sT(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){let t=this.options;t.display&&t.pointLabels.display?function(t){let e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),s=[],r=[],a=t._pointLabels.length,o=t.options.pointLabels,n=o.centerPointLabels?sY/a:0;for(let c=0;c<a;c++){var l,h;let a=o.setContext(t.getPointLabelContext(c));r[c]=a.padding;let d=t.getPointPosition(c,t.drawingArea+r[c],n),u=r1(a.font),f=(l=t.ctx,h=sA(h=t._pointLabels[c])?h:[h],{w:function(t,e,i,s){let r,a,o,n,l,h=(s=s||{}).data=s.data||{},c=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(h=s.data={},c=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let d=0,u=i.length;for(r=0;r<u;r++)if(null==(n=i[r])||sA(n)){if(sA(n))for(a=0,o=n.length;a<o;a++)null==(l=n[a])||sA(l)||(d=rF(t,h,c,d,l))}else d=rF(t,h,c,d,n);t.restore();let f=c.length/2;if(f>i.length){for(r=0;r<f;r++)delete h[c[r]];c.splice(0,f)}return d}(l,u.string,h),h:h.length*u.lineHeight});s[c]=f;let p=rs(t.getIndexAngle(c)+n),g=Math.round(180/sY*p);!function(t,e,i,s,r){let a=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i)),n=0,l=0;s.start<e.l?(n=(e.l-s.start)/a,t.l=Math.min(t.l,e.l-n)):s.end>e.r&&(n=(s.end-e.r)/a,t.r=Math.max(t.r,e.r+n)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}(i,e,p,nP(g,d.x,f.w,0,180),nP(g,d.y,f.h,90,270))}t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){let s,r=[],a=t._pointLabels.length,o=t.options,{centerPointLabels:n,display:l}=o.pointLabels,h={extra:nA(o)/2,additionalAngle:n?sY/a:0};for(let o=0;o<a;o++){h.padding=i[o],h.size=e[o];let a=function(t,e,i){var s,r,a,o,n,l,h;let c=t.drawingArea,{extra:d,additionalAngle:u,padding:f,size:p}=i,g=t.getPointPosition(e,c+d+f,u),m=Math.round(180/sY*rs(g.angle+sQ)),_=(s=g.y,r=p.h,90===(a=m)||270===a?s-=r/2:(a>270||a<90)&&(s-=r),s),b=0===(o=m)||180===o?"center":o<180?"left":"right",y=(n=g.x,l=p.w,"right"===(h=b)?n-=l:"center"===h&&(n-=l/2),n);return{visible:!0,x:g.x,y:_,textAlign:b,left:y,top:_,right:y+p.w,bottom:_+p.h}}(t,o,h);r.push(a),"auto"===l&&(a.visible=function(t,e){if(!e)return!0;let{left:i,top:s,right:r,bottom:a}=t;return!(rW({x:i,y:s},e)||rW({x:i,y:a},e)||rW({x:r,y:s},e)||rW({x:r,y:a},e))}(a,s),a.visible&&(s=a))}return r}(t,s,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){return rs(t*(sK/(this._pointLabels.length||1))+s8(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(s$(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(s$(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let i=e[t];return r5(this.getContext(),{label:i,index:t,type:"pointLabel"})}}getPointPosition(t,e,i=0){let s=this.getIndexAngle(t)-sQ+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:s,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:r}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),nC(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t,e,i,s=this.ctx,r=this.options,{angleLines:a,grid:o,border:n}=r,l=this._pointLabels.length;if(r.pointLabels.display&&function(t,e){let{ctx:i,options:{pointLabels:s}}=t;for(let r=e-1;r>=0;r--){let e=t._pointLabelItems[r];if(!e.visible)continue;let a=s.setContext(t.getPointLabelContext(r));!function(t,e,i){let{left:s,top:r,right:a,bottom:o}=i,{backdropColor:n}=e;if(!s$(n)){let i=rQ(e.borderRadius),l=r0(e.backdropPadding);t.fillStyle=n;let h=s-l.left,c=r-l.top,d=a-s+l.width,u=o-r+l.height;Object.values(i).some(t=>0!==t)?(t.beginPath(),rX(t,{x:h,y:c,w:d,h:u,radius:i}),t.fill()):t.fillRect(h,c,d,u)}}(i,a,e);let o=r1(a.font),{x:n,y:l,textAlign:h}=e;rq(i,t._pointLabels[r],n,l+o.lineHeight/2,o,{color:a.color,textAlign:h,textBaseline:"middle"})}}(this,l),o.display&&this.ticks.forEach((t,i)=>{if(0!==i||0===i&&this.min<0){e=this.getDistanceFromCenterForValue(t.value);let s=this.getContext(i),r=o.setContext(s),a=n.setContext(s);!function(t,e,i,s,r){let a=t.ctx,o=e.circular,{color:n,lineWidth:l}=e;(o||s)&&n&&l&&!(i<0)&&(a.save(),a.strokeStyle=n,a.lineWidth=l,a.setLineDash(r.dash||[]),a.lineDashOffset=r.dashOffset,a.beginPath(),nC(t,i,o,s),a.closePath(),a.stroke(),a.restore())}(this,r,e,l,a)}}),a.display){for(s.save(),t=l-1;t>=0;t--){let o=a.setContext(this.getPointLabelContext(t)),{color:n,lineWidth:l}=o;l&&n&&(s.lineWidth=l,s.strokeStyle=n,s.setLineDash(o.borderDash),s.lineDashOffset=o.borderDashOffset,e=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),i=this.getPointPosition(t,e),s.beginPath(),s.moveTo(this.xCenter,this.yCenter),s.lineTo(i.x,i.y),s.stroke())}s.restore()}}drawBorder(){}drawLabels(){let t,e,i=this.ctx,s=this.options,r=s.ticks;if(!r.display)return;let a=this.getIndexAngle(0);i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(a),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((a,o)=>{if(0===o&&this.min>=0&&!s.reverse)return;let n=r.setContext(this.getContext(o)),l=r1(n.font);if(t=this.getDistanceFromCenterForValue(this.ticks[o].value),n.showLabelBackdrop){i.font=l.string,e=i.measureText(a.label).width,i.fillStyle=n.backdropColor;let s=r0(n.backdropPadding);i.fillRect(-e/2-s.left,-t-l.size/2-s.top,e+s.width,l.size+s.height)}rq(i,a.label,0,-t,l,{color:n.color,strokeColor:n.textStrokeColor,strokeWidth:n.textStrokeWidth})}),i.restore()}drawTitle(){}}let nO={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},nD=Object.keys(nO);function nT(t,e){return t-e}function nL(t,e){if(s$(e))return null;let i=t._adapter,{parser:s,round:r,isoWeekday:a}=t._parseOpts,o=e;return("function"==typeof s&&(o=s(o)),sC(o)||(o="string"==typeof s?i.parse(o,s):i.parse(o)),null===o)?null:(r&&(o="week"===r&&(s6(a)||!0===a)?i.startOf(o,"isoWeek",a):i.startOf(o,r)),+o)}function nz(t,e,i,s){let r=nD.length;for(let a=nD.indexOf(t);a<r-1;++a){let t=nO[nD[a]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(r*t.size))<=s)return nD[a]}return nD[r-1]}function nF(t,e,i){if(i){if(i.length){let{lo:s,hi:r}=rn(i,e);t[i[s]>=e?i[s]:i[r]]=!0}}else t[e]=!0}function nR(t,e,i){let s,r,a=[],o={},n=e.length;for(s=0;s<n;++s)o[r=e[s]]=s,a.push({value:r,major:!1});return 0!==n&&i?function(t,e,i,s){let r,a,o=t._adapter,n=+o.startOf(e[0].value,s),l=e[e.length-1].value;for(r=n;r<=l;r=+o.add(r,1,s))(a=i[r])>=0&&(e[a].major=!0);return e}(t,a,o,i):a}class nI extends oL{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){let i=t.time||(t.time={}),s=this._adapter=new a3(t.adapters.date);s.init(e),sV(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:nL(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,e=this._adapter,i=t.time.unit||"day",{min:s,max:r,minDefined:a,maxDefined:o}=this.getUserBounds();function n(t){a||isNaN(t.min)||(s=Math.min(s,t.min)),o||isNaN(t.max)||(r=Math.max(r,t.max))}a&&o||(n(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&n(this.getMinMax(!1))),s=sC(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),r=sC(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){let t=this.getLabelTimestamps(),e=1/0,i=-1/0;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){let t=this.options,e=t.time,i=t.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let r=this.min,a=function(t,e,i){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>i;)r--;return s>0||r<t.length?t.slice(s,r):t}(s,r,this.max);return this._unit=e.unit||(i.autoSkip?nz(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,i,s,r){for(let a=nD.length-1;a>=nD.indexOf(i);a--){let i=nD[a];if(nO[i].common&&t._adapter.diff(r,s,i)>=e-1)return i}return nD[i?nD.indexOf(i):0]}(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=nD.indexOf(t)+1,i=nD.length;e<i;++e)if(nO[nD[e]].common)return nD[e]}(this._unit):void 0,this.initOffsets(s),t.reverse&&a.reverse(),nR(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,i,s=0,r=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),s=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),r=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;s=ra(s,0,a),r=ra(r,0,a),this._offsets={start:s,end:r,factor:1/(s+1+r)}}_generate(){let t,e,i=this._adapter,s=this.min,r=this.max,a=this.options,o=a.time,n=o.unit||nz(o.minUnit,s,r,this._getLabelCapacity(s)),l=sO(a.ticks.stepSize,1),h="week"===n&&o.isoWeekday,c=s6(h)||!0===h,d={},u=s;if(c&&(u=+i.startOf(u,"isoWeek",h)),u=+i.startOf(u,c?"day":n),i.diff(r,s,n)>1e5*l)throw Error(s+" and "+r+" are too far apart with stepSize of "+l+" "+n);let f="data"===a.ticks.source&&this.getDataTimestamps();for(t=u,e=0;t<r;t=+i.add(t,l,n),e++)nF(d,t,f);return(t===r||"ticks"===a.bounds||1===e)&&nF(d,t,f),Object.keys(d).sort(nT).map(t=>+t)}getLabelForValue(t){let e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){let i=this.options.time.displayFormats,s=this._unit,r=e||i[s];return this._adapter.format(t,r)}_tickFormatFunction(t,e,i,s){let r=this.options,a=r.ticks.callback;if(a)return sT(a,[t,e,i],this);let o=r.time.displayFormats,n=this._unit,l=this._majorUnit,h=n&&o[n],c=l&&o[l],d=i[e],u=l&&c&&d&&d.major;return this._adapter.format(t,s||(u?c:h))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)(s=t[e]).label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let e=this.options.ticks,i=this.ctx.measureText(t).width,s=s8(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(s),a=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:i*r+o*a,h:i*a+o*r}}_getLabelCapacity(t){let e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,nR(this,[t],this._majorUnit),s),a=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,e=s.length;t<e;++t)i=i.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){let t,e,i=this._cache.labels||[];if(i.length)return i;let s=this.getLabels();for(t=0,e=s.length;t<e;++t)i.push(nL(this,s[t]));return this._cache.labels=this._normalized?i:this.normalize(i)}normalize(t){return ru(t.sort(nT))}}function nj(t,e,i){let s,r,a,o,n=0,l=t.length-1;i?(e>=t[n].pos&&e<=t[l].pos&&({lo:n,hi:l}=rl(t,"pos",e)),{pos:s,time:a}=t[n],{pos:r,time:o}=t[l]):(e>=t[n].time&&e<=t[l].time&&({lo:n,hi:l}=rl(t,"time",e)),{time:s,pos:a}=t[n],{time:r,pos:o}=t[l]);let h=r-s;return h?a+(o-a)*(e-s)/h:a}class nV extends nI{static id="timeseries";static defaults=nI.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=nj(e,this.min),this._tableRange=nj(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let e,i,s,{min:r,max:a}=this,o=[],n=[];for(e=0,i=t.length;e<i;++e)(s=t[e])>=r&&s<=a&&o.push(s);if(o.length<2)return[{time:r,pos:0},{time:a,pos:1}];for(e=0,i=o.length;e<i;++e)Math.round((o[e+1]+o[e-1])/2)!==(s=o[e])&&n.push({time:s,pos:e/(i-1)});return n}_generate(){let t=this.min,e=this.max,i=super.getDataTimestamps();return i.includes(t)&&i.length||i.splice(0,0,t),i.includes(e)&&1!==i.length||i.push(e),i.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t}getDecimalForValue(t){return(nj(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return nj(this._table,i*this._tableRange+this._minPos,!0)}}var nW=function(){if("u">typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),nN=function(t){var e,i=[];for(t=[].concat(t);t.length;)"string"==typeof(e=t.pop())?i.unshift.apply(i,e.split("\n")):Array.isArray(e)?t.push.apply(t,e):s$(t)||i.unshift(""+e);return i},nH=function(t,e,i){var s,r=[].concat(e),a=r.length,o=t.font,n=0;for(s=0,t.font=i.string;s<a;++s)n=Math.max(t.measureText(r[s]).width,n);return t.font=o,{height:a*i.lineHeight,width:n}},nB=function(t,e){var i,s,r,a,o=t.slice(),n=[];for(i=0,r=e.length;i<r;++i)a=e[i],-1===(s=o.indexOf(a))?n.push([a,1]):o.splice(s,1);for(i=0,r=o.length;i<r;++i)n.push([o[i],-1]);return n};function nU(t,e){var i=e.x,s=e.y;if(null===i)return{x:0,y:-1};if(null===s)return{x:1,y:0};var r=t.x-i,a=t.y-s,o=Math.sqrt(r*r+a*a);return{x:o?r/o:0,y:o?a/o:-1}}function nq(t,e,i){var s=0;return t<i.left?s|=1:t>i.right&&(s|=2),e<i.top?s|=8:e>i.bottom&&(s|=4),s}function nX(t,e){var i,s,r=e.anchor,a=t;return e.clamp&&(a=function(t,e){for(var i,s,r,a=t.x0,o=t.y0,n=t.x1,l=t.y1,h=nq(a,o,e),c=nq(n,l,e);h|c&&!(h&c);)8&(i=h||c)?(s=a+(n-a)*(e.top-o)/(l-o),r=e.top):4&i?(s=a+(n-a)*(e.bottom-o)/(l-o),r=e.bottom):2&i?(r=o+(l-o)*(e.right-a)/(n-a),s=e.right):1&i&&(r=o+(l-o)*(e.left-a)/(n-a),s=e.left),i===h?h=nq(a=s,o=r,e):c=nq(n=s,l=r,e);return{x0:a,x1:n,y0:o,y1:l}}(a,e.area)),"start"===r?(i=a.x0,s=a.y0):"end"===r?(i=a.x1,s=a.y1):(i=(a.x0+a.x1)/2,s=(a.y0+a.y1)/2),function(t,e,i,s,r){switch(r){case"center":i=s=0;break;case"bottom":i=0,s=1;break;case"right":i=1,s=0;break;case"left":i=-1,s=0;break;case"top":i=0,s=-1;break;case"start":i=-i,s=-s;break;case"end":break;default:r*=Math.PI/180,i=Math.cos(r),s=Math.sin(r)}return{x:t,y:e,vx:i,vy:s}}(i,s,t.vx,t.vy,e.align)}var nY=function(t,e){var i=(t.startAngle+t.endAngle)/2,s=Math.cos(i),r=Math.sin(i),a=t.innerRadius,o=t.outerRadius;return nX({x0:t.x+s*a,y0:t.y+r*a,x1:t.x+s*o,y1:t.y+r*o,vx:s,vy:r},e)},nK=function(t,e){var i=nU(t,e.origin),s=i.x*t.options.radius,r=i.y*t.options.radius;return nX({x0:t.x-s,y0:t.y-r,x1:t.x+s,y1:t.y+r,vx:i.x,vy:i.y},e)},nJ=function(t,e){var i=nU(t,e.origin),s=t.x,r=t.y,a=0,o=0;return t.horizontal?(s=Math.min(t.x,t.base),a=Math.abs(t.base-t.x)):(r=Math.min(t.y,t.base),o=Math.abs(t.base-t.y)),nX({x0:s,y0:r+o,x1:s+a,y1:r,vx:i.x,vy:i.y},e)},nG=function(t,e){var i=nU(t,e.origin);return nX({x0:t.x,y0:t.y,x1:t.x+(t.width||0),y1:t.y+(t.height||0),vx:i.x,vy:i.y},e)},nZ=function(t){return Math.round(t*nW)/nW},nQ=function(t,e,i,s){this._config=t,this._index=s,this._model=null,this._rects=null,this._ctx=e,this._el=i};sj(nQ.prototype,{_modelize:function(t,e,i,s){var r,a=this._index,o=r1(r2([i.font,{}],s,a)),n=r2([i.color,rz.color],s,a);return{align:r2([i.align,"center"],s,a),anchor:r2([i.anchor,"center"],s,a),area:s.chart.chartArea,backgroundColor:r2([i.backgroundColor,null],s,a),borderColor:r2([i.borderColor,null],s,a),borderRadius:r2([i.borderRadius,0],s,a),borderWidth:r2([i.borderWidth,0],s,a),clamp:r2([i.clamp,!1],s,a),clip:r2([i.clip,!1],s,a),color:n,display:t,font:o,lines:e,offset:r2([i.offset,4],s,a),opacity:r2([i.opacity,1],s,a),origin:function(t,e){var i=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!i)return null;if(void 0!==i.xCenter&&void 0!==i.yCenter)return{x:i.xCenter,y:i.yCenter};var s=i.getBasePixel();return t.horizontal?{x:s,y:null}:{x:null,y:s}}(this._el,s),padding:r0(r2([i.padding,4],s,a)),positioner:(r=this._el)instanceof o7?nY:r instanceof nh?nK:r instanceof ng?nJ:nG,rotation:r2([i.rotation,0],s,a)*(Math.PI/180),size:nH(this._ctx,e,o),textAlign:r2([i.textAlign,"start"],s,a),textShadowBlur:r2([i.textShadowBlur,0],s,a),textShadowColor:r2([i.textShadowColor,n],s,a),textStrokeColor:r2([i.textStrokeColor,n],s,a),textStrokeWidth:r2([i.textStrokeWidth,0],s,a)}},update:function(t){var e,i,s,r,a,o,n,l,h,c,d=null,u=null,f=this._index,p=this._config,g=r2([p.display,!0],t,f);g&&(e=t.dataset.data[f],(s=s$(i=sO(sT(p.formatter,[e,t]),e))?[]:nN(i)).length)&&(a=(r=d=this._modelize(g,s,p,t)).borderWidth||0,o=r.padding,n=r.size.height,h=-(l=r.size.width)/2,c=-n/2,u={frame:{x:h-o.left-a,y:c-o.top-a,w:l+o.width+2*a,h:n+o.height+2*a},text:{x:h,y:c,w:l,h:n}}),this._model=d,this._rects=u},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var i,s,r,a,o,n=t.ctx,l=this._model,h=this._rects;this.visible()&&(n.save(),l.clip&&(i=l.area,n.beginPath(),n.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),n.clip()),n.globalAlpha=Math.max(0,Math.min(l.opacity,1)),n.translate(nZ(e.x),nZ(e.y)),n.rotate(l.rotation),s=h.frame,r=l.backgroundColor,a=l.borderColor,o=l.borderWidth,(r||a&&o)&&(n.beginPath(),function(t,e,i,s,r,a){var o=Math.PI/2;if(a){var n=Math.min(a,r/2,s/2),l=e+n,h=i+n,c=e+s-n,d=i+r-n;t.moveTo(e,h),l<c&&h<d?(t.arc(l,h,n,-Math.PI,-o),t.arc(c,h,n,-o,0),t.arc(c,d,n,0,o),t.arc(l,d,n,o,Math.PI)):l<c?(t.moveTo(l,i),t.arc(c,h,n,-o,o),t.arc(l,h,n,o,Math.PI+o)):h<d?(t.arc(l,h,n,-Math.PI,0),t.arc(l,d,n,0,Math.PI)):t.arc(l,h,n,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,i)}else t.rect(e,i,s,r)}(n,nZ(s.x)+o/2,nZ(s.y)+o/2,nZ(s.w)-o,nZ(s.h)-o,l.borderRadius),n.closePath(),r&&(n.fillStyle=r,n.fill()),a&&o&&(n.strokeStyle=a,n.lineWidth=o,n.lineJoin="miter",n.stroke())),function(t,e,i,s){var r,a,o,n,l,h,c=s.textAlign,d=s.color,u=!!d,f=s.font,p=e.length,g=s.textStrokeColor,m=s.textStrokeWidth,_=g&&m;if(p&&(u||_))for(r=i,a=f.lineHeight,o=r.w,n=r.x,l=r.y+a/2,"center"===c?n+=o/2:("end"===c||"right"===c)&&(n+=o),i={h:a,w:o,x:n,y:l},t.font=f.string,t.textAlign=c,t.textBaseline="middle",t.shadowBlur=s.textShadowBlur,t.shadowColor=s.textShadowColor,u&&(t.fillStyle=d),_&&(t.lineJoin="round",t.lineWidth=m,t.strokeStyle=g),h=0,p=e.length;h<p;++h)!function(t,e,i){var s=t.shadowBlur,r=i.stroked,a=nZ(i.x),o=nZ(i.y),n=nZ(i.w);r&&t.strokeText(e,a,o,n),i.filled&&(s&&r&&(t.shadowBlur=0),t.fillText(e,a,o,n),s&&r&&(t.shadowBlur=s))}(t,e[h],{stroked:_,filled:u,w:i.w,x:i.x,y:i.y+i.h*h})}(n,l.lines,h.text,l),n.restore())}});var n0=Number.MIN_SAFE_INTEGER||-0x1fffffffffffff,n1=Number.MAX_SAFE_INTEGER||0x1fffffffffffff;function n2(t,e,i){var s=Math.cos(i),r=Math.sin(i),a=e.x,o=e.y;return{x:a+s*(t.x-a)-r*(t.y-o),y:o+r*(t.x-a)+s*(t.y-o)}}function n5(t,e){var i,s,r,a,o,n=n1,l=n0,h=e.origin;for(i=0;i<t.length;++i)r=(s=t[i]).x-h.x,a=s.y-h.y,n=Math.min(n,o=e.vx*r+e.vy*a),l=Math.max(l,o);return{min:n,max:l}}function n4(t,e){var i=e.x-t.x,s=e.y-t.y,r=Math.sqrt(i*i+s*s);return{vx:(e.x-t.x)/r,vy:(e.y-t.y)/r,origin:t,ln:r}}var n3=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function n6(t,e,i){var s=e.positioner(t,e),r=s.vx,a=s.vy;if(!r&&!a)return{x:s.x,y:s.y};var o=i.w,n=i.h,l=e.rotation,h=Math.abs(o/2*Math.cos(l))+Math.abs(n/2*Math.sin(l)),c=Math.abs(o/2*Math.sin(l))+Math.abs(n/2*Math.cos(l)),d=1/Math.max(Math.abs(r),Math.abs(a));return h*=r*d,c*=a*d,h+=e.offset*r,c+=e.offset*a,{x:s.x+h,y:s.y+c}}sj(n3.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,i){this._rotation=i,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this._rect;return!((t=n2(t,this.center(),-this._rotation)).x<e.x-1||t.y<e.y-1||t.x>e.x+e.w+2||t.y>e.y+e.h+2)},intersects:function(t){var e,i,s,r=this._points(),a=t._points(),o=[n4(r[0],r[1]),n4(r[0],r[3])];for(this._rotation!==t._rotation&&o.push(n4(a[0],a[1]),n4(a[0],a[3])),e=0;e<o.length;++e)if(i=n5(r,o[e]),s=n5(a,o[e]),i.max<s.min||s.max<i.min)return!1;return!0},_points:function(){var t=this._rect,e=this._rotation,i=this.center();return[n2({x:t.x,y:t.y},i,e),n2({x:t.x+t.w,y:t.y},i,e),n2({x:t.x+t.w,y:t.y+t.h},i,e),n2({x:t.x,y:t.y+t.h},i,e)]}});var n9={prepare:function(t){var e,i,s,r,a,o=[];for(e=0,s=t.length;e<s;++e)for(i=0,r=t[e].length;i<r;++i)a=t[e][i],o.push(a),a.$layout={_box:new n3,_hidable:!1,_visible:!0,_set:e,_idx:a._index};return o.sort(function(t,e){var i=t.$layout,s=e.$layout;return i._idx===s._idx?s._set-i._set:s._idx-i._idx}),this.update(o),o},update:function(t){var e,i,s,r,a,o=!1;for(e=0,i=t.length;e<i;++e)r=(s=t[e]).model(),(a=s.$layout)._hidable=r&&"auto"===r.display,a._visible=s.visible(),o|=a._hidable;o&&function(t){var e,i,s,r,a,o,n;for(e=0,i=t.length;e<i;++e)(r=(s=t[e]).$layout)._visible&&(n=new Proxy(s._el,{get:(t,e)=>t.getProps([e],!0)[e]}),a=s.geometry(),o=n6(n,s.model(),a),r._box.update(o,a,s.rotation()));!function(t,e){var i,s,r,a;for(i=t.length-1;i>=0;--i)for(r=t[i].$layout,s=i-1;s>=0&&r._visible;--s)(a=t[s].$layout)._visible&&r._box.intersects(a._box)&&e(r,a)}(t,function(t,e){var i=t._hidable,s=e._hidable;i&&s||s?e._visible=!1:i&&(t._visible=!1)})}(t)},lookup:function(t,e){var i,s;for(i=t.length-1;i>=0;--i)if((s=t[i].$layout)&&s._visible&&s._box.contains(e))return t[i];return null},draw:function(t,e){var i,s,r,a,o,n;for(i=0,s=e.length;i<s;++i)(a=(r=e[i]).$layout)._visible&&(o=r.geometry(),n=n6(r._el,r.model(),o),a._box.update(n,o,r.rotation()),r.draw(t,n))}},n8="$datalabels",n7="$default";function lt(t,e,i,s){if(e){var r,a=i.$context,o=i.$groups;!e[o._set]||(r=e[o._set][o._key])&&!0===sT(r,[a,s])&&(t[n8]._dirty=!0,i.update(a))}}class le extends e8{static{this.styles=ea`
    :host {
      display: flex;
      align-items: center;
      gap: 8px;
    }
  `}willUpdate(t){(t.has("hass")||t.has("forecast"))&&(this.suntimesInfo=i$(this.hass,this.forecast.datetime))}createRenderRoot(){return this}render(){if(!this.forecast)return eX;let{label:t,className:e}=this.getDateInfo(),i=!!("hourly"===this.forecastType&&this.config.forecast?.show_sun_times)&&!!this.suntimesInfo&&this.suntimesInfo.isNightTime;return eB`
      <div class="wfc-forecast-slot-time wfc-label ${e||""}">
        ${t}
      </div>
      <wfc-weather-condition-icon-provider
        .hass=${this.hass}
        .config=${this.config}
        .state=${this.forecast.condition}
        .isNightTime=${i}
      ></wfc-weather-condition-icon-provider>
    `}getDateInfo(){let t,e;if("hourly"!==this.forecastType)return{label:ix(this.hass,this.forecast.datetime)};let i=new Date(this.forecast.datetime),s=this.forecast.groupEndtime?new Date(this.forecast.groupEndtime):((e=new Date(i)).setMinutes(59,59,999),e),r=i;if(this.config.forecast?.show_sun_times&&this.suntimesInfo){let{sunrise:e,sunset:a}=this.suntimesInfo,o=t=>{let e=new Date(i);return e.setHours(t.getHours(),t.getMinutes()),e.getTime()>=i.getTime()&&e.getTime()<=s.getTime()};o(e)?(t="wfc-sunrise",r=e):o(a)&&(t="wfc-sunset",r=a)}return{label:t?((t,e,i=!1)=>iS(e).toLocaleTimeString(ik(t),{hour:"numeric",minute:"2-digit",hour12:!i&&iM(t)}))(this.hass,r,!0):((t,e,i=!1)=>iS(e).toLocaleTimeString(ik(t),{hour:"numeric",hour12:!i&&iM(t)}))(this.hass,r,!0),className:t}}}k([ew({attribute:!1})],le.prototype,"hass",void 0),k([ew({attribute:!1})],le.prototype,"forecast",void 0),k([ew({attribute:!1})],le.prototype,"forecastType",void 0),k([ew({attribute:!1})],le.prototype,"config",void 0),le=k([t8("wfc-forecast-header-items")],le),o3.register(class extends aX{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,s){return aK(t,e,i,s)}parseArrayData(t,e,i,s){return aK(t,e,i,s)}parseObjectData(t,e,i,s){let r,a,o,n,{iScale:l,vScale:h}=t,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,u="x"===l.axis?c:d,f="x"===h.axis?c:d,p=[];for(r=i,a=i+s;r<a;++r)n=e[r],(o={})[l.axis]=l.parse(sH(n,u),r),p.push(aY(sH(n,f),o,h,r));return p}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);let r=i._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let{iScale:e,vScale:i}=this._cachedMeta,s=this.getParsed(t),r=s._custom,a=aJ(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+e.getLabelForValue(s[e.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){let e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){let r="reset"===s,{index:a,_cachedMeta:{vScale:o}}=this,n=o.getBasePixel(),l=o.isHorizontal(),h=this._getRuler(),{sharedOptions:c,includeOptions:d}=this._getSharedOptions(e,s);for(let u=e;u<e+i;u++){let e=this.getParsed(u),i=r||s$(e[o.axis])?{base:n,head:n}:this._calculateBarValuePixels(u),f=this._calculateBarIndexPixels(u,h),p=(e._stacks||{})[o.axis],g={horizontal:l,base:i.base,enableBorderRadius:!p||aJ(e._custom)||a===p._top||a===p._bottom,x:l?i.head:f.center,y:l?f.center:i.head,height:l?f.size:Math.abs(i.size),width:l?Math.abs(i.size):f.size};d&&(g.options=c||this.resolveDataElementOptions(u,t[u].active?"active":s));let m=g.options||t[u].options;!function(t,e,i,s){let r,a,o,n,l,h=e.borderSkipped,c={};if(!h){t.borderSkipped=c;return}if(!0===h){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:d,end:u,reverse:f,top:p,bottom:g}=(t.horizontal?(r=t.base>t.x,a="left",o="right"):(r=t.base<t.y,a="bottom",o="top"),r?(n="end",l="start"):(n="start",l="end"),{start:a,end:o,reverse:r,top:n,bottom:l});"middle"===h&&i&&(t.enableBorderRadius=!0,(i._top||0)===s?h=p:(i._bottom||0)===s?h=g:(c[aG(g,d,u,f)]=!0,h=p)),c[aG(h,d,u,f)]=!0,t.borderSkipped=c}(g,m,p,a),function(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?.33*(1===i):e}(g,m,h.ratio),this.updateElement(t[u],u,g,s)}}_getStacks(t,e){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),r=i.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(e),n=o&&o[i.axis],l=t=>{let e=t._parsed.find(t=>t[i.axis]===n),s=e&&e[t.vScale.axis];if(s$(s)||isNaN(s))return!0};for(let i of s)if(!(void 0!==e&&l(i))&&((!1===r||-1===a.indexOf(i.stack)||void 0===r&&void 0===i.stack)&&a.push(i.stack),i.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){let t={},e=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[sO("x"===this.chart.options.indexAxis?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){let s=this._getStacks(t,i),r=void 0!==e?s.indexOf(e):-1;return -1===r?s.length-1:r}_getRuler(){let t,e,i=this.options,s=this._cachedMeta,r=s.iScale,a=[];for(t=0,e=s.data.length;t<e;++t)a.push(r.getPixelForValue(this.getParsed(t)[r.axis],t));let o=i.barThickness;return{min:o||function(t){let e,i,s,r,a=t.iScale,o=function(t,e){if(!t._cache.$bar){let i=t.getMatchingVisibleMetas(e),s=[];for(let e=0,r=i.length;e<r;e++)s=s.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=ru(s.sort((t,e)=>t-e))}return t._cache.$bar}(a,t.type),n=a._length,l=()=>{32767!==s&&-32768!==s&&(sU(r)&&(n=Math.min(n,Math.abs(s-r)||n)),r=s)};for(e=0,i=o.length;e<i;++e)s=a.getPixelForValue(o[e]),l();for(e=0,r=void 0,i=a.ticks.length;e<i;++e)s=a.getPixelForTick(e),l();return n}(s),pixels:a,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:i.grouped,ratio:o?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(t){let e,i,{_cachedMeta:{vScale:s,_stacked:r,index:a},options:{base:o,minBarLength:n}}=this,l=o||0,h=this.getParsed(t),c=h._custom,d=aJ(c),u=h[s.axis],f=0,p=r?this.applyStack(s,h,r):u;p!==u&&(f=p-u,p=u),d&&(u=c.barStart,p=c.barEnd-c.barStart,0!==u&&s5(u)!==s5(c.barEnd)&&(f=0),f+=u);let g=s$(o)||d?f:o,m=s.getPixelForValue(g);if(Math.abs(i=(e=this.chart.getDataVisibility(t)?s.getPixelForValue(f+p):m)-m)<n){var _;i=(0!==(_=i)?s5(_):(s.isHorizontal()?1:-1)*(s.min>=l?1:-1))*n,u===l&&(m-=i/2);let t=s.getPixelForDecimal(0),o=s.getPixelForDecimal(1),c=Math.min(t,o);e=(m=Math.max(Math.min(m,Math.max(t,o)),c))+i,r&&!d&&(h._stacks[s.axis]._visualValues[a]=s.getValueForPixel(e)-s.getValueForPixel(m))}if(m===s.getPixelForValue(l)){let t=s5(i)*s.getLineWidthForValue(l)/2;m+=t,i-=t}return{size:i,base:m,head:e,center:e+i/2}}_calculateBarIndexPixels(t,e){let i,s,r=e.scale,a=this.options,o=a.skipNull,n=sO(a.maxBarThickness,1/0),l=this._getAxisCount();if(e.grouped){var h,c;let r,d,u,f,p,g,m,_,b,y=o?this._getStackCount(t):e.stackCount,v="flex"===a.barThickness?(h=y*l,d=(r=e.pixels)[t],u=t>0?r[t-1]:null,f=t<r.length-1?r[t+1]:null,p=a.categoryPercentage,null===u&&(u=d-(null===f?e.end-e.start:f-d)),null===f&&(f=d+d-u),g=d-(d-Math.min(u,f))/2*p,{chunk:Math.abs(f-u)/2*p/h,ratio:a.barPercentage,start:g}):(c=y*l,s$(b=a.barThickness)?(m=e.min*a.categoryPercentage,_=a.barPercentage):(m=b*c,_=1),{chunk:m/c,ratio:_,start:e.pixels[t]-m/2}),x="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf(sO(x,this.getFirstScaleIdForIndexAxis())),M=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+w;i=v.start+v.chunk*M+v.chunk/2,s=Math.min(n,v.chunk*v.ratio)}else i=r.getPixelForValue(this.getParsed(t)[r.axis],t),s=Math.min(n,e.min*e.ratio);return{base:i-s/2,head:i+s/2,center:i,size:s}}draw(){let t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length,r=0;for(;r<s;++r)null===this.getParsed(r)[e.axis]||i[r].hidden||i[r].draw(this._ctx)}},ng,class extends aX{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let e=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=e,a=this.chart._animationsDisabled,{start:o,count:n}=r_(e,s,a);this._drawStart=o,this._drawCount=n,rb(e)&&(o=0,n=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;let l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:l},t),this.updateElements(s,o,n,t)}updateElements(t,e,i,s){let r="reset"===s,{iScale:a,vScale:o,_stacked:n,_dataset:l}=this._cachedMeta,{sharedOptions:h,includeOptions:c}=this._getSharedOptions(e,s),d=a.axis,u=o.axis,{spanGaps:f,segment:p}=this.options,g=s6(f)?f:1/0,m=this.chart._animationsDisabled||r||"none"===s,_=e+i,b=t.length,y=e>0&&this.getParsed(e-1);for(let i=0;i<b;++i){let f=t[i],b=m?f:{};if(i<e||i>=_){b.skip=!0;continue}let v=this.getParsed(i),x=s$(v[u]),w=b[d]=a.getPixelForValue(v[d],i),M=b[u]=r||x?o.getBasePixel():o.getPixelForValue(n?this.applyStack(o,v,n):v[u],i);b.skip=isNaN(w)||isNaN(M)||x,b.stop=i>0&&Math.abs(v[d]-y[d])>g,p&&(b.parsed=v,b.raw=l.data[i]),c&&(b.options=h||this.resolveDataElementOptions(i,f.active?"active":s)),m||this.updateElement(f,i,b,s),y=v}}getMaxOverflow(){let t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];return s.length?Math.max(i,s[0].size(this.resolveDataElementOptions(0)),s[s.length-1].size(this.resolveDataElementOptions(s.length-1)))/2:i}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},nn,nh,nx,class extends oL{static id="category";static defaults={ticks:{callback:nb}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let e=this._addedLabels;if(e.length){let t=this.getLabels();for(let{index:i,label:s}of e)t[i]===s&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){let i,s;if(s$(t))return null;let r=this.getLabels();return i=e=isFinite(e)&&r[e]===t?e:function(t,e,i,s){let r=t.indexOf(e);if(-1===r){var a;return a=i,"string"==typeof e?(a=t.push(e)-1,s.unshift({index:a,label:e})):isNaN(e)&&(a=null),a}return r!==t.lastIndexOf(e)?i:r}(r,t,sO(e,t),this._addedLabels),s=r.length-1,null===i?null:ra(Math.round(i),0,s)}determineDataLimits(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let t=this.min,e=this.max,i=this.options.offset,s=[],r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-!i,1),this._startValue=this.min-.5*!!i;for(let i=t;i<=e;i++)s.push({value:i});return s}getLabelForValue(t){return nb.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},{id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(s$(t))return null;var e,i,s,r=t;if(sP(t))if(s$(t.label))if(s$(t.r))for(s=0,r="",i=(e=Object.keys(t)).length;s<i;++s)r+=(0!==s?", ":"")+e[s]+": "+t[e[s]];else r=t.r;else r=t.label;return""+r},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(t){t[n8]={_actives:[]}},beforeUpdate:function(t){var e=t[n8];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,i){var s,r,a,o,n,l,h,c,d,u,f,p,g,m,_=e.index,b=t[n8],y=b._datasets[_]=[],v=t.isDatasetVisible(_),x=t.data.datasets[_],w=(s=i,o=x.datalabels,n={},l=[],!1===o?null:(!0===o&&(o={}),a=Object.keys(r=(s=sj({},[s,o])).labels||{}),delete s.labels,a.length?a.forEach(function(t){r[t]&&l.push(sj({},[s,r[t],{_key:t}]))}):l.push(s),n=l.reduce(function(t,e){return sL(e.listeners||{},function(i,s){t[s]=t[s]||{},t[s][e._key||n7]=i}),delete e.listeners,t},{}),{labels:l,listeners:n})),M=e.meta.data||[],k=t.ctx;for(k.save(),h=0,d=M.length;h<d;++h)if((g=M[h])[n8]=[],v&&g&&t.getDataVisibility(h)&&!g.skip)for(c=0,u=w.labels.length;c<u;++c)p=(f=w.labels[c])._key,(m=new nQ(f,k,g,h)).$groups={_set:_,_key:p||n7},m.$context={active:!1,chart:t,dataIndex:h,dataset:x,datasetIndex:_},m.update(m.$context),g[n8].push(m),y.push(m);k.restore(),sj(b._listeners,w.listeners,{merger:function(t,i,s){i[t]=i[t]||{},i[t][e.index]=s[t],b._listened=!0}})},afterUpdate:function(t){t[n8]._labels=n9.prepare(t[n8]._datasets)},afterDatasetsDraw:function(t){n9.draw(t,t[n8]._labels)},beforeEvent:function(t,e){if(t[n8]._listened){var i,s,r,a=e.event;switch(a.type){case"mousemove":case"mouseout":!function(t,e){var i,s,r,a,o,n=t[n8],l=n._listeners;if(l.enter||l.leave){if("mousemove"===e.type)o=n9.lookup(n._labels,e);else if("mouseout"!==e.type)return;a=n._hovered,n._hovered=o,i=o,(a||i)&&(a?i?a!==i&&(r=s=!0):r=!0:s=!0,r&&lt(t,l.leave,a,e),s&&lt(t,l.enter,i,e))}}(t,a);break;case"click":(r=(s=(i=t[n8])._listeners.click)&&n9.lookup(i._labels,a))&&lt(t,s,r,a)}}},afterEvent:function(t){var e,i,s,r,a,o,n,l=t[n8],h=nB(l._actives,l._actives=t.getActiveElements());for(e=0,i=h.length;e<i;++e)if((a=h[e])[1])for(s=0,r=(n=a[0].element[n8]||[]).length;s<r;++s)(o=n[s]).$context.active=1===a[1],o.update(o.$context);(l._dirty||h.length)&&(n9.update(l._labels),t.render()),delete l._dirty}});class li extends e8{createRenderRoot(){return this}disconnectedCallback(){super.disconnectedCallback(),this._chart?.destroy(),this._chart=null}firstUpdated(){this.initChart()}updated(t){if(super.updated(t),(t.has("forecast")||t.has("weatherEntity")||t.has("hass")||t.has("forecastType")||t.has("itemWidth"))&&this.itemWidth>0&&this.forecast?.length)if(this._chart){let e=t.has("forecastType")||t.has("itemWidth");this.updateChartData(e)}else this.initChart()}render(){let t=this.safeForecast;if(!t?.length||this.itemWidth<=0)return eX;let e=t.length,i=Math.max(e-1,0),s=`calc(${e} * var(--forecast-item-width) + ${i} * var(--forecast-item-gap))`;return eB`
      <div
        class="wfc-scroll-container"
        style=${i9({"--wfc-forecast-chart-width":s})}
        .actionHandler=${iN({hasHold:this.config.forecast_action?.hold_action!==void 0,hasDoubleClick:this.config.forecast_action?.double_tap_action!==void 0,stopPropagation:!0})}
        @pointerdown=${this._onPointerDown}
        @action=${this._onForecastAction}
      >
        <div class="wfc-forecast-chart-header">
          ${this.renderHeaderItems(t)}
        </div>

        <div class="wfc-chart-clipper" style=${i9({width:"var(--wfc-forecast-chart-width)",overflow:"hidden"})}>
          <div
            class="wfc-forecast-chart"
            id="chart-container"
            style=${i9({width:"calc(var(--wfc-forecast-chart-width) + var(--forecast-item-gap))",marginLeft:"calc(var(--forecast-item-gap) / -2)",display:"block"})}
          >
            <canvas id="forecast-canvas"></canvas>
          </div>
        </div>

        <div class="wfc-forecast-chart-footer">
          ${t.map(t=>eB`
              <div class="wfc-forecast-slot">
                <wfc-forecast-info
                  .hass=${this.hass}
                  .weatherEntity=${this.weatherEntity}
                  .forecast=${t}
                  .config=${this.config}
                  .hidePrecipitation=${!0}
                ></wfc-forecast-info>
              </div>
            `)}
        </div>
      </div>
    `}initChart(){if(!this._canvas||!this.forecast?.length)return;let t=this.getChartConfig();t&&(this._chart=new o3(this._canvas,t))}updateChartData(t=!1){if(!this._chart||!this.forecast?.length)return;let e=this.getChartConfig();this._chart.data=e.data,this._chart.options.scales&&e.options?.scales&&(this._chart.options.scales=e.options.scales),t&&this._chart.resize(),this._chart.update("none")}getChartConfig(){let t=this.safeForecast,e=getComputedStyle(this),i=e.getPropertyValue("--wfc-chart-grid-color"),s=e.getPropertyValue("--wfc-chart-temp-high-label-color"),r=e.getPropertyValue("--wfc-chart-temp-low-label-color"),a=e.getPropertyValue("--wfc-chart-precipitation-label-color"),o=e.getPropertyValue("--wfc-precipitation-bar-color"),{minTemp:n,maxTemp:l}=this.computeScaleLimits(t),h=iQ(iK(this.hass,this.weatherEntity,"precipitation"),this.forecastType),c=this.getTemperatureLineStyle(e,"temperature"),d=this.getTemperatureLineStyle(e,"templow");return{type:"line",data:{labels:t.map(t=>t.datetime),datasets:[{data:t.map(t=>t.temperature),yAxisID:"yTemp",datalabels:{anchor:"end",align:"top",color:s,formatter:t=>null!=t?`${ir(t,this.hass.locale)}\xb0`:null},...c},{data:t.map(t=>t.templow??null),yAxisID:"yTemp",datalabels:{anchor:"start",align:"bottom",color:r,formatter:t=>null!=t?`${ir(t,this.hass.locale)}\xb0`:null},...d},{data:t.map(t=>t.precipitation&&0!==t.precipitation?t.precipitation:null),backgroundColor:o,type:"bar",yAxisID:"yPrecip",borderWidth:0,borderRadius:{topLeft:3,topRight:3},categoryPercentage:.6,barPercentage:.8,order:0,datalabels:{anchor:"start",align:"end",offset:-22,color:a,formatter:t=>((t,e)=>{if(void 0===t)return"";let i="mm"===e?t:25.4*t;if(0===i||i<.05)return"";let s="in"===e?t.toFixed(2):t.toFixed(1);return`${s} ${e}`})(t,iK(this.hass,this.weatherEntity,"precipitation"))}}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{autoPadding:!1,padding:{top:10,bottom:10,left:0,right:0}},elements:{line:{tension:.3}},scales:{x:{offset:!0,border:{color:i,dash:[4,4]},grid:{offset:!0,display:!0,color:i,drawTicks:!0},ticks:{display:!1}},yTemp:{type:"linear",display:!1,min:n,max:l,position:"left",grid:{display:!1},ticks:{display:!1}},yPrecip:{type:"linear",display:!1,position:"right",beginAtZero:!0,suggestedMin:0,suggestedMax:h,grid:{display:!1,drawOnChartArea:!1},ticks:{display:!1}}}}}}getTemperatureLineStyle(t,e){let i=t.getPropertyValue("temperature"===e?"--wfc-chart-temp-high-line-color":"--wfc-chart-temp-low-line-color"),s=e=>this.computeTemperatureLineColor(e,t,i);return{borderColor:s,pointBorderColor:s,pointBackgroundColor:s,borderDash:this.config.forecast?.use_color_thresholds&&"templow"===e?[4,4]:void 0,fill:!1}}computeTemperatureLineColor(t,e,i){if(!this.config.forecast?.use_color_thresholds)return i;let{ctx:s,chartArea:r,scales:a}=t.chart;if(!r||!a.yTemp)return i;null===this._temperatureColors&&(this._temperatureColors={cold:e.getPropertyValue("--wfc-temp-cold")||"#2196f3",freezing:e.getPropertyValue("--wfc-temp-freezing")||"#4fb3ff",chilly:e.getPropertyValue("--wfc-temp-chilly")||"#ffeb3b",mild:e.getPropertyValue("--wfc-temp-mild")||"#4caf50",warm:e.getPropertyValue("--wfc-temp-warm")||"#ff9800",hot:e.getPropertyValue("--wfc-temp-hot")||"#f44336"});let{min:o,max:n}=a.yTemp,l=s.createLinearGradient(0,r.bottom,0,r.top),h=t=>Math.max(0,Math.min(1,(t-o)/(n-o))),c="F"===iK(this.hass,this.weatherEntity,"temperature"),d=t=>c?9*t/5+32:t;for(let t of[{pos:h(d(-10)),color:this._temperatureColors.cold},{pos:h(d(0)),color:this._temperatureColors.freezing},{pos:h(d(8)),color:this._temperatureColors.chilly},{pos:h(d(18)),color:this._temperatureColors.mild},{pos:h(d(26)),color:this._temperatureColors.warm},{pos:h(d(34)),color:this._temperatureColors.hot}].sort((t,e)=>t.pos-e.pos))l.addColorStop(t.pos,t.color);return l}computeScaleLimits(t){let e=t.map(t=>t.temperature),i=Math.min(...t.map(t=>t.templow??t.temperature)),s=Math.max(...e),r=t.some(t=>void 0!==t.templow&&null!==t.templow),a=Math.max(s-i,10),o=Math.max(.2*a,2),n=Math.floor(i-Math.max(a*(r?.35:.1),r?5:1)),l=Math.ceil(s+o);return n>=l&&(l=n+1),{minTemp:n,maxTemp:l}}renderHeaderItems(t){let e,i=[];return t.forEach(t=>{if(t.datetime){if("hourly"===this.forecastType){let s=ix(this.hass,t.datetime);e!==s&&(e=s,i.push(eB`<div class="wfc-day-indicator-container">
              <div class="wfc-day-indicator wfc-label">${s}</div>
            </div>`))}i.push(eB`
        <div class="wfc-forecast-slot">
          <wfc-forecast-header-items
            .hass=${this.hass}
            .forecast=${t}
            .forecastType=${this.forecastType}
            .config=${this.config}
          ></wfc-forecast-header-items>
        </div>
      `)}}),i}get safeForecast(){if(!this.forecast?.length||this.itemWidth<=0)return[];let t=this._getGapValue(),e=Math.floor((16384+t)/(this.itemWidth+t));return this.forecast.length>e?(iF.debug(`Truncating forecast to ${e} items to stay under 16384px (including ${t}px gaps).`),this.forecast.slice(0,e)):this.forecast}_getGapValue(){return parseFloat(getComputedStyle(this).getPropertyValue("--forecast-item-gap").trim())||0}_onPointerDown(t){this._lastChartEvent=t}constructor(...t){super(...t),this.forecast=[],this.itemWidth=0,this._lastChartEvent=null,this._chart=null,this._temperatureColors=null,this._scrollController=new i4(this,{selector:".wfc-scroll-container",childSelector:".wfc-forecast-slot"}),this._onForecastAction=t=>{if(this._scrollController.isScrolling()||!this._chart||!this._lastChartEvent)return;let e=this._lastChartEvent;this._lastChartEvent=null,t.preventDefault(),t.stopPropagation();let i=am(e,this._chart),s=this._chart.scales.x;if(!s)return;let r=s.getValueForPixel(i.x);if(null==r)return;let a=s.getLabelForValue(r),o=this._chart.data.labels?.indexOf(a)??-1;if(-1===o)return;let n=this.safeForecast[o];n&&il(this,"action",{selectedForecast:n,action:t.detail.action})}}}k([ew({attribute:!1})],li.prototype,"hass",void 0),k([ew({attribute:!1})],li.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],li.prototype,"forecast",void 0),k([ew({attribute:!1})],li.prototype,"config",void 0),k([ew({attribute:!1})],li.prototype,"forecastType",void 0),k([ew({attribute:!1})],li.prototype,"itemWidth",void 0),k([(t,e,i)=>{let s,r,a;return s=t,r=e,(a={get(){let t;return t=this,t.renderRoot?.querySelector("canvas")??null}}).configurable=!0,a.enumerable=!0,Reflect.decorate&&"object"!=typeof r&&Object.defineProperty(s,r,a),a}],li.prototype,"_canvas",void 0),li=k([t8("wfc-forecast-chart")],li);class ls extends e8{createRenderRoot(){return this}render(){let t;if(!this.forecast)return eX;let e=this.forecast.precipitation||0,i=this.computePrecipitationBarHeight(e),s=void 0!==(t=this.forecast).precipitation&&t.precipitation>0||void 0!==t.precipitation_probability&&t.precipitation_probability>0;return eB`
      <div class="wfc-forecast-slot-temperature">
        <span class="wfc-forecast-temperature-high wfc-small">
          ${Math.round(this.forecast.temperature)}</span
        >${void 0!==this.forecast.templow?eB`<span
              class="wfc-forecast-temperature-low wfc-secondary wfc-small"
              >/${Math.round(this.forecast.templow)}</span
            >`:eX}
      </div>
      <div
        class=${iq({"wfc-forecast-precip-amount-container":!0,"wfc-not-available":!s})}
      >
        <div
          class="wfc-forecast-precip-amount-bar"
          style="--forecast-precipitation-bar-height-pct: ${i}%;"
        ></div>
        <span class="wfc-forecast-precip-amount">
          ${e.toFixed(1)}
        </span>
      </div>
    `}computePrecipitationBarHeight(t){return t<.1?0:t<.2?10:Math.round(Math.min(t/(this.maxPrecipitation||10)*100,100))}}k([ew({attribute:!1})],ls.prototype,"hass",void 0),k([ew({attribute:!1})],ls.prototype,"forecast",void 0),k([ew({attribute:!1})],ls.prototype,"config",void 0),k([ew({attribute:!1})],ls.prototype,"maxPrecipitation",void 0),ls=k([t8("wfc-forecast-details")],ls);class lr extends e8{static{this.styles=ea`
    :host {
      display: inline-block;
    }
    text {
      font-size: calc(var(--ha-font-size-l, 16px) * 1.4);
      fill: var(--primary-text-color);
      font-weight: 600;
      text-anchor: middle;
      dominant-baseline: middle;
    }
  `}render(){if(!this.hass||!this.forecast||!this.weatherEntity)return eX;let t=this.forecast.wind_speed||0,e=this.forecast.wind_bearing||0,i=this.radius,s=i+10,r=i+10,a=2*(i+10),o=Math.round(t),n=this.computeLineColor(),l=e;"direction"===this.type&&(l=(l+180)%360);let h=r-i,c=.45*i;return eB`
      <svg
        width="${this.size}"
        height="${this.size}"
        viewBox="0 0 ${a} ${a}"
        role="img"
        aria-label="Wind speed: ${o}, bearing: ${l} degrees"
      >
        <circle
          cx="${s}"
          cy="${r}"
          r="${i}"
          stroke="${n}"
          stroke-width="${4}"
          fill="none"
        />

        <g transform="rotate(${l} ${s} ${r})">
          <polygon
            points="
              ${s-c},${h}
              ${s+c},${h}
              ${s},${h-.55*i}
            "
            fill="${n}"
          />
        </g>

        <text x="${s}" y="${r}" dy="0.1em">${o}</text>
      </svg>
    `}computeLineColor(){let t=i0(this.hass,this.weatherEntity,this.forecast);return!t||t<=3?"var(--wfc-wind-low)":t<=8?"var(--wfc-wind-medium)":"var(--wfc-wind-high)"}constructor(...t){super(...t),this.size=35,this.radius=20,this.type="bearing"}}k([ew({attribute:!1})],lr.prototype,"hass",void 0),k([ew({attribute:!1})],lr.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],lr.prototype,"forecast",void 0),k([ew({attribute:!1})],lr.prototype,"size",void 0),k([ew({attribute:!1})],lr.prototype,"radius",void 0),k([ew({attribute:!1})],lr.prototype,"type",void 0),lr=k([t8("wfc-wind-indicator")],lr);class la extends e8{createRenderRoot(){return this}render(){return this.forecast?eB`
      <div class="wfc-forecast-slot-info">
        ${this.getExtraInfo()??eX}
      </div>
    `:eX}getExtraInfo(){let t=this.config?.forecast?.extra_attribute;if(!t)return null;if("precipitation_probability"===t){let t=Math.round(this.forecast.precipitation_probability||0);return t>0?eB`
            <span class="wfc-forecast-precip-probability wfc-secondary">
              ${t<10?"<10%":`${t}%`}
            </span>
          `:null}return"wind_bearing"===t||"wind_direction"===t?eB`<wfc-wind-indicator
        .hass=${this.hass}
        .weatherEntity=${this.weatherEntity}
        .forecast=${this.forecast}
        .type="${"wind_direction"===t?"direction":"bearing"}"
      ></wfc-wind-indicator>`:(iF.warn(`Unsupported forecast.extra_attribute: ${t}`),null)}}k([ew({attribute:!1})],la.prototype,"hass",void 0),k([ew({attribute:!1})],la.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],la.prototype,"forecast",void 0),k([ew({attribute:!1})],la.prototype,"config",void 0),la=k([t8("wfc-forecast-info")],la);class lo extends e8{createRenderRoot(){return this}render(){let t;if(!this.forecast?.length)return eX;let e=[],i=iQ(iK(this.hass,this.weatherEntity,"precipitation"),this.forecastType);return this.forecast.forEach((s,r)=>{if(s.datetime){if("hourly"===this.forecastType){let i=ix(this.hass,s.datetime);t!==i&&(t=i,e.push(eB`<div class="wfc-day-indicator-container">
              <div class="wfc-day-indicator wfc-label">${i}</div>
            </div>`))}e.push(eB`
        <div class="wfc-forecast-slot" data-index=${r}>
          <wfc-forecast-header-items
            .hass=${this.hass}
            .forecast=${s}
            .forecastType=${this.forecastType}
            .config=${this.config}
          ></wfc-forecast-header-items>
          <wfc-forecast-details
            .hass=${this.hass}
            .forecast=${s}
            .maxPrecipitation=${i}
            .config=${this.config}
          ></wfc-forecast-details>
          <wfc-forecast-info
            .hass=${this.hass}
            .weatherEntity=${this.weatherEntity}
            .forecast=${s}
            .config=${this.config}
          ></wfc-forecast-info>
        </div>
      `)}}),eB`
      <div
        class="wfc-forecast wfc-scroll-container"
        .actionHandler=${iN({hasHold:this.config.forecast_action?.hold_action!==void 0,hasDoubleClick:this.config.forecast_action?.double_tap_action!==void 0,stopPropagation:!0})}
        @action=${this._onForecastAction}
        @pointerdown=${this._onPointerDown}
      >
        ${e}
      </div>
    `}constructor(...t){super(...t),this.forecast=[],this._selectedForecastIndex=null,this._scrollController=new i4(this,{selector:".wfc-scroll-container",childSelector:".wfc-forecast-slot"}),this._onPointerDown=t=>{let e=t.target,i=e?.closest(".wfc-forecast-slot");this._selectedForecastIndex=i?.dataset.index?Number(i.dataset.index):null},this._onForecastAction=t=>{if(this._scrollController.isScrolling()||null===this._selectedForecastIndex)return;t.preventDefault(),t.stopPropagation();let e=this.forecast[this._selectedForecastIndex];e&&il(this,"action",{selectedForecast:e,action:t.detail.action})}}}k([ew({attribute:!1})],lo.prototype,"hass",void 0),k([ew({attribute:!1})],lo.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],lo.prototype,"forecast",void 0),k([ew({attribute:!1})],lo.prototype,"forecastType",void 0),k([ew({attribute:!1})],lo.prototype,"config",void 0),lo=k([t8("wfc-forecast-simple")],lo);class ln extends e8{createRenderRoot(){return this}render(){if(!this.state||!this.config)return eX;let t=this.getClasses(),e=this.getWeatherStateIcon();return eB`
      <div class="${t}" data-condition="${this.state}">${e}</div>
    `}getClasses(){return this.classes?`wfc-weather-condition-icon-slot ${this.classes}`:"wfc-weather-condition-icon-slot"}getWeatherStateIcon(){if(this.config?.icons_path?.trim()){let{path:t,state:e}=this.getCustomWeatherIconPath();return eB` <img src="${t}" alt="${e}" /> `}let t=getComputedStyle(this).getPropertyValue(`--weather-icon-${this.state}`);return t?eB`
        <div
          style="background-size: cover;${i9({"background-image":t})}"
        ></div>
      `:ll.has(this.state)?eB`${lp(this.state,this.isNightTime)}`:eX}constructor(...t){super(...t),this.isNightTime=!1,this.state="exceptional",this.getCustomWeatherIconPath=()=>{let t=ll.has(this.state)?this.state:"exceptional";this.isNightTime&&("partlycloudy"===this.state?t="partlycloudy-night":"sunny"===this.state&&(t="clear-night"));let e=this.config.icons_path?.trim().replace(/\/$/,"");return{path:`${e}/${t}.svg`,state:t}}}}k([ew({attribute:!1})],ln.prototype,"config",void 0),k([ew({attribute:!1})],ln.prototype,"classes",void 0),k([ew({attribute:!1})],ln.prototype,"isNightTime",void 0),k([ew({attribute:!1})],ln.prototype,"state",void 0),ln=k([t8("wfc-weather-condition-icon-provider")],ln);let ll=new Set(["clear-night","cloudy","exceptional","fog","lightning","lightning-rainy","partlycloudy","pouring","rainy","hail","snowy","snowy-rainy","sunny","windy","windy-variant"]),lh=new Set(["partlycloudy","cloudy","fog","windy","windy-variant","hail","rainy","snowy","snowy-rainy","pouring","lightning","lightning-rainy"]),lc=new Set(["hail","rainy","pouring"]),ld=new Set(["windy","windy-variant"]),lu=new Set(["snowy","snowy-rainy"]),lf=new Set(["lightning","lightning-rainy"]),lp=(t,e)=>eU`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 17 17"
  >
  ${"sunny"===t&&e?eU`
          <path
            class="moon"
            d="m 13.502891,11.382935 c -1.011285,1.859223 -2.976664,3.121381 -5.2405751,3.121381 -3.289929,0 -5.953329,-2.663833 -5.953329,-5.9537625 0,-2.263911 1.261724,-4.228856 3.120948,-5.240575 -0.452782,0.842738 -0.712753,1.806363 -0.712753,2.832381 0,3.289928 2.663833,5.9533275 5.9533291,5.9533275 1.026017,0 1.989641,-0.259969 2.83238,-0.712752"
          />
        `:"sunny"===t?eU`
          <path
            class="sun"
            d="m 14.39303,8.4033507 c 0,3.3114723 -2.684145,5.9956173 -5.9956169,5.9956173 -3.3114716,0 -5.9956168,-2.684145 -5.9956168,-5.9956173 0,-3.311471 2.6841452,-5.995617 5.9956168,-5.995617 3.3114719,0 5.9956169,2.684146 5.9956169,5.995617"
          />
        `:""}
  ${"clear-night"===t?eU`
          <path
            class="moon"
            d="m 13.502891,11.382935 c -1.011285,1.859223 -2.976664,3.121381 -5.2405751,3.121381 -3.289929,0 -5.953329,-2.663833 -5.953329,-5.9537625 0,-2.263911 1.261724,-4.228856 3.120948,-5.240575 -0.452782,0.842738 -0.712753,1.806363 -0.712753,2.832381 0,3.289928 2.663833,5.9533275 5.9533291,5.9533275 1.026017,0 1.989641,-0.259969 2.83238,-0.712752"
          />
        `:""}
  ${"partlycloudy"===t&&e?eU`
          <path
            class="moon"
            d="m14.981 4.2112c0 1.9244-1.56 3.4844-3.484 3.4844-1.9244 0-3.4844-1.56-3.4844-3.4844s1.56-3.484 3.4844-3.484c1.924 0 3.484 1.5596 3.484 3.484"
          />
        `:"partlycloudy"===t?eU`
          <path
            class="sun"
            d="m14.981 4.2112c0 1.9244-1.56 3.4844-3.484 3.4844-1.9244 0-3.4844-1.56-3.4844-3.4844s1.56-3.484 3.4844-3.484c1.924 0 3.484 1.5596 3.484 3.484"
          />
        `:""}
  ${lh.has(t)?eU`
          <path
            class="cloud-back"
            d="m3.8863 5.035c-0.54892 0.16898-1.04 0.46637-1.4372 0.8636-0.63077 0.63041-1.0206 1.4933-1.0206 2.455 0 1.9251 1.5589 3.4682 3.4837 3.4682h6.9688c1.9251 0 3.484-1.5981 3.484-3.5232 0-1.9251-1.5589-3.5232-3.484-3.5232h-1.0834c-0.25294-1.6916-1.6986-2.9083-3.4463-2.9083-1.7995 0-3.2805 1.4153-3.465 3.1679"
          />
          <path
            class="cloud-front"
            d="m4.1996 7.6995c-0.33902 0.10407-0.64276 0.28787-0.88794 0.5334-0.39017 0.38982-0.63147 0.92322-0.63147 1.5176 0 1.1896 0.96414 2.1431 2.1537 2.1431h4.3071c1.1896 0 2.153-0.98742 2.153-2.1777 0-1.1896-0.96344-2.1777-2.153-2.1777h-0.66992c-0.15593-1.0449-1.0499-1.7974-2.1297-1.7974-1.112 0-2.0274 0.87524-2.1417 1.9586"
          />
        `:""}
  ${lc.has(t)?eU`
          <path
            class="rain"
            d="m5.2852 14.734c-0.22401 0.24765-0.57115 0.2988-0.77505 0.11395-0.20391-0.1845-0.18732-0.53481 0.036689-0.78281 0.14817-0.16298 0.59126-0.32914 0.87559-0.42369 0.12453-0.04092 0.22684 0.05186 0.19791 0.17956-0.065617 0.2921-0.18732 0.74965-0.33514 0.91299"
          />
          <path
            class="rain"
            d="m11.257 14.163c-0.22437 0.24765-0.57115 0.2988-0.77505 0.11395-0.2039-0.1845-0.18768-0.53481 0.03669-0.78281 0.14817-0.16298 0.59126-0.32914 0.8756-0.42369 0.12453-0.04092 0.22684 0.05186 0.19791 0.17956-0.06562 0.2921-0.18732 0.74965-0.33514 0.91299"
          />
          <path
            class="rain"
            d="m8.432 15.878c-0.15452 0.17039-0.3937 0.20567-0.53446 0.07867-0.14041-0.12735-0.12876-0.36865 0.025753-0.53975 0.10195-0.11218 0.40711-0.22684 0.60325-0.29175 0.085725-0.02858 0.15628 0.03563 0.13652 0.12382-0.045508 0.20108-0.12912 0.51647-0.23107 0.629"
          />
          <path
            class="rain"
            d="m7.9991 14.118c-0.19226 0.21237-0.49001 0.25612-0.66499 0.09737-0.17462-0.15804-0.16051-0.45861 0.03175-0.67098 0.12665-0.14005 0.50729-0.28293 0.75071-0.36336 0.10689-0.03563 0.19473 0.0441 0.17004 0.15346-0.056092 0.25082-0.16051 0.64347-0.28751 0.78352"
          />
        `:""}
  ${"pouring"===t?eU`
          <path
            class="rain"
            d="m10.648 16.448c-0.19226 0.21449-0.49001 0.25894-0.66499 0.09878-0.17498-0.16016-0.16087-0.4639 0.03175-0.67874 0.12665-0.14146 0.50694-0.2854 0.75071-0.36724 0.10689-0.03563 0.19473 0.0448 0.17004 0.15558-0.05645 0.25365-0.16051 0.65017-0.28751 0.79163"
          />
          <path
            class="rain"
            d="m5.9383 16.658c-0.22437 0.25012-0.5715 0.30162-0.77505 0.11501-0.20391-0.18627-0.18768-0.54046 0.036689-0.79093 0.14817-0.1651 0.59126-0.33267 0.87559-0.42827 0.12418-0.04127 0.22648 0.05221 0.19791 0.18168-0.065617 0.29528-0.18732 0.75741-0.33514 0.92251"
          />
        `:""}
  ${ld.has(t)?eU`
          <path
            class="cloud-back"
            d="m 13.59616,15.30968 c 0,0 -0.09137,-0.0071 -0.250472,-0.0187 -0.158045,-0.01235 -0.381353,-0.02893 -0.64382,-0.05715 -0.262466,-0.02716 -0.564444,-0.06385 -0.877358,-0.124531 -0.156986,-0.03034 -0.315383,-0.06844 -0.473781,-0.111478 -0.157691,-0.04551 -0.313266,-0.09842 -0.463902,-0.161219 l -0.267406,-0.0949 c -0.09984,-0.02646 -0.205669,-0.04904 -0.305153,-0.06738 -0.193322,-0.02716 -0.3838218,-0.03316 -0.5640912,-0.02011 -0.3626556,0.02611 -0.6847417,0.119239 -0.94615,0.226483 -0.2617611,0.108656 -0.4642556,0.230364 -0.600075,0.324203 -0.1358195,0.09419 -0.2049639,0.160514 -0.2049639,0.160514 0,0 0.089958,-0.01623 0.24765,-0.04445 0.1559278,-0.02575 0.3764139,-0.06174 0.6367639,-0.08714 0.2596444,-0.02646 0.5591527,-0.0441 0.8678333,-0.02328 0.076905,0.0035 0.1538111,0.01658 0.2321278,0.02293 0.077611,0.01058 0.1534581,0.02893 0.2314221,0.04022 0.07267,0.01834 0.1397,0.03986 0.213078,0.05644 l 0.238125,0.08925 c 0.09207,0.03281 0.183444,0.07055 0.275872,0.09878 0.09243,0.0261 0.185208,0.05327 0.277636,0.07161 0.184856,0.0388 0.367947,0.06174 0.543983,0.0702 0.353131,0.01905 0.678745,-0.01341 0.951442,-0.06456 0.27305,-0.05292 0.494595,-0.123119 0.646642,-0.181681 0.152047,-0.05785 0.234597,-0.104069 0.234597,-0.104069"
          />
          <path
            class="cloud-back"
            d="m 4.7519154,13.905801 c 0,0 0.091369,-0.0032 0.2511778,-0.0092 0.1580444,-0.0064 0.3820583,-0.01446 0.6455833,-0.03281 0.2631722,-0.01729 0.5662083,-0.04269 0.8812389,-0.09137 0.1576916,-0.02434 0.3175,-0.05609 0.4776611,-0.09384 0.1591027,-0.03951 0.3167944,-0.08643 0.4699,-0.14358 l 0.2702277,-0.08467 c 0.1008945,-0.02222 0.2074334,-0.04127 0.3072695,-0.05574 0.1943805,-0.01976 0.3848805,-0.0187 0.5651499,0.0014 0.3608917,0.03951 0.67945,0.144639 0.936625,0.261761 0.2575278,0.118534 0.4554364,0.247297 0.5873754,0.346781 0.132291,0.09913 0.198966,0.168275 0.198966,0.168275 0,0 -0.08925,-0.01976 -0.245886,-0.05397 C 9.9423347,14.087088 9.7232597,14.042988 9.4639681,14.00736 9.2057347,13.97173 8.9072848,13.94245 8.5978986,13.95162 c -0.077258,7.06e-4 -0.1541638,0.01058 -0.2328333,0.01411 -0.077964,0.0078 -0.1545166,0.02328 -0.2331861,0.03175 -0.073025,0.01588 -0.1404055,0.03422 -0.2141361,0.04798 l -0.2420055,0.08008 c -0.093486,0.02963 -0.1859139,0.06421 -0.2794,0.0889 C 7.3028516,14.23666 7.2093653,14.2603 7.116232,14.27512 6.9303181,14.30722 6.7465209,14.3231 6.5697792,14.32486 6.2166487,14.33046 5.8924459,14.28605 5.6218654,14.224318 5.3505793,14.161565 5.1318571,14.082895 4.9822793,14.01869 4.8327015,13.95519 4.7519154,13.905801 4.7519154,13.905801"
          />
        `:""}
  ${lu.has(t)?eU`
          <path
            class="snow"
            d="m 8.4319893,15.348341 c 0,0.257881 -0.209197,0.467079 -0.467078,0.467079 -0.258586,0 -0.46743,-0.209198 -0.46743,-0.467079 0,-0.258233 0.208844,-0.467431 0.46743,-0.467431 0.257881,0 0.467078,0.209198 0.467078,0.467431"
          />
          <path
            class="snow"
            d="m 11.263878,14.358553 c 0,0.364067 -0.295275,0.659694 -0.659695,0.659694 -0.364419,0 -0.6596937,-0.295627 -0.6596937,-0.659694 0,-0.364419 0.2952747,-0.659694 0.6596937,-0.659694 0.36442,0 0.659695,0.295275 0.659695,0.659694"
          />
          <path
            class="snow"
            d="m 5.3252173,13.69847 c 0,0.364419 -0.295275,0.660047 -0.659695,0.660047 -0.364067,0 -0.659694,-0.295628 -0.659694,-0.660047 0,-0.364067 0.295627,-0.659694 0.659694,-0.659694 0.36442,0 0.659695,0.295627 0.659695,0.659694"
          />
        `:""}
  ${lf.has(t)?eU`
          <path
            class="sun"
            d="m 9.9252695,10.935875 -1.6483986,2.341014 1.1170184,0.05929 -1.2169864,2.02141 3.0450261,-2.616159 H 9.8864918 L 10.97937,11.294651 10.700323,10.79794 h -0.508706 l -0.2663475,0.137936"
          />
        `:""}
  </svg>`;var lg=function(t,e){for(var i=-1,s=null==t?0:t.length,r=Array(s);++i<s;)r[i]=e(t[i],i,t);return r},lm=function(t){return"symbol"==typeof t||tx(t)&&"[object Symbol]"==I(t)},l_=1/0,lb=E?E.prototype:void 0,ly=lb?lb.toString:void 0,lv=function t(e){if("string"==typeof e)return e;if(tA(e))return lg(e,t)+"";if(lm(e))return ly?ly.call(e):"";var i=e+"";return"0"==i&&1/e==-l_?"-0":i},lx=function(t){return null==t?"":lv(t)},lw=function(t,e,i){var s=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(i=i>r?r:i)<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var a=Array(r);++s<r;)a[s]=t[s+e];return a},lM=function(t,e,i){var s=t.length;return i=void 0===i?s:i,!e&&i>=s?t:lw(t,e,i)},lk=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),lS=function(t){return lk.test(t)},l$="\\ud800-\\udfff",lA="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",lP="\\ud83c[\\udffb-\\udfff]",lC="[^"+l$+"]",lE="(?:\\ud83c[\\udde6-\\uddff]){2}",lO="[\\ud800-\\udbff][\\udc00-\\udfff]",lD="(?:"+lA+"|"+lP+")?",lT="[\\ufe0e\\ufe0f]?",lL="(?:\\u200d(?:"+[lC,lE,lO].join("|")+")"+lT+lD+")*",lz=RegExp(lP+"(?="+lP+")|"+("(?:"+[lC+lA+"?",lA,lE,lO,"["+l$+"]"].join("|"))+")"+(lT+lD+lL),"g"),lF=function(t){var e,i=lS(t=lx(t))?lS(e=t)?e.match(lz)||[]:e.split(""):void 0,s=i?i[0]:t.charAt(0),r=i?lM(i,1).join(""):t.slice(1);return s.toUpperCase()+r},lR=function(t){return lF(lx(t).toLowerCase())};let lI={humidity:"mdi:cloud-percent-outline",pressure:"mdi:gauge",wind_speed:"mdi:weather-windy-variant",wind_gust_speed:"mdi:weather-windy",visibility:"mdi:eye",ozone:"mdi:molecule",uv_index:"mdi:weather-sunny-alert",dew_point:"mdi:water-thermometer-outline",apparent_temperature:"mdi:thermometer",cloud_coverage:"mdi:cloud-outline"};class lj extends e8{createRenderRoot(){return this}render(){if(!this.hass||!this.weatherEntity||0===this.weatherAttributes.length)return eX;let t=this.weatherAttributes.map(t=>this._renderAttribute(t)).filter(t=>t!==eX);return 0===t.length?eX:eB`
      <div class="wfc-current-attributes">${t}</div>
    `}_renderAttribute(t){let e=this.computeAttributeValue(t);return e?eB`
      <div class="wfc-current-attribute">
        <ha-attribute-icon
          class="wfc-current-attribute-icon"
          .hass=${this.hass}
          .stateObj=${this.weatherEntity}
          .attribute=${t}
          .icon=${lI[t]}
        ></ha-attribute-icon>
        <span class="wfc-current-attribute-name">
          ${this.localize(t)}
        </span>
        <span class="wfc-current-attribute-value">${e}</span>
      </div>
    `:eX}constructor(...t){super(...t),this.weatherAttributes=[],this.computeAttributeValue=t=>{let e=this.weatherEntity;if(void 0!==e.attributes[t]){if("wind_speed"===t)return((t,e)=>{let i=e.attributes.wind_speed,s=e.attributes.wind_bearing;if(null==i)return;let r=t.formatEntityAttributeValue(e,"wind_speed");if(null==s)return r;let a=(t=>{if(null==t)return;let e="number"==typeof t?t:parseFloat(t);if(!isNaN(e)&&isFinite(e))return(e%=360)<0&&(e+=360),iY[Math.floor(e/22.5+.5)%16]})(s);if(!a)return r;let o=t.localize(`ui.card.weather.cardinal_direction.${a.toLowerCase()}`)||a;return`${r} (${o})`})(this.hass,e);if("wind_gust_speed"===t&&void 0!==e.attributes.wind_gust_speed){let t=iK(this.hass,e,"wind_gust_speed");return`${e.attributes.wind_gust_speed} ${t}`}if("ozone"===t&&void 0!==e.attributes.ozone){let t=iK(this.hass,e,"ozone");return`${e.attributes.ozone} ${t}`}return this.hass.formatEntityAttributeValue(this.weatherEntity,t)}},this.localize=t=>this.hass.formatEntityAttributeName(this.weatherEntity,t)||this.hass.localize(lV(t))||lR(t).replace(/_/g," ")}}k([ew({attribute:!1})],lj.prototype,"hass",void 0),k([ew({attribute:!1})],lj.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],lj.prototype,"weatherAttributes",void 0),k([ew({attribute:!1})],lj.prototype,"config",void 0),lj=k([t8("wfc-current-weather-attributes")],lj);let lV=iv(t=>"pressure"===t?"ui.card.weather.attributes.air_pressure":`ui.card.weather.attributes.${t}`);class lW extends e8{createRenderRoot(){return this}render(){if(!this.hass||!this.weatherEntity)return eX;let{state:t}=this.weatherEntity,e=this.getTemperature(),i=this.getTemperatureHighLow(),s=this.config.name||this.weatherEntity.attributes.friendly_name,r=i$(this.hass,new Date),a=!!this.config.forecast?.show_sun_times&&!!r&&r.isNightTime,o=this.getConfiguredAttributes();return eB`
      <div class="wfc-current-weather">
        <div class="wfc-current-conditions">
          <wfc-weather-condition-icon-provider
            .config=${this.config}
            .state=${t}
            .isNightTime=${a}
            .classes=${"wfc-current-icon"}
          ></wfc-weather-condition-icon-provider>
          <div class="wfc-name-state">
            <div class="wfc-current-state">
              ${this.hass?.formatEntityState?.(this.weatherEntity)}
            </div>
            ${s?eB`<div class="wfc-name wfc-secondary">${s}</div>`:eX}
          </div>
          ${null!==e?eB`
                <div class="wfc-current-temperatures">
                  <div
                    class="wfc-current-temperature"
                    .actionHandler=${iN({stopPropagation:!0,hasHold:im(this.config.hold_action),hasDoubleClick:im(this.config.double_tap_action)})}
                    @action=${this.onAction}
                  >
                    ${e.temperature}${e.temperatureUnit}
                  </div>
                  ${i?eB`
                        <div
                          class="wfc-current-temperature-high-low wfc-secondary"
                        >
                          ${i.temperatureHigh}${i.temperatureHighLowUnit}
                          /
                          ${i.temperatureLow}${i.temperatureHighLowUnit}
                        </div>
                      `:eX}
                </div>
              `:eX}
        </div>
        ${o.length>0?eB`<wfc-current-weather-attributes
              .hass=${this.hass}
              .weatherEntity=${this.weatherEntity}
              .config=${this.config}
              .weatherAttributes=${o}
            ></wfc-current-weather-attributes>`:eX}
      </div>
    `}getConfiguredAttributes(){let t=this.config.current?.show_attributes;return null==t?[]:Array.isArray(t)?t:"boolean"==typeof t?t?[...iH]:[]:"string"==typeof t?[t]:[]}getTemperature(){if(this.config?.temperature_entity){let t=this.hass.states[this.config.temperature_entity];if(t)return{temperature:ir(t.state,this.hass.locale),temperatureUnit:t.attributes.unit_of_measurement||this.hass.config?.unit_system?.temperature}}return null!=this.weatherEntity.attributes.temperature?{temperature:ir(this.weatherEntity.attributes.temperature,this.hass.locale),temperatureUnit:iK(this.hass,this.weatherEntity,"temperature")}:null}getTemperatureHighLow(){if(!this.dailyForecast||0===this.dailyForecast.length)return null;let t=this.dailyForecast[0]?.temperature,e=this.dailyForecast[0]?.templow;return null!=t&&null!=e?{temperatureHigh:ir(t,this.hass.locale),temperatureLow:ir(e,this.hass.locale),temperatureHighLowUnit:iK(this.hass,this.weatherEntity,"temperature")}:null}constructor(...t){super(...t),this.onAction=t=>{let e=this.config.temperature_entity?{...this.config,entity:this.config.temperature_entity}:this.config;ig(this,this.hass,e,t.detail.action)}}}k([ew({attribute:!1})],lW.prototype,"hass",void 0),k([ew({attribute:!1})],lW.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],lW.prototype,"dailyForecast",void 0),k([ew({attribute:!1})],lW.prototype,"config",void 0),lW=k([t8("wfc-current-weather")],lW);var lN={};lN=':host{--sun-size:var(--weather-forecast-card-effects-sun-size,140px);--sun-spin-duration:var(--weather-forecast-card-effects-sun-spin-duration,100s);--moon-size:var(--weather-forecast-card-effects-moon-size,80px);--sky-visibility:var(--weather-forecast-card-effects-sky-visibility,visible);--drop-color-start:color-mix(in srgb,var(--rain-color),transparent 100%);--drop-color-end:color-mix(in srgb,var(--rain-color),transparent 40%);--drop-height:var(--weather-forecast-card-effects-drop-height,20px);--drop-start-pos-diff-y:50px;--snow-glow-color:var(--snow-color);--container-height:0px;pointer-events:none;z-index:0;box-sizing:border-box;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));display:block;position:absolute;inset:0;overflow:hidden}:host(.light){--sun-color:var(--weather-forecast-card-effects-sun-color,#facc15);--sun-ray-color:var(--weather-forecast-card-effects-sun-ray-color,#fde04766);--sun-ray-opacity:.25;--moon-color:var(--weather-forecast-card-effects-moon-color,#dcdce6);--star-color:var(--weather-forecast-card-effects-star-color,#fff);--snow-color:var(--weather-forecast-card-effects-snow-color,#cbd5e1);--glow-intensity:.9;--rain-color:var(--weather-forecast-card-effects-rain-color,#2563eb);--clear-sky-color:var(--weather-forecast-card-effects-clear-sky-color,#1e82e699);--clear-sky-accent:var(--weather-forecast-card-effects-clear-sky-accent,#64b4f073);--clear-sky-horizon:var(--weather-forecast-card-effects-clear-sky-horizon,#d2ebff4d);--clear-night-sky-color:var(--weather-forecast-card-effects-clear-night-sky-color,#312e81b3);--clear-night-sky-accent:var(--weather-forecast-card-effects-clear-night-sky-accent,#581c878c);--clear-night-horizon:var(--weather-forecast-card-effects-clear-night-horizon,#ec489966)}:host(.dark){--sun-color:var(--weather-forecast-card-effects-sun-color,#fbbf24);--sun-ray-color:var(--weather-forecast-card-effects-sun-ray-color,#fbbf2480);--sun-ray-opacity:.15;--moon-color:var(--weather-forecast-card-effects-moon-color,#dcdce6);--star-color:var(--weather-forecast-card-effects-star-color,#fff);--snow-color:var(--weather-forecast-card-effects-snow-color,#fff);--glow-intensity:.6;--rain-color:var(--weather-forecast-card-effects-rain-color,#6cb4ee);--clear-sky-color:var(--weather-forecast-card-effects-clear-sky-color,#0369a1cc);--clear-sky-accent:var(--weather-forecast-card-effects-clear-sky-accent,#07598599);--clear-sky-horizon:var(--weather-forecast-card-effects-clear-sky-horizon,#0c4a6e66);--clear-night-sky-color:var(--weather-forecast-card-effects-clear-night-sky-color,#0a0f28d9);--clear-night-sky-accent:var(--weather-forecast-card-effects-clear-night-sky-accent,#141e5099);--clear-night-horizon:var(--weather-forecast-card-effects-clear-night-horizon,#28196466)}.snowflake-path{left:var(--pos-x);transform:rotate(var(--fall-angle,0deg));transform-origin:top;position:absolute;top:-50px}.snowflake{background:var(--snow-color);width:var(--flake-size);height:var(--flake-size);opacity:var(--flake-opacity);filter:blur(var(--flake-blur));box-shadow:0 0 1px var(--snow-glow-color),0 0 calc(var(--flake-shadow-spread)*var(--glow-intensity))var(--snow-glow-color);animation:snowflake var(--duration)linear infinite;animation-delay:var(--delay);border-radius:50%;position:absolute;left:0}.raindrop-path{left:var(--pos-x);top:calc(-1*var(--drop-height) - var(--drop-start-pos-diff-y));transform:rotate(var(--fall-angle,0deg));transform-origin:top;position:absolute}.raindrop{width:1px;height:var(--drop-height);background:linear-gradient(to bottom,var(--drop-color-start),var(--drop-color-end));animation:raindrop var(--duration)linear infinite;animation-delay:var(--delay);border-radius:1px;position:absolute;top:0;left:0}.splat{content:"";width:15px;height:10px;left:-7.5px;top:calc(var(--landing-pos-y) + var(--drop-height) + 50px - 5px);opacity:1;animation:splat var(--duration)linear infinite;animation-delay:var(--delay);border-top:2px dotted #fff3;border-radius:50%;position:absolute;transform:scale(0)}.lightning-flash{z-index:100;opacity:0;pointer-events:none;border-radius:inherit;mix-blend-mode:overlay;background:#fff;animation:20s infinite lightning-loop;position:absolute;inset:0;overflow:hidden}.sky{visibility:var(--sky-visibility);z-index:0;border-radius:inherit;background:linear-gradient(180deg,var(--clear-sky-color)0%,var(--clear-sky-accent)55%,var(--clear-sky-horizon)100%);height:100%;position:absolute;top:0;left:0;right:0}.sky:before{content:"";pointer-events:none;background:radial-gradient(circle at 65% 15%,#ffffff40 0%,#0000 50%);position:absolute;inset:0}.sun{top:calc(var(--sun-size)*-.95);width:var(--sun-size);height:var(--sun-size);box-shadow:0 0 20px 2px #fff7ed,0 0 40px 10px var(--sun-color),0 0 100px 30px #fdba744d;filter:drop-shadow(0 0 5px #0000001a);background:#f5fee0;border-radius:50%;position:absolute;right:35%;transform:translate(50%)}.sun-ray{background:linear-gradient(to bottom,transparent 0%,var(--sun-ray-color)50%,transparent 100%);transform-origin:top;opacity:var(--sun-ray-opacity);box-shadow:0 0 15px var(--sun-ray-color);border-radius:50% 50% 10% 10%;position:absolute;top:50%;left:50%}.ray-box{width:var(--sun-size);animation:spin var(--sun-spin-duration)linear infinite;margin:auto;position:absolute;inset:0}.night-sky{visibility:var(--sky-visibility);z-index:0;border-radius:inherit;background:linear-gradient(180deg,var(--clear-night-sky-color)0%,var(--clear-night-sky-accent)50%,var(--clear-night-horizon)100%);height:100%;position:absolute;top:0;left:0;right:0}.night-sky:before{content:"";pointer-events:none;background:radial-gradient(circle at 70% 20%,#ffffff26 0%,#0000 60%);position:absolute;inset:0}.moon{top:calc(var(--moon-size)*-.85);width:var(--moon-size);height:var(--moon-size);background:var(--moon-color);filter:drop-shadow(0 0 10px #0000001a);border-radius:50%;position:absolute;right:30%;transform:translate(50%);box-shadow:0 0 25px 5px #fff3,0 0 50px 15px #c8d2ff1a}.star{background:var(--star-color);box-shadow:0 0 3px 1px var(--star-color);border-radius:50%;animation:3s ease-in-out infinite twinkle;position:absolute}@keyframes twinkle{0%,to{opacity:var(--star-opacity,1)}50%{opacity:.3}}@keyframes snowflake{0%{transform:translate(0,0)}12.5%{transform:translate3d(calc(var(--drift-amplitude,15px)*.707),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.125),0)}25%{transform:translate3d(var(--drift-amplitude,15px),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.25),0)}37.5%{transform:translate3d(calc(var(--drift-amplitude,15px)*.707),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.375),0)}50%{transform:translate3d(0,calc((var(--container-height) + var(--drop-start-pos-diff-y))*.5),0)}62.5%{transform:translate3d(calc(var(--drift-amplitude,15px)*-.707),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.625),0)}75%{transform:translate3d(calc(var(--drift-amplitude,15px)*-1),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.75),0)}87.5%{transform:translate3d(calc(var(--drift-amplitude,15px)*-.707),calc((var(--container-height) + var(--drop-start-pos-diff-y))*.875),0)}to{opacity:.2;transform:translate3d(0,calc(var(--container-height) + var(--drop-start-pos-diff-y)),0)}}@keyframes raindrop{0%{opacity:1;transform:translate(0,0)}65%{opacity:1}75%{opacity:0;transform:translate3d(0,calc(var(--landing-pos-y) + var(--drop-start-pos-diff-y)),0)}to{opacity:0;transform:translate3d(0,calc(var(--landing-pos-y) + var(--drop-start-pos-diff-y)),0)}}@keyframes splat{0%{opacity:0;transform:scale(0)}80%{opacity:0;transform:scale(0)}90%{opacity:.5;transform:scale(1)}to{opacity:1;transform:scale(1.5)}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes lightning-loop{0%,90%{opacity:0}90.1%{opacity:.4}90.2%{opacity:0}90.3%{opacity:0}90.4%{opacity:.8}90.7%{opacity:.1}91%{opacity:0}91.1%{opacity:.3}91.3%{opacity:0}to{opacity:0}}';let lH=ea`
  ${er(lN)}
`;var lB=Math.floor,lU=Math.random,lq=/\s/,lX=function(t){for(var e=t.length;e--&&lq.test(t.charAt(e)););return e},lY=/^\s+/,lK=0/0,lJ=/^[-+]0x[0-9a-f]+$/i,lG=/^0b[01]+$/i,lZ=/^0o[0-7]+$/i,lQ=parseInt,l0=function(t){if("number"==typeof t)return t;if(lm(t))return lK;if(j(t)){var e,i="function"==typeof t.valueOf?t.valueOf():t;t=j(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=(e=t)?e.slice(0,lX(e)+1).replace(lY,""):e;var s=lG.test(t);return s||lZ.test(t)?lQ(t.slice(2),s?2:8):lJ.test(t)?lK:+t},l1=1/0,l2=function(t){return t?(t=l0(t))===l1||t===-l1?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0},l5=parseFloat,l4=Math.min,l3=Math.random,l6=function(t,e,i){if(i&&"boolean"!=typeof i&&t6(t,e,i)&&(e=i=void 0),void 0===i&&("boolean"==typeof e?(i=e,e=void 0):"boolean"==typeof t&&(i=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=l2(t),void 0===e?(e=t,t=0):e=l2(e)),t>e){var s,r,a=t;t=e,e=a}if(i||t%1||e%1){var o=l3();return l4(t+o*(e-t+l5("1e-"+((o+"").length-1))),e)}return s=t,r=e,s+lB(lU()*(r-s+1))};class l9 extends e8{static{this.styles=lH}connectedCallback(){super.connectedCallback(),this._resizeObserver?.disconnect(),this._resizeObserver=new ResizeObserver(t=>{let e=t[0],i=Math.round(e?.contentRect.height||0);this._containerHeight!==i&&(this._containerHeight=i,this._particles=this.computeParticles())}),this._resizeObserver.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver?.disconnect()}willUpdate(t){if(t.has("hass")){let e=t.get("hass"),i=this.hass?.themes?.darkMode;e?.themes?.darkMode!==i&&(this._isDark=i??!1)}(t.has("config")||t.has("weatherEntity")||t.has("currentForecast"))&&(this._particles=this.computeParticles())}updated(t){t.has("hass")&&this.onThemeChanged()}render(){let t=this.getActiveEffects();return t.length?eB`
      ${t.map(t=>{switch(t){case"sky":return this.renderSky();case"moon":return this.renderMoon();case"sun":return this.renderSun();case"rain":return this.renderRain();case"snow":return this.renderSnow();case"lightning":return this.renderLightning();default:return eX}})}
    `:eX}computeParticles(){let t=[];return this.getActiveEffects().forEach(e=>{switch(e){case"rain":t.push(...this.computeRainParticles());break;case"snow":t.push(...this.computeSnowParticles());break;case"moon":t.push(...this.computeStarParticles());break;case"sun":t.push(...this.computeSunRayParticles())}}),t}computeSnowParticles(){let t=this.computeIntensity(),e=[],i=Math.max(5,Math.round(t/10*75)),s=115/i;for(let t=0;t<i;t++){let i=-15+t*s+l6(0,.5*s),r=Math.random(),a=5*r+2,o=4.5/(r+.5)+l6(0,.8),n=l6(0,5,!0).toFixed(1),l=.7*r+.5,h=r<.3?1.5-3*r:.5*(r>.9),c=.9*a,d=(10+25*r).toFixed(0),u=(2+2*Math.random()).toFixed(2);e.push({type:"snow",x:`${i.toFixed(1)}%`,delay:n,duration:o.toFixed(1),size:a.toFixed(0),opacity:l.toFixed(1),blur:h.toFixed(1),shadowSpread:c.toFixed(1),driftAmplitude:d,driftFrequency:u})}return e}computeRainParticles(){let t=this.computeIntensity(),e=[],i=Math.max(10,Math.round(t/10*75)),s=100/i;for(let t=0;t<i;t++){let i=t*s+l6(0,.8*s),r=l6(.2,.5,!0),a=l6(.4,.7,!0),o=l6(.85,1,!0),n=this._containerHeight*o;e.push({type:"rain",x:`${i.toFixed(1)}%`,delay:r.toFixed(2),duration:a.toFixed(2),landingPosY:n.toFixed(0)})}return e}computeStarParticles(){let t=[];for(let e=0;e<30;e++){let i=e%6,s=Math.floor(e/6),r=l6(16.666666666666668*i+2.5,(i+1)*16.666666666666668-2.5),a=l6(6*s+.8999999999999999,(s+1)*6-.8999999999999999),o=l6(1,3),n=l6(.3,1,!0),l=l6(0,5,!0);t.push({type:"star",x:`${r.toFixed(0)}`,y:`${a.toFixed(0)}`,size:`${o}`,opacity:n.toFixed(2),delay:l.toFixed(1)})}return t}getActiveEffects(){let t=this.weatherEntity?.state,e=this.config.show_condition_effects;if(!e||!t)return[];let i=new Set,s=t=>!0===e||!!Array.isArray(e)&&e.includes(t);if((t.includes("rainy")||"pouring"===t)&&s("rain")&&i.add("rain"),t.includes("snowy")&&s("snow")&&i.add("snow"),t.includes("lightning")&&s("lightning")&&i.add("lightning"),"sunny"===t||"clear-night"===t){s("sky")&&i.add("sky");let e="clear-night"===t;if(this.config.forecast?.show_sun_times){let t=i$(this.hass,new Date);t?.isNightTime&&(e=!0)}e?s("moon")&&i.add("moon"):s("sun")&&i.add("sun")}return Array.from(i)}renderSky(){let t="clear-night"===this.weatherEntity.state;return this.config.forecast?.show_sun_times&&(t=i$(this.hass,new Date)?.isNightTime??t),eB`<div class="${t?"night-sky":"sky"}"></div>`}renderSun(){let t=this._particles.filter(t=>"sunray"===t.type);return eB`
      <div class="sun">
        <div class="ray-box">
          ${t.map(t=>eB`<div
                class="sun-ray"
                style="${i9({transform:`translate(-50%, 0) rotate(${t.angle}deg)`,height:`${t.height}px`,width:`${t.width}px`})}"
              ></div>`)}
        </div>
      </div>
    `}computeSunRayParticles(){return Array.from({length:30}).map(()=>({type:"sunray",angle:`${l6(0,360)}`,height:`${l6(100,200)}`,width:`${l6(5,15)}`}))}renderSnow(){return this.style.setProperty("--container-height",`${this._containerHeight}px`),this.style.setProperty("--fall-angle",`${this.computeFallingAngle()}deg`),this._particles.filter(t=>"snow"===t.type).map(t=>eB`
        <div
          class="snowflake-path"
          style="${i9({"--duration":`${t.duration}s`,"--delay":`${t.delay}s`,"--pos-x":t.x,"--flake-size":`${t.size}px`,"--flake-opacity":t.opacity,"--flake-blur":`${t.blur}px`,"--flake-shadow-spread":`${t.shadowSpread}px`,"--drift-amplitude":`${t.driftAmplitude}px`,"--drift-frequency":t.driftFrequency})}"
        >
          <div class="snowflake"></div>
        </div>
      `)}renderRain(){return this.style.setProperty("--container-height",`${this._containerHeight}px`),this.style.setProperty("--fall-angle",`${this.computeFallingAngle(!0)}deg`),this._particles.filter(t=>"rain"===t.type).map(t=>eB`
        <div
          class="raindrop-path"
          style="${i9({"--duration":`${t.duration}s`,"--delay":`${t.delay}s`,"--pos-x":t.x,"--landing-pos-y":`${t.landingPosY}px`})}"
        >
          <div class="raindrop"></div>
          <div class="splat"></div>
        </div>
      `)}renderLightning(){return eB` <div class="lightning-flash"></div> `}renderMoon(){return eB`
      <div class="moon"></div>
      ${this._particles.filter(t=>"star"===t.type).map(t=>eB`
          <div
            class="star"
            style="${i9({left:`${t.x}%`,top:`${t.y}%`,width:`${t.size}px`,height:`${t.size}px`,opacity:t.opacity,animationDelay:`${t.delay}s`})}"
          ></div>
        `)}
    `}computeIntensity(){let t=this.currentForecast?.precipitation||0;if(t>0){let e=iQ(iK(this.hass,this.weatherEntity,"precipitation"),"hourly");if(e>0)return Math.min(10,Math.ceil(t/e*10))}return this.weatherEntity?.state==="pouring"?10:3}computeFallingAngle(t=!1){let e=this.currentForecast;if(e?.wind_bearing===void 0||e?.wind_speed===void 0)return 0;let i=Math.min(i0(this.hass,this.weatherEntity,e)||0,14)/14;return Math.sin(e.wind_bearing*Math.PI/180)*Math.pow(i,t?.8:.5)*(t?15:35)}onThemeChanged(){this.classList.toggle("dark",this._isDark),this.classList.toggle("light",!this._isDark)}constructor(...t){super(...t),this._isDark=!1,this._containerHeight=0,this._particles=[]}}k([ew({attribute:!1})],l9.prototype,"hass",void 0),k([ew({attribute:!1})],l9.prototype,"weatherEntity",void 0),k([ew({attribute:!1})],l9.prototype,"currentForecast",void 0),k([ew({attribute:!1})],l9.prototype,"config",void 0),k([eM()],l9.prototype,"_isDark",void 0),k([eM()],l9.prototype,"_containerHeight",void 0),l9=k([t8("wfc-animation-provider")],l9);let l8={type:"custom:weather-forecast-card",show_current:!0,show_forecast:!0,default_forecast:"daily",forecast:{mode:iU.Simple,show_sun_times:!0},forecast_action:{tap_action:{action:"toggle-forecast"}},tap_action:{action:"more-info"}};class l7 extends e8{static{this.styles=ie}static async getConfigElement(){return document.createElement("weather-forecast-card-editor")}static getStubConfig(t){let e=Object.keys(t?.states??{}).filter(t=>t.startsWith("weather.")),i=e.find(t=>"weather.home"===t)||e[0]||"";return{...l8,entity:i}}setConfig(t){if(!t||!t.entity)throw Error("entity is required");if(!1===t.show_current&&!1===t.show_forecast)throw Error("At least one of show_current or show_forecast must be true");if(t.forecast?.daily_slots!=null&&t.forecast.daily_slots<=0)throw Error("daily_slots must be greater than 0");if(t.forecast?.hourly_slots!=null&&t.forecast.hourly_slots<=0)throw Error("hourly_slots must be greater than 0");this.config=t9({},l8,t),this._currentForecastType=this.config.default_forecast||"daily"}connectedCallback(){super.connectedCallback(),this._minForecastItemWidth=this.getInitialMinForecastItemWidth(),this.waitForLayout()}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribeForecastEvents(),this._resizeObserver?.disconnect(),this._resizeObserver=null,this._currentItemWidth=0}shouldUpdate(t){return function(t,e,i){if(e.has("config")||i)return!0;if(t.config.entity){var s=e.get("hass");return!s||s.states[t.config.entity]!==t.hass.states[t.config.entity]}return!1}(this,t,!1)||t.has("_dailyForecastEvent")||t.has("_hourlyForecastEvent")||t.has("_currentForecastType")||t.has("_currentItemWidth")||t.has("_isScrollable")}updated(t){super.updated(t),this.config&&this.hass&&((t.has("config")||this.haveWeatherUnitsChanged(t)||!this._hourlySubscription&&!this._dailySubscription)&&this.subscribeForecastEvents(),t.has("_currentForecastType")&&this._forecastContainer&&this.layoutForecastItems(this._forecastContainer.clientWidth))}render(){if(!this.config||!this.hass)return eX;let t=this.config.entity,e=this.hass.states[t];if(!e){var i;return eB`<hui-warning>
        ${i=this.hass,!i?"Home Assistant instance is not available.":"NOT_RUNNING"!==i.config.state?`${i.localize("ui.card.common.entity_not_found")}: ${t}`:i.localize("ui.panel.lovelace.warning.starting")}
      </hui-warning>`}let s=this.config.forecast?.mode===iU.Chart,r=this.getCurrentForecast();return eB`
      <ha-card>
        ${this.config.show_condition_effects?eB`<wfc-animation-provider
              .hass=${this.hass}
              .weatherEntity=${e}
              .config=${this.config}
              .currentForecast=${this._hourlyForecastData?.[0]}
            ></wfc-animation-provider>`:eX}
        <div class="wfc-container">
          ${this.config.show_current?eB`<div
                class="wfc-current-weather-container"
                .actionHandler=${iN({hasHold:im(this.config.hold_action),hasDoubleClick:im(this.config.double_tap_action)})}
                @action=${this.onCardAction}
              >
                <wfc-current-weather
                  .hass=${this.hass}
                  .weatherEntity=${e}
                  .config=${this.config}
                  .dailyForecast=${this._dailyForecastData}
                ></wfc-current-weather>
              </div>`:eX}
          ${!1===this.config.show_forecast?eX:eB`<div
                class="${iq({"wfc-forecast-container":!0,"is-scrollable":this._isScrollable})}"
                .actionHandler=${iN({hasHold:im(this.config.forecast_action?.hold_action),hasDoubleClick:im(this.config.forecast_action?.double_tap_action)})}
                @action=${this.onForecastAction}
              >
                ${s?eB`
                      <wfc-forecast-chart
                        .hass=${this.hass}
                        .config=${this.config}
                        .weatherEntity=${e}
                        .forecast=${r}
                        .forecastType=${this._currentForecastType}
                        .itemWidth=${this._currentItemWidth}
                      ></wfc-forecast-chart>
                    `:eB`
                      <wfc-forecast-simple
                        .hass=${this.hass}
                        .config=${this.config}
                        .weatherEntity=${e}
                        .forecast=${r}
                        .forecastType=${this._currentForecastType}
                      ></wfc-forecast-simple>
                    `}
              </div>`}
        </div>
      </ha-card>
    `}waitForLayout(){this.isConnected&&(this._forecastContainer||(this._forecastContainer=this.renderRoot?.querySelector(".wfc-forecast-container")),(this._forecastContainer?.clientWidth||0)>0?this.initResizeObserver():requestAnimationFrame(()=>this.waitForLayout()))}initResizeObserver(){!this._resizeObserver&&this._forecastContainer&&(this._resizeObserver=new ResizeObserver(t=>{for(let e of t)e.contentRect.width>0&&this.layoutForecastItems(e.contentRect.width)}),this._resizeObserver.observe(this._forecastContainer),this.layoutForecastItems(this._forecastContainer.clientWidth))}getInitialMinForecastItemWidth(){return parseInt(getComputedStyle(this).getPropertyValue("--forecast-item-width").trim()||"60",10)}processForecastData(){if(!this._dailyForecastEvent&&!this._hourlyForecastEvent)return;let{attributes:t}=this.hass.states[this.config.entity];if(!t)return;let e=this._hourlyForecastData?.length,i=this._dailyForecastData?.length,s=iG(t,this._hourlyForecastEvent,"hourly"),r=iG(t,this._dailyForecastEvent,"daily");if(!s&&!r)return;this._dailyForecastData=r?.forecast,this._dailyForecastData&&this.config?.forecast?.daily_slots!=null&&(this._dailyForecastData=this._dailyForecastData.slice(0,this.config.forecast.daily_slots));let a=this.config?.forecast?.hourly_group_size||0;a>1&&s?.forecast?this._hourlyForecastData=((t,e)=>{let i=[],s=0;for(;s<t.length;){let r=new Date(t[s].datetime).getHours()%e,a=0===r?e:e-r,o=t.slice(s,s+a);if(s+=o.length,0===o.length)continue;let n=o.map(t=>t.temperature),l=o.map(t=>t.humidity).filter(t=>void 0!==t),h=o.map(t=>t.pressure).filter(t=>void 0!==t),c=o.map(t=>t.wind_speed).filter(t=>void 0!==t),d=o.map(t=>t.wind_bearing).filter(t=>void 0!==t),u=o.map(t=>t.precipitation_probability).filter(t=>void 0!==t),f=new Date(o[o.length-1].datetime);f.setMinutes(59),f.setSeconds(59);let p={datetime:o[0].datetime,groupEndtime:f.toISOString(),condition:i5(o),temperature:parseFloat(iA(n).toFixed(1))};l.length>0&&(p.humidity=Math.round(iA(l))),u.length>0&&(p.precipitation_probability=Math.max(...u)),o.some(t=>void 0!==t.precipitation)&&(p.precipitation=o.reduce((t,e)=>t+(e.precipitation||0),0));let g=o.map(t=>t.templow).filter(t=>void 0!==t);g.length>0&&(p.templow=Math.min(...g)),h.length>0&&(p.pressure=Math.round(iA(h))),c.length>0&&(p.wind_speed=iA(c)),d.length>0&&(p.wind_bearing=i2(d)),i.push(p)}return i})(s.forecast,a):this._hourlyForecastData=s?.forecast,this._hourlyForecastData&&this.config?.forecast?.hourly_slots!=null&&(this._hourlyForecastData=this._hourlyForecastData.slice(0,this.config.forecast.hourly_slots)),this.getCurrentForecast().length!==(("hourly"===this._currentForecastType?e:i)??0)&&this._forecastContainer&&this.layoutForecastItems(this._forecastContainer.clientWidth)}_toggleForecastView(t){let e="daily"===this._currentForecastType;this._currentForecastType="daily"===this._currentForecastType?"hourly":"daily",t&&this.config?.forecast?.scroll_to_selected&&requestAnimationFrame(()=>{if(e)this.scrollToForecastItem(t);else{let t=this._dailyForecastData?.[0];t&&this.scrollToForecastItem(t,"instant")}})}scrollToForecastItem(t,e="smooth"){if(!this._forecastContainer)return;let i=this._forecastContainer.querySelector(".wfc-scroll-container");if(!i)return;let s=iw(t.datetime),r=this.getCurrentForecast(),a=r.findIndex(t=>iw(t.datetime)===s),o=-1!==a?a:r.length-1,n=this._currentItemWidth||0;i.scrollTo({left:o*n,behavior:e})}unsubscribeForecastEvents(){iF.debug("Unsubscribing from forecast events"),this._dailySubscription?.then(t=>t()),this._hourlySubscription?.then(t=>t())}async subscribeForecastEvents(){if(this.unsubscribeForecastEvents(),this.isConnected&&this.hass&&this.config&&this.hass.config.components.includes("weather")&&this.hass.states[this.config.entity]){if(!(t=>{if(!t||!t.attributes)return!1;let e=t.attributes.supported_features;return"number"==typeof e&&(1&e)!=0&&(2&e)!=0})(this.hass.states[this.config.entity]))return void iF.warn("Weather entity does not support all forecast features.");iF.debug("Subscribing to forecast events");try{this._dailySubscription=Promise.resolve(iZ(this.hass,this.config.entity,"daily",t=>{this._dailyForecastEvent=t,this.processForecastData()}))}catch(t){throw iR(t)&&setTimeout(()=>{this._dailyForecastEvent=void 0},2e3),t}try{this._hourlySubscription=Promise.resolve(iZ(this.hass,this.config.entity,"hourly",t=>{this._hourlyForecastEvent=t,this.processForecastData()}))}catch(t){throw iR(t)&&setTimeout(()=>{this._hourlyForecastEvent=void 0},2e3),t}}}getCurrentForecast(){return("hourly"===this._currentForecastType?this._hourlyForecastData:this._dailyForecastData)||[]}layoutForecastItems(t){if(t<=0||!this._minForecastItemWidth)return;let e=this.getCurrentForecast();if(!e.length)return;let i=Math.max(1,Math.floor(t/this._minForecastItemWidth)),s=Math.floor(t/i),r=e.length,a=t-r*s,o=a>0?a/(r-1):0;this._currentItemWidth=s+o,this._isScrollable=e.length>i,this.style.setProperty("--forecast-item-gap",`${o}px`),this.style.setProperty("--forecast-item-width",`${s}px`)}haveWeatherUnitsChanged(t){if(!t.has("hass")||!this.config?.entity)return!1;let e=t.get("hass"),i=this.hass;if(!e||!i)return!1;let s=e.states[this.config.entity],r=i.states[this.config.entity];return!!s&&!!r&&Object.values(iX).some(t=>s.attributes[t]!==r.attributes[t])}constructor(...t){super(...t),this._currentForecastType="daily",this._isScrollable=!1,this._forecastContainer=null,this._resizeObserver=null,this.onForecastAction=t=>{if(!this.config)return;let e=t.detail.action;"tap"===e&&this.config.forecast_action?.tap_action?.action==="toggle-forecast"||"hold"===e&&this.config.forecast_action?.hold_action?.action==="toggle-forecast"||"double_tap"===e&&this.config.forecast_action?.double_tap_action?.action==="toggle-forecast"?this._toggleForecastView(t.detail.selectedForecast??void 0):ig(this,this.hass,{entity:this.config.entity,tap_action:this.config.forecast_action?.tap_action,hold_action:this.config.forecast_action?.hold_action,double_tap_action:this.config.forecast_action?.double_tap_action},t.detail.action)},this.onCardAction=t=>{ig(this,this.hass,this.config,t.detail.action)}}}k([ew({attribute:!1})],l7.prototype,"hass",void 0),k([eM()],l7.prototype,"config",void 0),k([eM()],l7.prototype,"_dailySubscription",void 0),k([eM()],l7.prototype,"_hourlySubscription",void 0),k([eM()],l7.prototype,"_dailyForecastEvent",void 0),k([eM()],l7.prototype,"_hourlyForecastEvent",void 0),k([eM()],l7.prototype,"_currentItemWidth",void 0),k([eM()],l7.prototype,"_currentForecastType",void 0),k([eM()],l7.prototype,"_isScrollable",void 0);var ht={};ht=JSON.parse('{"name":"weather-forecast-card","version":"0.6.0","description":"A TypeScript weather forecast card built with Parcel","type":"module","module":"dist/weather-forecast-card.js","targets":{"module":{"distDir":"./dist","source":["src/index.ts"],"optimize":true,"publicUrl":"/hacsfiles/ha-weather-forecast-card/","includeNodeModules":true}},"scripts":{"dev":"parcel serve test/app/index.html test/app/resources/img/*.svg --open","build":"parcel build --no-source-maps --target module","build:debug":"parcel build --target module --no-optimize","clean":"rm -rf ./dist/ ./.parcel-cache","demo":"parcel serve demo/index.html demo/background.png","lint":"eslint \'src/**/*.ts\'","test":"vitest run","test:watch":"vitest watch"},"keywords":[],"author":"","license":"ISC","dependencies":{"chart.js":"^4.5.1","chartjs-plugin-datalabels":"^2.2.0","consola":"^3.4.2","custom-card-helpers":"^1.9.0","home-assistant-js-websocket":"^9.5.0","lit":"^3.1.0","lodash-es":"^4.17.22","memoize-one":"^6.0.0","suncalc":"^1.9.0"},"devDependencies":{"@eslint/js":"^9.39.2","@mdi/js":"^7.4.47","@open-wc/testing":"^4.0.0","@parcel/transformer-inline-string":"^2.16.3","@types/lodash-es":"^4.17.12","@types/node":"^20.10.0","@types/suncalc":"^1.9.2","eslint":"^9.39.2","eslint-config-prettier":"^10.1.8","happy-dom":"^20.0.11","parcel":"^2.16.1","prettier":"^3.7.4","typescript":"^5.9.3","typescript-eslint":"^8.50.0","vitest":"^4.0.16"}}');class he extends e8{setConfig(t){this._config=t}render(){if(!this.hass||!this._config)return eX;let t=this._schema(this.localize.bind(this)),e=hs(this._config);return eB`
      <ha-form
        .hass=${this.hass}
        .data=${e}
        .schema=${t}
        .computeLabel=${this._computeLabel}
        .computeHelper=${this._computeHelper}
        @value-changed=${this._valueChanged}
      >
      </ha-form>
    `}_valueChanged(t){t.stopPropagation();let e=t.detail.value;"show_both"===e.forecast_mode?(e.show_current=!0,e.show_forecast=!0):"show_current"===e.forecast_mode?(e.show_current=!0,e.show_forecast=!1):(e.show_current=!1,e.show_forecast=!0),delete e.forecast_mode;let i=hi(e);i?.forecast?.extra_attribute==="none"&&delete i.forecast.extra_attribute,Array.isArray(i.show_condition_effects)&&iB.every(t=>i.show_condition_effects.includes(t))&&(i.show_condition_effects=!0),Array.isArray(i?.current?.show_attributes)&&iH.every(t=>i.current.show_attributes.includes(t))&&(i.current.show_attributes=!0),il(this,"config-changed",{config:i})}constructor(...t){super(...t),this._schema=iv(t=>[...this._genericSchema(t),...this._currentWeatherSchema(t),...this._forecastSchema(t),...this._interactionsSchema(),...this._advancedSchema()]),this._genericSchema=t=>[{name:"entity",required:!0,selector:{entity:{domain:"weather"}},optional:!1},{name:"name",selector:{text:{}},optional:!0},{name:"temperature_entity",selector:{entity:{domain:"sensor",device_class:"temperature"}},optional:!0},{name:"forecast_mode",default:"show_both",selector:{select:{options:[{value:"show_both",label:t("ui.panel.lovelace.editor.card.weather-forecast.show_both")},{value:"show_current",label:t("ui.panel.lovelace.editor.card.weather-forecast.show_only_current")},{value:"show_forecast",label:t("ui.panel.lovelace.editor.card.weather-forecast.show_only_forecast")}]}}},{name:"default_forecast",default:"daily",optional:!0,selector:{select:{options:[{value:"hourly",label:t("ui.panel.lovelace.editor.card.weather-forecast.hourly")},{value:"daily",label:t("ui.panel.lovelace.editor.card.weather-forecast.daily")}]}}},{name:"show_condition_effects",default:!1,optional:!0,selector:{select:{multiple:!0,options:iB.map(t=>({value:t,label:lR(t)}))}}}],this._currentWeatherSchema=t=>[{name:"current.show_attributes",default:!1,optional:!0,selector:{select:{multiple:!0,options:iH.map(e=>({value:e,label:t(`ui.card.weather.attributes.${e}`)||lR(e).replace(/_/g," ")}))}}}],this._forecastSchema=t=>[{name:"forecast.mode",default:"simple",selector:{select:{options:[{value:"simple",label:"Simple"},{value:"chart",label:"Chart"}]}},optional:!0},{name:"forecast.extra_attribute",optional:!0,selector:{select:{mode:"dropdown",options:[{value:"none",label:t("ui.panel.lovelace.editor.card.weather-forecast.none")||"(no attribute)"},{value:"wind_bearing",label:t("ui.card.weather.attributes.wind_bearing")||"Wind bearing"},{value:"wind_direction",label:t("ui.card.weather.attributes.wind_direction")||"Wind direction"},{value:"precipitation_probability",label:t("ui.card.weather.attributes.precipitation_probability")||"Precipitation probability"}]}}},{name:"forecast.scroll_to_selected",selector:{boolean:{}},default:!1,optional:!0},{name:"forecast.show_sun_times",selector:{boolean:{}},default:!0,optional:!0},{name:"forecast.use_color_thresholds",selector:{boolean:{}},default:!1,optional:!0},{name:"forecast.hourly_group_size",optional:!0,selector:{number:{min:1,max:4}},default:1},{name:"forecast.hourly_slots",optional:!0,selector:{number:{min:1}}},{name:"forecast.daily_slots",optional:!0,selector:{number:{min:1}}}],this._interactionsSchema=()=>[{name:"forecast_interactions",type:"expandable",flatten:!0,schema:[{name:"forecast_action.tap_action",selector:{ui_action:{default_action:"toggle-forecast"}}},{name:"",type:"optional_actions",flatten:!0,schema:["hold_action","double_tap_action"].map(t=>({name:`forecast_action.${t}`,selector:{ui_action:{default_action:"none"}}}))}]},{name:"interactions",type:"expandable",flatten:!0,schema:[{name:"tap_action",selector:{ui_action:{default_action:"more-info"}}},{name:"",type:"optional_actions",flatten:!0,schema:["hold_action","double_tap_action"].map(t=>({name:t,selector:{ui_action:{default_action:"none"}}}))}]}],this._advancedSchema=()=>[{name:"advanced_settings",type:"expandable",flatten:!0,schema:[{name:"icons_path",selector:{text:{}},optional:!0}]}],this._computeLabel=t=>{let e=t.name.startsWith("forecast_action.")?t.name.split(".")[1]:t.name;switch(e){case"entity":return`${this.hass.localize("ui.panel.lovelace.editor.card.generic.entity")} (${(this.hass.localize("ui.panel.lovelace.editor.card.config.required")||"required").toLocaleLowerCase()})`;case"name":return this.hass.localize("ui.panel.lovelace.editor.card.generic.name");case"temperature_entity":return`${this.hass.localize("ui.card.weather.attributes.temperature")} ${(this.hass.localize("ui.panel.lovelace.editor.card.generic.entity")||"entity").toLocaleLowerCase()}`;case"forecast_mode":return this.hass.localize("ui.panel.lovelace.editor.card.weather-forecast.weather_to_show");case"default_forecast":return this.hass.localize("ui.panel.lovelace.editor.card.weather-forecast.forecast_type");case"icons_path":return"Path to custom icons";case"current.show_attributes":return this.hass.localize("ui.panel.lovelace.editor.card.generic.attribute")||"attribute";case"forecast.extra_attribute":return`Extra ${(this.hass.localize("ui.card.weather.forecast")||"forecast").toLocaleLowerCase()} ${(this.hass.localize("ui.panel.lovelace.editor.card.generic.attribute")||"attribute").toLocaleLowerCase()}`;case"forecast.mode":return"Forecast display mode";case"forecast.scroll_to_selected":return"Scroll to selected forecast";case"forecast.show_sun_times":return"Show sunrise and sunset times";case"forecast.use_color_thresholds":return"Use color thresholds";case"forecast.hourly_group_size":return"Hourly forecast group size";case"forecast.hourly_slots":return"Hourly forecast slots";case"forecast.daily_slots":return"Daily forecast slots";case"forecast_interactions":return`${this.hass.localize("ui.card.weather.forecast")} ${(this.hass.localize("ui.panel.lovelace.editor.card.generic.interactions")||"interactions").toLocaleLowerCase()}`;case"advanced_settings":return this.hass.localize("ui.dialogs.helper_settings.generic.advanced_settings");case"show_condition_effects":return"Show condition effects";default:return this.hass.localize(`ui.panel.lovelace.editor.card.generic.${e}`)}},this._computeHelper=t=>{switch(t.name){case"temperature_entity":return"Optional temperature sensor entity to override the weather entity's temperature.";case"default_forecast":return"Select the default forecast type to show when forecasts are enabled. Users can still toggle between hourly and daily forecasts if both are available.";case"current.show_attributes":return"Select which weather attributes to display in the current weather section.";case"forecast.extra_attribute":return"Select an extra attribute to display below each forecast.";case"forecast_interactions":return"Action to perform when the forecast section is interacted with. Default tap action toggles between hourly and daily forecasts.";case"interactions":return"Action to perform when the non-forecast area of the card is interacted with.";case"icons_path":return"Path to custom weather condition icons (e.g., /local/img/weather).";case"forecast.scroll_to_selected":return"Automatically scrolls to the first hourly forecast of the selected date when switching to hourly view, and returns to the first daily entry when switching back.";case"forecast.show_sun_times":return"Displays sunrise and sunset times in the hourly forecast, and uses specific icons to visualize clear night conditions.";case"forecast.use_color_thresholds":return"Replaces solid temperature lines with a gradient based on actual values when using forecast chart mode.";case"forecast.hourly_group_size":return"Aggregate hourly forecast data into groups to reduce the number of forecast entries shown.";case"forecast.hourly_slots":return"Limit the number of hourly forecast entries to show.";case"forecast.daily_slots":return"Limit the number of daily forecast entries to show.";case"name":return"Overrides the friendly name of the entity.";case"show_condition_effects":return"Select which weather conditions initiate visual effects and animations on the card.";default:return}},this.localize=t=>{let e;if(this._config?.entity&&t.startsWith("ui.card.weather.attributes")){let i=this.hass.states[this._config.entity];i&&(e=this.hass.formatEntityAttributeName(i,t.replace("ui.card.weather.attributes.","")))}return e||(e=this.hass.localize(t)),e}}}k([ew({attribute:!1})],he.prototype,"hass",void 0),k([eM()],he.prototype,"_config",void 0),he=k([t8("weather-forecast-card-editor")],he);let hi=t=>{let e={...t};for(let i of Object.keys(t)){if(!i.startsWith("forecast.")&&!i.startsWith("forecast_action.")&&!i.startsWith("current."))continue;let s=i.split(".");if(s.length<2)continue;let[r,a]=s;r&&a&&(e[r]&&"object"==typeof e[r]||(e[r]={}),e[r][a]=t[i],delete e[i])}return e},hs=t=>{let e=hr(t);return e.forecast_mode=e.show_current&&e.show_forecast?"show_both":e.show_current?"show_current":"show_forecast",!0===e.show_condition_effects&&(e.show_condition_effects=[...iB]),!0===e["current.show_attributes"]&&(e["current.show_attributes"]=[...iH]),e},hr=t=>{let e={};for(let i in t){let s=t[i];if("forecast"===i&&s&&"object"==typeof s&&!Array.isArray(s)){for(let t in s)e[`forecast.${t}`]=s[t];continue}if("current"===i&&s&&"object"==typeof s&&!Array.isArray(s)){for(let t in s)e[`current.${t}`]=s[t];continue}if("forecast_action"===i&&s&&"object"==typeof s&&!Array.isArray(s)){for(let t in s)e[`forecast_action.${t}`]=s[t];continue}e[i]=s}return e};customElements.define("weather-forecast-card",l7),window.customCards=window.customCards||[],window.customCards.push({type:"weather-forecast-card",name:"Weather Forecast Card",description:"Weather forecast card for Home Assistant"}),console.info(`%cWEATHER-FORECAST-CARD %c${ht.version}`,"color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray");